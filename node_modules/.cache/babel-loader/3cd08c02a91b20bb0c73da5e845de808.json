{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp\\\\www\\\\Projet_mediatraining_DEV\\\\mediatraining\\\\src\\\\Permissions.js\";\nimport React, { Component } from 'react';\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport jQuery from 'jquery';\n\nclass Permissions extends Component {\n  constructor(props) {\n    super(props);\n\n    this.modif = () => {\n      ///\n      var canAdd = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n      var canRead = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n      var canUpdate = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n      var canDelete = [0, 0, 0, 0, 0, 0, 0, 0, 0]; ///\n\n      var ajout = document.getElementsByClassName('add');\n      var explorer = document.getElementsByClassName('view');\n      var modifier = document.getElementsByClassName('Update');\n      var supprimer = document.getElementsByClassName('delet');\n      var longeur = this.state.services.length;\n      var tabPermission = [];\n\n      for (var i = 0; i < longeur; i++) {\n        if (ajout[i].checked) {\n          canAdd[i] = 1;\n        } else if (ajout[i].checked === false) {\n          canAdd[i] = 0;\n        }\n\n        if (explorer[i].checked) {\n          canRead[i] = 1;\n        } else if (explorer[i].checked === false) {\n          canRead[i] = 0;\n        }\n\n        if (modifier[i].checked) {\n          canUpdate[i] = 1;\n        } else if (modifier[i].checked === false) {\n          canUpdate[i] = 0;\n        }\n\n        if (supprimer[i].checked) {\n          canDelete[i] = 1;\n        } else if (supprimer[i].checked === false) {\n          canDelete[i] = 0;\n        }\n\n        var idRole = this.props.location.state.idRole;\n        var objetPermission = {\n          service_id: this.state.services[i].id,\n          role_id: idRole,\n          ajouter: canAdd[i],\n          explorer: canRead[i],\n          modifier: canUpdate[i],\n          supprimer: canDelete[i]\n        };\n        console.log(objetPermission);\n        tabPermission.push(objetPermission);\n      }\n\n      console.log(tabPermission); // jQuery.ajax({\n      //     url: process.env.REACT_APP_API_URL + 'Back_mediatraining/UpdPermissionByRoleId.php?id=' + idRole,\n      //     type: 'POST',\n      //     data: {\n      //         tabPermission: tabPermission\n      //     },\n      //     dataType: 'json',\n      //     success: function (code_html, statut) {\n      //         if (code_html.Result === \"OK\") {\n      //             this.props.history.push('/Roles');\n      //         }\n      //         else if (code_html.Result === \"KO\") {\n      //             alert(\"erreur,l'un de vos champs est vide!!\");\n      //         }\n      //     }\n      // });\n    };\n\n    this.state = {\n      services: [],\n      permissions: [],\n      role: ''\n    };\n  }\n\n  componentDidMount() {\n    axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/Services.php').then(res => {\n      this.setState({\n        services: res.data\n      }, () => {\n        let idRole = this.props.location.state.idRole;\n        axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/GetPermissionByRoleId.php?id=' + idRole).then(res => {\n          this.setState({\n            role: res.data[0].role,\n            permissions: res.data\n          }, () => {\n            var long = this.state.permissions.length;\n            var ajout = document.getElementsByClassName('add');\n            console.log(ajout);\n            var addCan = [];\n            var explorer = document.getElementsByClassName('view');\n            console.log(explorer);\n            var readCan = [];\n            var modifier = document.getElementsByClassName('Update');\n            console.log(modifier);\n            var updateCan = [];\n            var supprimer = document.getElementsByClassName('delet');\n            console.log(supprimer);\n            var deleteCan = [];\n\n            for (var i = 0; i < long; i++) {\n              addCan.push(this.state.permissions[i].ajouter);\n              readCan.push(this.state.permissions[i].explorer);\n              updateCan.push(this.state.permissions[i].modifier);\n              deleteCan.push(this.state.permissions[i].supprimer);\n            }\n\n            console.log('le tableau addCan');\n            console.log(addCan);\n            console.log('le tableau readCan');\n            console.log(readCan);\n            console.log('le tableau updateCan');\n            console.log(updateCan);\n            console.log('le tableau deleteCan');\n            console.log(deleteCan);\n\n            for (var j = 0; j < long; j++) {\n              if (addCan[j] == 1) {\n                ajout[j].checked = true;\n              } else if (addCan[j] == 0) {\n                ajout[j].checked = false;\n              }\n\n              if (readCan[j] == 1) {\n                explorer[j].checked = true;\n              } else if (readCan[j] == 0) {\n                explorer[j].checked = false;\n              }\n\n              if (updateCan[j] == 1) {\n                modifier[j].checked = true;\n              } else if (updateCan[j] == 0) {\n                modifier[j].checked = false;\n              }\n\n              if (deleteCan[j] == 1) {\n                supprimer[j].checked = true;\n              } else if (deleteCan[j] == 0) {\n                supprimer[j].checked = false;\n              }\n            }\n          });\n        });\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"page-wrapper\",\n      style: {\n        minHeight: '263px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row bg-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Modification permissions\"))), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'flex-start',\n        alignItems: 'center',\n        marginBottom: '10px',\n        marginLeft: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      style: {\n        fontSize: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Role : \", this.state.role)), React.createElement(\"div\", {\n      class: \"white-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"table-responsive\",\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table align-items-center table-flush\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Services\"), React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Ajouter\"), React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Explorer\"), React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Modifier\"), React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Supprimer\"))), this.state.services.map(el => React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, el.service), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"add\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"view\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"Update\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"delet\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }))))))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginBottom: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        width: '15%',\n        borderRadius: '5px'\n      },\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.modif,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Confirmer\"))))))));\n  }\n\n}\n\nexport default Permissions;","map":{"version":3,"sources":["C:/wamp/www/Projet_mediatraining_DEV/mediatraining/src/Permissions.js"],"names":["React","Component","Link","BrowserRouter","Router","Route","Switch","withRouter","axios","jQuery","Permissions","constructor","props","modif","canAdd","canRead","canUpdate","canDelete","ajout","document","getElementsByClassName","explorer","modifier","supprimer","longeur","state","services","length","tabPermission","i","checked","idRole","location","objetPermission","service_id","id","role_id","ajouter","console","log","push","permissions","role","componentDidMount","get","process","env","REACT_APP_API_URL","then","res","setState","data","long","addCan","readCan","updateCan","deleteCan","j","render","minHeight","display","justifyContent","alignItems","marginBottom","marginLeft","fontSize","textAlign","map","el","service","width","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\n\r\nclass Permissions extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            services: [],\r\n            permissions: [],\r\n            role: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/Services.php').then(res => {\r\n            this.setState({ services: res.data }, () => {\r\n                let idRole = this.props.location.state.idRole;\r\n                axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/GetPermissionByRoleId.php?id=' + idRole).then(res => {\r\n                    this.setState({\r\n                        role: res.data[0].role,\r\n                        permissions: res.data\r\n                    },\r\n                        () => {\r\n                            var long = this.state.permissions.length\r\n                            var ajout = document.getElementsByClassName('add')\r\n                            console.log(ajout)\r\n                            var addCan = []\r\n                            var explorer = document.getElementsByClassName('view')\r\n                            console.log(explorer)\r\n                            var readCan = []\r\n                            var modifier = document.getElementsByClassName('Update')\r\n                            console.log(modifier)\r\n                            var updateCan = []\r\n                            var supprimer = document.getElementsByClassName('delet')\r\n                            console.log(supprimer)\r\n                            var deleteCan = []\r\n\r\n                            for (var i = 0; i < long; i++) {\r\n                                addCan.push(this.state.permissions[i].ajouter)\r\n                                readCan.push(this.state.permissions[i].explorer)\r\n                                updateCan.push(this.state.permissions[i].modifier)\r\n                                deleteCan.push(this.state.permissions[i].supprimer)\r\n                            }\r\n\r\n                            console.log('le tableau addCan')\r\n                            console.log(addCan)\r\n                            console.log('le tableau readCan')\r\n                            console.log(readCan)\r\n                            console.log('le tableau updateCan')\r\n                            console.log(updateCan)\r\n                            console.log('le tableau deleteCan')\r\n                            console.log(deleteCan)\r\n\r\n                            for (var j = 0; j < long; j++) {\r\n                                if (addCan[j] == 1) {\r\n                                    ajout[j].checked = true\r\n                                }\r\n                                else if (addCan[j] == 0) {\r\n                                    ajout[j].checked = false\r\n                                }\r\n                                if (readCan[j] == 1) {\r\n                                    explorer[j].checked = true\r\n                                }\r\n                                else if (readCan[j] == 0) {\r\n                                    explorer[j].checked = false\r\n                                }\r\n                                if (updateCan[j] == 1) {\r\n                                    modifier[j].checked = true\r\n                                }\r\n                                else if (updateCan[j] == 0) {\r\n                                    modifier[j].checked = false\r\n                                }\r\n                                if (deleteCan[j] == 1) {\r\n                                    supprimer[j].checked = true\r\n                                }\r\n                                else if (deleteCan[j] == 0) {\r\n                                    supprimer[j].checked = false\r\n                                }\r\n                            }\r\n                        }\r\n                    );\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    modif = () => {\r\n        ///\r\n        var canAdd = [0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        var canRead = [0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        var canUpdate = [0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        var canDelete = [0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        ///\r\n        var ajout = document.getElementsByClassName('add')\r\n        var explorer = document.getElementsByClassName('view')\r\n        var modifier = document.getElementsByClassName('Update')\r\n        var supprimer = document.getElementsByClassName('delet')\r\n        var longeur = this.state.services.length\r\n        var tabPermission = []\r\n\r\n        for (var i = 0; i < longeur; i++) {\r\n            if (ajout[i].checked) {\r\n                canAdd[i] = 1\r\n            }\r\n            else if (ajout[i].checked === false) {\r\n                canAdd[i] = 0\r\n            }\r\n            if (explorer[i].checked) {\r\n                canRead[i] = 1\r\n            }\r\n            else if (explorer[i].checked === false) {\r\n                canRead[i] = 0\r\n            }\r\n            if (modifier[i].checked) {\r\n                canUpdate[i] = 1\r\n            }\r\n            else if (modifier[i].checked === false) {\r\n                canUpdate[i] = 0\r\n            }\r\n            if (supprimer[i].checked) {\r\n                canDelete[i] = 1\r\n            }\r\n            else if (supprimer[i].checked === false) {\r\n                canDelete[i] = 0\r\n            }\r\n\r\n            var idRole = this.props.location.state.idRole;\r\n            var objetPermission = { service_id: this.state.services[i].id, role_id: idRole, ajouter: canAdd[i], explorer: canRead[i], modifier: canUpdate[i], supprimer: canDelete[i] }\r\n            console.log(objetPermission)\r\n            tabPermission.push(objetPermission)\r\n        }\r\n        console.log(tabPermission)\r\n\r\n        // jQuery.ajax({\r\n        //     url: process.env.REACT_APP_API_URL + 'Back_mediatraining/UpdPermissionByRoleId.php?id=' + idRole,\r\n        //     type: 'POST',\r\n        //     data: {\r\n        //         tabPermission: tabPermission\r\n        //     },\r\n        //     dataType: 'json',\r\n        //     success: function (code_html, statut) {\r\n        //         if (code_html.Result === \"OK\") {\r\n        //             this.props.history.push('/Roles');\r\n        //         }\r\n        //         else if (code_html.Result === \"KO\") {\r\n        //             alert(\"erreur,l'un de vos champs est vide!!\");\r\n        //         }\r\n        //     }\r\n        // });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Modification permissions</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div class=\"row\">\r\n                        <div class=\"col-sm-12\">\r\n                            <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginBottom: '10px', marginLeft: '5px' }}>\r\n                                <h4 style={{ fontSize: '20px' }}>Role : {this.state.role}</h4>\r\n                            </div>\r\n                            <div class=\"white-box\">\r\n                                <div class=\"row\">\r\n                                    <div className=\"table-responsive\" style={{ textAlign: 'center' }}>\r\n                                        <table className=\"table align-items-center table-flush\">\r\n                                            <thead className=\"thead-light\">\r\n                                                <tr>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Services</th>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Ajouter</th>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Explorer</th>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Modifier</th>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Supprimer</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            {this.state.services.map(el =>\r\n                                                <tbody>\r\n                                                    <tr>\r\n                                                        <td>\r\n                                                            {el.service}\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <input class='add' type=\"checkbox\" />\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <input class='view' type=\"checkbox\" />\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <input class='Update' type=\"checkbox\" />\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <input class='delet' type=\"checkbox\" />\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            )}\r\n                                        </table>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px' }}>\r\n                                        <button style={{ width: '15%', borderRadius: '5px' }} type=\"button\" className=\"btn btn-success\" onClick={this.modif}>Confirmer</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Permissions;"]},"metadata":{},"sourceType":"module"}