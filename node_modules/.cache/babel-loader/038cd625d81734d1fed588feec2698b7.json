{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp\\\\www\\\\magasin_dev\\\\mediatraining\\\\src\\\\Planning.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport jQuery from 'jquery';\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Slide, Zoom, Flip, Bounce } from 'react-toastify';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nclass Planning extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addDateDebut = d => {\n      this.setState({\n        dateDebut: d\n      });\n    };\n\n    this.addDateFin = d => {\n      this.setState({\n        dateFin: d\n      });\n    };\n\n    this.planif = () => {\n      if (this.state.dateDebut != \"\" && this.state.dateFin != \"\") {\n        // date debut\n        var dateDebut = this.state.dateDebut;\n        let monthOne = '' + (dateDebut.getMonth() + 1);\n        let dayOne = '' + dateDebut.getDate();\n        let yearOne = dateDebut.getFullYear();\n        if (monthOne.length < 2) monthOne = '0' + monthOne;\n        if (dayOne.length < 2) dayOne = '0' + dayOne; // date fin\n\n        var convertDateDebut = [yearOne, monthOne, dayOne].join('-');\n        var dateFin = this.state.dateFin;\n        let monthTwo = '' + (dateFin.getMonth() + 1);\n        let dayTwo = '' + dateFin.getDate();\n        let yearTwo = dateFin.getFullYear();\n        if (monthTwo.length < 2) monthTwo = '0' + monthTwo;\n        if (dayTwo.length < 2) dayTwo = '0' + dayTwo;\n        var convertDateFin = [yearTwo, monthTwo, dayTwo].join('-'); // Différence entre 2 dates\n\n        var date1 = new Date(convertDateDebut);\n        var date2 = new Date(convertDateFin);\n        var time_diff = date2.getTime() - date1.getTime();\n        var days_Diff = time_diff / (1000 * 3600 * 24);\n\n        if (days_Diff <= 7) {\n          jQuery.ajax({\n            url: process.env.REACT_APP_API_URL + 'Back_magasin/Planning.php',\n            type: 'POST',\n            data: {\n              dateDebut: convertDateDebut,\n              dateFin: convertDateFin\n            },\n            dataType: 'json',\n            success: (code_html, statut) => {\n              this.setState({\n                arrayMarchMag: code_html\n              });\n            }\n          });\n        } else {\n          toast.error(\"⛔ Veuillez choisir une periode inférieur ou egale a une semaine !!\", {\n            containerId: 'A'\n          });\n        }\n      } else {\n        toast.error('⛔ Veuillez Verifier choisir une date debut et fin !!', {\n          containerId: 'A'\n        });\n      }\n    };\n\n    this.addMarchandiseur = (selectedMarchandiseur, index, indice) => {\n      if (selectedMarchandiseur != null) {\n        var marchandiseur = selectedMarchandiseur;\n        var arrayChange = this.state.arrayMarchMag;\n        arrayChange[index].ligneData[indice].marchandiseur = marchandiseur;\n        this.setState({\n          arrayMarchMag: arrayChange\n        }, () => {\n          jQuery.ajax({\n            url: process.env.REACT_APP_API_URL + 'Back_magasin/SelectMagasinsByMarch.php',\n            type: 'POST',\n            data: {\n              marchandiseurId: selectedMarchandiseur.value\n            },\n            dataType: 'json',\n            success: (code_html, statut) => {\n              this.setState({\n                magasins: code_html\n              });\n            }\n          });\n        });\n      } else {\n        this.setState({\n          magasins: []\n        });\n      }\n    };\n\n    this.addMagasin = (selectedMagasin, index, indice) => {\n      var magasin = selectedMagasin;\n      var arrayChange = this.state.arrayMarchMag;\n      arrayChange[index].ligneData[indice].magasin = magasin;\n      this.setState({\n        arrayMarchMag: arrayChange\n      });\n    };\n\n    this.additionLigne = index => {\n      var allArray = this.state.arrayMarchMag;\n      var arrayIndex = this.state.arrayMarchMag[index].ligneData;\n      var el = {\n        marchandiseur: '',\n        magasin: '',\n        tousIdPlanif: []\n      };\n      arrayIndex.push(el);\n      allArray[index].ligneData = arrayIndex;\n      this.setState({\n        arrayMarchMag: allArray\n      });\n    };\n\n    this.deleteLigne = (index, indice) => {\n      var arrayMarchMag = this.state.arrayMarchMag;\n      var supLigne = arrayMarchMag[index].ligneData.splice(indice, 1);\n      this.setState({\n        arrayMarchMag: arrayMarchMag,\n        arrayIdLigneMarchSupp: [...this.state.arrayIdLigneMarchSupp, supLigne]\n      });\n    };\n\n    this.ajout = () => {\n      // jQuery.ajax({\n      //     url: process.env.REACT_APP_API_URL + 'Back_magasin/AddPlanning.php',\n      //     type: 'POST',\n      //     data: {\n      //         arrayMarchMag: this.state.arrayMarchMag,\n      //         arrayIdLigneMarchSupp: this.state.arrayIdLigneMarchSupp\n      //     },\n      //     dataType: 'json',\n      //     success: (code_html, statut) => {\n      //         if (code_html.Result == \"OK\") {\n      //             this.props.history.push('/Menu');\n      //         }\n      //         else if (code_html.Result == \"KO\") {\n      //             alert(\"erreur,l'un de vos champs est vide!!\");\n      //         }\n      //     }\n      // });\n      console.log(this.state.arrayMarchMag);\n      console.log(this.state.arrayIdLigneMarchSupp);\n    };\n\n    this.state = {\n      marchandiseurs: [],\n      selectedMarchandiseur: '',\n      dateDebut: '',\n      dateFin: '',\n      magasins: [],\n      modal: false,\n      arrayMarchMag: [],\n      arrayIdLigneMarchSupp: []\n    };\n  }\n\n  componentDidMount() {\n    if (JSON.parse(localStorage.getItem('userPermissions')) != null) {\n      axios.get(process.env.REACT_APP_API_URL + 'Back_magasin/SelectMarchandiseurs.php').then(res => {\n        this.setState({\n          marchandiseurs: res.data\n        });\n      });\n    } else {\n      document.location = '/';\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"page-wrapper\",\n      style: {\n        minHeight: '263px',\n        marginLeft: '0px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row bg-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Planning\"))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"white-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Date debut\"), React.createElement(DatePicker, {\n      class: \"form-control ddate\",\n      style: {\n        border: 'none'\n      },\n      selected: this.state.dateDebut,\n      onChange: this.addDateDebut,\n      dateFormat: \"dd/MM/yyy\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Date fin\"), React.createElement(DatePicker, {\n      class: \"form-control ddate\",\n      style: {\n        border: 'none'\n      },\n      selected: this.state.dateFin,\n      onChange: this.addDateFin,\n      dateFormat: \"dd/MM/yyy\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        borderRadius: '5px',\n        backgroundColor: '#761C19',\n        borderColor: '#761C19'\n      },\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.planif,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Planifier\"))), this.state.arrayMarchMag.length > 0 ? React.createElement(\"div\", {\n      style: {\n        marginTop: '10px'\n      },\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-bordered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      style: {\n        textAlign: 'center',\n        fontWeight: 'bold'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        padding: '5px'\n      },\n      className: \"fas fa-calendar-day\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), \"Date\"), React.createElement(\"th\", {\n      style: {\n        textAlign: 'center',\n        fontWeight: 'bold'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        padding: '5px'\n      },\n      className: \"fas fa-map-marked-alt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }), \"Marchandiseur-Magasins\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, this.state.arrayMarchMag.map((el, index) => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      style: {\n        textAlign: 'center'\n      },\n      className: \"col-md-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, el.date), React.createElement(\"td\", {\n      style: {\n        textAlign: 'center'\n      },\n      className: \"col-md-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-bordered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"Marchandiseur\"), React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"Magasins\"), React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      },\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Supp\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, this.state.arrayMarchMag[index].ligneData.map((el, indice) => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      className: \"col-md-5\",\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(Select, {\n      value: el.marchandiseur,\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addMarchandiseur(e, index, indice),\n      options: this.state.marchandiseurs,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }))), React.createElement(\"td\", {\n      className: \"col-md-5\",\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(Select, {\n      value: el.magasin,\n      isMulti: true,\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addMagasin(e, index, indice),\n      options: this.state.magasins,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }))), React.createElement(\"td\", {\n      className: \"col-md-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        backgroundColor: '#D9534F',\n        borderRadius: '5px'\n      },\n      onClick: () => this.deleteLigne(index, indice),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        color: 'white'\n      },\n      className: \"fas fa-trash-alt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    })))))))), \"Ajout\", React.createElement(\"i\", {\n      onClick: () => this.additionLigne(index),\n      className: \"fas fa-plus-circle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginBottom: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        borderRadius: '5px'\n      },\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.ajout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"Confirmer\"))) : null), React.createElement(Modal, {\n      isOpen: this.state.modal,\n      toggle: this.nonDeleteLignEnseign,\n      className: this.props.className,\n      fade: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: this.nonDeleteLignEnseign,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        width: '465px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      width: \"30%\",\n      src: \"./images/deleteModal.png\",\n      alt: \"..\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }))), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontFamily: 'Montserrat, sans-serif',\n        FontSize: '14px',\n        FontWeight: '700',\n        LineHeight: '18.375px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, \"\\xCAtes-Vous s\\xFBr de vouloir supprimer cette ligne ?\")), React.createElement(\"div\", {\n      className: \"hvr-push\",\n      style: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        marginBottom: '15px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.deleteLignEnseign(),\n      style: {\n        backgroundColor: '#00FF7F',\n        borderRadius: '5px',\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        color: 'white'\n      },\n      className: \"far fa-thumbs-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }), \"Oui\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.nonDeleteLignEnseign(),\n      style: {\n        backgroundColor: '#D9534F',\n        borderRadius: '5px',\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        color: 'white'\n      },\n      className: \"far fa-thumbs-down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }), \"Non\")))))))), React.createElement(ToastContainer, {\n      transition: Flip,\n      enableMultiContainer: true,\n      containerId: 'A',\n      position: toast.POSITION.TOP_RIGHT,\n      autoClose: 2500,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withRouter(Planning);","map":{"version":3,"sources":["C:/wamp/www/magasin_dev/mediatraining/src/Planning.js"],"names":["React","Component","axios","jQuery","Link","BrowserRouter","Router","Route","Switch","withRouter","HashRouter","Redirect","DatePicker","ToastContainer","toast","Slide","Zoom","Flip","Bounce","Select","Button","Modal","ModalHeader","ModalBody","ModalFooter","Planning","constructor","props","addDateDebut","d","setState","dateDebut","addDateFin","dateFin","planif","state","monthOne","getMonth","dayOne","getDate","yearOne","getFullYear","length","convertDateDebut","join","monthTwo","dayTwo","yearTwo","convertDateFin","date1","Date","date2","time_diff","getTime","days_Diff","ajax","url","process","env","REACT_APP_API_URL","type","data","dataType","success","code_html","statut","arrayMarchMag","error","containerId","addMarchandiseur","selectedMarchandiseur","index","indice","marchandiseur","arrayChange","ligneData","marchandiseurId","value","magasins","addMagasin","selectedMagasin","magasin","additionLigne","allArray","arrayIndex","el","tousIdPlanif","push","deleteLigne","supLigne","splice","arrayIdLigneMarchSupp","ajout","console","log","marchandiseurs","modal","componentDidMount","JSON","parse","localStorage","getItem","get","then","res","document","location","render","minHeight","marginLeft","border","display","justifyContent","borderRadius","backgroundColor","borderColor","marginTop","textAlign","fontWeight","padding","map","date","e","color","marginBottom","nonDeleteLignEnseign","className","width","fontFamily","FontSize","FontWeight","LineHeight","deleteLignEnseign","POSITION","TOP_RIGHT"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,IAAT,EAAeC,aAAa,IAAIC,MAAhC,EAAwCC,KAAxC,EAA+CC,MAA/C,EAAuDC,UAAvD,EAAmEC,UAAnE,EAA+EC,QAA/E,QAA+F,kBAA/F;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAO,4CAAP;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAO,uCAAP;AACA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,IAAtB,EAA4BC,MAA5B,QAA0C,gBAA1C;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,WAAxB,EAAqCC,SAArC,EAAgDC,WAAhD,QAAmE,YAAnE;;AAEA,MAAMC,QAAN,SAAuBxB,SAAvB,CAAiC;AAC7ByB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA2BnBC,YA3BmB,GA2BJC,CAAC,IAAI;AAChB,WAAKC,QAAL,CAAc;AACVC,QAAAA,SAAS,EAAEF;AADD,OAAd;AAGH,KA/BkB;;AAAA,SAiCnBG,UAjCmB,GAiCNH,CAAC,IAAI;AACd,WAAKC,QAAL,CAAc;AACVG,QAAAA,OAAO,EAAEJ;AADC,OAAd;AAGH,KArCkB;;AAAA,SAuCnBK,MAvCmB,GAuCV,MAAM;AACX,UAAI,KAAKC,KAAL,CAAWJ,SAAX,IAAwB,EAAxB,IAA8B,KAAKI,KAAL,CAAWF,OAAX,IAAsB,EAAxD,EAA4D;AACxD;AACA,YAAIF,SAAS,GAAG,KAAKI,KAAL,CAAWJ,SAA3B;AACA,YAAIK,QAAQ,GAAG,MAAML,SAAS,CAACM,QAAV,KAAuB,CAA7B,CAAf;AACA,YAAIC,MAAM,GAAG,KAAKP,SAAS,CAACQ,OAAV,EAAlB;AACA,YAAIC,OAAO,GAAGT,SAAS,CAACU,WAAV,EAAd;AACA,YAAIL,QAAQ,CAACM,MAAT,GAAkB,CAAtB,EACIN,QAAQ,GAAG,MAAMA,QAAjB;AACJ,YAAIE,MAAM,CAACI,MAAP,GAAgB,CAApB,EACIJ,MAAM,GAAG,MAAMA,MAAf,CAToD,CAUxD;;AACA,YAAIK,gBAAgB,GAAG,CAACH,OAAD,EAAUJ,QAAV,EAAoBE,MAApB,EAA4BM,IAA5B,CAAiC,GAAjC,CAAvB;AACA,YAAIX,OAAO,GAAG,KAAKE,KAAL,CAAWF,OAAzB;AACA,YAAIY,QAAQ,GAAG,MAAMZ,OAAO,CAACI,QAAR,KAAqB,CAA3B,CAAf;AACA,YAAIS,MAAM,GAAG,KAAKb,OAAO,CAACM,OAAR,EAAlB;AACA,YAAIQ,OAAO,GAAGd,OAAO,CAACQ,WAAR,EAAd;AACA,YAAII,QAAQ,CAACH,MAAT,GAAkB,CAAtB,EACIG,QAAQ,GAAG,MAAMA,QAAjB;AACJ,YAAIC,MAAM,CAACJ,MAAP,GAAgB,CAApB,EACII,MAAM,GAAG,MAAMA,MAAf;AACJ,YAAIE,cAAc,GAAG,CAACD,OAAD,EAAUF,QAAV,EAAoBC,MAApB,EAA4BF,IAA5B,CAAiC,GAAjC,CAArB,CApBwD,CAqBxD;;AACA,YAAIK,KAAK,GAAG,IAAIC,IAAJ,CAASP,gBAAT,CAAZ;AACA,YAAIQ,KAAK,GAAG,IAAID,IAAJ,CAASF,cAAT,CAAZ;AACA,YAAII,SAAS,GAAGD,KAAK,CAACE,OAAN,KAAkBJ,KAAK,CAACI,OAAN,EAAlC;AACA,YAAIC,SAAS,GAAGF,SAAS,IAAI,OAAO,IAAP,GAAc,EAAlB,CAAzB;;AACA,YAAIE,SAAS,IAAI,CAAjB,EAAoB;AAChBnD,UAAAA,MAAM,CAACoD,IAAP,CAAY;AACRC,YAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,2BAD7B;AAERC,YAAAA,IAAI,EAAE,MAFE;AAGRC,YAAAA,IAAI,EAAE;AACF9B,cAAAA,SAAS,EAAEY,gBADT;AAEFV,cAAAA,OAAO,EAAEe;AAFP,aAHE;AAORc,YAAAA,QAAQ,EAAE,MAPF;AAQRC,YAAAA,OAAO,EAAE,CAACC,SAAD,EAAYC,MAAZ,KAAuB;AAC5B,mBAAKnC,QAAL,CAAc;AACVoC,gBAAAA,aAAa,EAAEF;AADL,eAAd;AAGH;AAZO,WAAZ;AAcH,SAfD,MAgBK;AACDlD,UAAAA,KAAK,CAACqD,KAAN,CAAY,oEAAZ,EAAkF;AAAEC,YAAAA,WAAW,EAAE;AAAf,WAAlF;AACH;AACJ,OA7CD,MA8CK;AACDtD,QAAAA,KAAK,CAACqD,KAAN,CAAY,sDAAZ,EAAoE;AAAEC,UAAAA,WAAW,EAAE;AAAf,SAApE;AACH;AACJ,KAzFkB;;AAAA,SA2FnBC,gBA3FmB,GA2FA,CAACC,qBAAD,EAAwBC,KAAxB,EAA+BC,MAA/B,KAA0C;AACzD,UAAIF,qBAAqB,IAAI,IAA7B,EAAmC;AAC/B,YAAIG,aAAa,GAAGH,qBAApB;AACA,YAAII,WAAW,GAAG,KAAKvC,KAAL,CAAW+B,aAA7B;AACAQ,QAAAA,WAAW,CAACH,KAAD,CAAX,CAAmBI,SAAnB,CAA6BH,MAA7B,EAAqCC,aAArC,GAAqDA,aAArD;AACA,aAAK3C,QAAL,CAAc;AACVoC,UAAAA,aAAa,EAAEQ;AADL,SAAd,EAEG,MAAM;AACLvE,UAAAA,MAAM,CAACoD,IAAP,CAAY;AACRC,YAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,wCAD7B;AAERC,YAAAA,IAAI,EAAE,MAFE;AAGRC,YAAAA,IAAI,EAAE;AACFe,cAAAA,eAAe,EAAEN,qBAAqB,CAACO;AADrC,aAHE;AAMRf,YAAAA,QAAQ,EAAE,MANF;AAORC,YAAAA,OAAO,EAAE,CAACC,SAAD,EAAYC,MAAZ,KAAuB;AAC5B,mBAAKnC,QAAL,CAAc;AACVgD,gBAAAA,QAAQ,EAAEd;AADA,eAAd;AAGH;AAXO,WAAZ;AAaH,SAhBD;AAiBH,OArBD,MAsBK;AACD,aAAKlC,QAAL,CAAc;AACVgD,UAAAA,QAAQ,EAAE;AADA,SAAd;AAGH;AACJ,KAvHkB;;AAAA,SAyHnBC,UAzHmB,GAyHN,CAACC,eAAD,EAAkBT,KAAlB,EAAyBC,MAAzB,KAAoC;AAC7C,UAAIS,OAAO,GAAGD,eAAd;AACA,UAAIN,WAAW,GAAG,KAAKvC,KAAL,CAAW+B,aAA7B;AACAQ,MAAAA,WAAW,CAACH,KAAD,CAAX,CAAmBI,SAAnB,CAA6BH,MAA7B,EAAqCS,OAArC,GAA+CA,OAA/C;AACA,WAAKnD,QAAL,CAAc;AACVoC,QAAAA,aAAa,EAAEQ;AADL,OAAd;AAGH,KAhIkB;;AAAA,SAkInBQ,aAlImB,GAkIFX,KAAD,IAAW;AACvB,UAAIY,QAAQ,GAAG,KAAKhD,KAAL,CAAW+B,aAA1B;AACA,UAAIkB,UAAU,GAAG,KAAKjD,KAAL,CAAW+B,aAAX,CAAyBK,KAAzB,EAAgCI,SAAjD;AACA,UAAIU,EAAE,GAAG;AAAEZ,QAAAA,aAAa,EAAE,EAAjB;AAAqBQ,QAAAA,OAAO,EAAE,EAA9B;AAAkCK,QAAAA,YAAY,EAAE;AAAhD,OAAT;AACAF,MAAAA,UAAU,CAACG,IAAX,CAAgBF,EAAhB;AACAF,MAAAA,QAAQ,CAACZ,KAAD,CAAR,CAAgBI,SAAhB,GAA4BS,UAA5B;AACA,WAAKtD,QAAL,CAAc;AACVoC,QAAAA,aAAa,EAAEiB;AADL,OAAd;AAGH,KA3IkB;;AAAA,SA6InBK,WA7ImB,GA6IL,CAACjB,KAAD,EAAQC,MAAR,KAAmB;AAC7B,UAAIN,aAAa,GAAG,KAAK/B,KAAL,CAAW+B,aAA/B;AACA,UAAIuB,QAAQ,GAAGvB,aAAa,CAACK,KAAD,CAAb,CAAqBI,SAArB,CAA+Be,MAA/B,CAAsClB,MAAtC,EAA8C,CAA9C,CAAf;AACA,WAAK1C,QAAL,CAAc;AACVoC,QAAAA,aAAa,EAAEA,aADL;AAEVyB,QAAAA,qBAAqB,EAAE,CAAC,GAAG,KAAKxD,KAAL,CAAWwD,qBAAf,EAAsCF,QAAtC;AAFb,OAAd;AAIH,KApJkB;;AAAA,SAsJnBG,KAtJmB,GAsJX,MAAM;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK3D,KAAL,CAAW+B,aAAvB;AACA2B,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK3D,KAAL,CAAWwD,qBAAvB;AACH,KA1KkB;;AAEf,SAAKxD,KAAL,GAAa;AACT4D,MAAAA,cAAc,EAAE,EADP;AAETzB,MAAAA,qBAAqB,EAAE,EAFd;AAGTvC,MAAAA,SAAS,EAAE,EAHF;AAITE,MAAAA,OAAO,EAAE,EAJA;AAKT6C,MAAAA,QAAQ,EAAE,EALD;AAMTkB,MAAAA,KAAK,EAAE,KANE;AAOT9B,MAAAA,aAAa,EAAE,EAPN;AAQTyB,MAAAA,qBAAqB,EAAE;AARd,KAAb;AAUH;;AAEDM,EAAAA,iBAAiB,GAAG;AAChB,QAAIC,IAAI,CAACC,KAAL,CAAYC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAZ,KAAyD,IAA7D,EAAmE;AAC/DnG,MAAAA,KAAK,CAACoG,GAAN,CAAU7C,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,uCAA1C,EAAmF4C,IAAnF,CAAwFC,GAAG,IAAI;AAC3F,aAAK1E,QAAL,CAAc;AACViE,UAAAA,cAAc,EAAES,GAAG,CAAC3C;AADV,SAAd;AAGH,OAJD;AAKH,KAND,MAOK;AACD4C,MAAAA,QAAQ,CAACC,QAAT,GAAoB,GAApB;AACH;AACJ;;AAmJDC,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,EAAE,EAAC,cAAR;AAAuB,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAE,OAAb;AAAsBC,QAAAA,UAAU,EAAE;AAAlC,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,CADJ,CADJ,EAQI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI,oBAAC,UAAD;AAAY,MAAA,KAAK,EAAC,oBAAlB;AAAuC,MAAA,KAAK,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAA9C;AACI,MAAA,QAAQ,EAAE,KAAK3E,KAAL,CAAWJ,SADzB;AAEI,MAAA,QAAQ,EAAE,KAAKH,YAFnB;AAGI,MAAA,UAAU,EAAC,WAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,CADJ,EAWI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAEI,oBAAC,UAAD;AAAY,MAAA,KAAK,EAAC,oBAAlB;AAAuC,MAAA,KAAK,EAAE;AAAEkF,QAAAA,MAAM,EAAE;AAAV,OAA9C;AACI,MAAA,QAAQ,EAAE,KAAK3E,KAAL,CAAWF,OADzB;AAEI,MAAA,QAAQ,EAAE,KAAKD,UAFnB;AAGI,MAAA,UAAU,EAAC,WAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,CAXJ,CADJ,EAuBI;AAAK,MAAA,KAAK,EAAE;AAAE+E,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,cAAc,EAAE;AAAnC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAE,KAAhB;AAAuBC,QAAAA,eAAe,EAAE,SAAxC;AAAmDC,QAAAA,WAAW,EAAE;AAAhE,OAAf;AAA4F,MAAA,IAAI,EAAC,QAAjG;AAA0G,MAAA,SAAS,EAAC,iBAApH;AAAsI,MAAA,OAAO,EAAE,KAAKjF,MAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,CADJ,CAvBJ,EA4BK,KAAKC,KAAL,CAAW+B,aAAX,CAAyBxB,MAAzB,GAAkC,CAAlC,GACI;AAAK,MAAA,KAAK,EAAE;AAAE0E,QAAAA,SAAS,EAAE;AAAb,OAAZ;AAAmC,MAAA,SAAS,EAAC,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAO,MAAA,SAAS,EAAC,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAE,QAAb;AAAuBC,QAAAA,UAAU,EAAE;AAAnC,OAAX;AAAwD,MAAA,KAAK,EAAC,KAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoE;AAAG,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAV;AAA8B,MAAA,SAAS,EAAC,qBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAApE,SADJ,EAEI;AAAI,MAAA,KAAK,EAAE;AAAEF,QAAAA,SAAS,EAAE,QAAb;AAAuBC,QAAAA,UAAU,EAAE;AAAnC,OAAX;AAAwD,MAAA,KAAK,EAAC,KAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoE;AAAG,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAV;AAA8B,MAAA,SAAS,EAAC,uBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAApE,2BAFJ,CADJ,CADJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKpF,KAAL,CAAW+B,aAAX,CAAyBsD,GAAzB,CAA6B,CAACnC,EAAD,EAAKd,KAAL,KAC1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,KAAK,EAAE;AAAE8C,QAAAA,SAAS,EAAE;AAAb,OAAX;AAAoC,MAAA,SAAS,EAAC,UAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKhC,EAAE,CAACoC,IADR,CADJ,EAII;AAAI,MAAA,KAAK,EAAE;AAAEJ,QAAAA,SAAS,EAAE;AAAb,OAAX;AAAoC,MAAA,SAAS,EAAC,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,SAAS,EAAC,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,KAAK,EAAE;AAAEA,QAAAA,SAAS,EAAE;AAAb,OAAX;AAAoC,MAAA,KAAK,EAAC,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,EAEI;AAAI,MAAA,KAAK,EAAE;AAAEA,QAAAA,SAAS,EAAE;AAAb,OAAX;AAAoC,MAAA,KAAK,EAAC,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAGI;AAAI,MAAA,KAAK,EAAE;AAAEA,QAAAA,SAAS,EAAE;AAAb,OAAX;AAAoC,MAAA,KAAK,EAAC,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,CADJ,CADJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKlF,KAAL,CAAW+B,aAAX,CAAyBK,KAAzB,EAAgCI,SAAhC,CAA0C6C,GAA1C,CAA8C,CAACnC,EAAD,EAAKb,MAAL,KAC3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,UAAd;AAAyB,MAAA,KAAK,EAAE;AAAE6C,QAAAA,SAAS,EAAE;AAAb,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,MAAD;AACI,MAAA,KAAK,EAAEhC,EAAE,CAACZ,aADd;AAEI,MAAA,WAAW,EAAE,IAFjB;AAGI,MAAA,YAAY,EAAE,IAHlB;AAII,MAAA,QAAQ,EAAGiD,CAAD,IAAO,KAAKrD,gBAAL,CAAsBqD,CAAtB,EAAyBnD,KAAzB,EAAgCC,MAAhC,CAJrB;AAKI,MAAA,OAAO,EAAE,KAAKrC,KAAL,CAAW4D,cALxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CADJ,EAYI;AAAI,MAAA,SAAS,EAAC,UAAd;AAAyB,MAAA,KAAK,EAAE;AAAEsB,QAAAA,SAAS,EAAE;AAAb,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,MAAD;AACI,MAAA,KAAK,EAAEhC,EAAE,CAACJ,OADd;AAEI,MAAA,OAAO,EAAE,IAFb;AAGI,MAAA,WAAW,EAAE,IAHjB;AAII,MAAA,YAAY,EAAE,IAJlB;AAKI,MAAA,QAAQ,EAAGyC,CAAD,IAAO,KAAK3C,UAAL,CAAgB2C,CAAhB,EAAmBnD,KAAnB,EAA0BC,MAA1B,CALrB;AAMI,MAAA,OAAO,EAAE,KAAKrC,KAAL,CAAW2C,QANxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CAZJ,EAwBI;AAAI,MAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,KAAK,EAAE;AAAEoC,QAAAA,eAAe,EAAE,SAAnB;AAA8BD,QAAAA,YAAY,EAAE;AAA5C,OAAf;AAAoE,MAAA,OAAO,EAAE,MAAM,KAAKzB,WAAL,CAAiBjB,KAAjB,EAAwBC,MAAxB,CAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoH;AAAG,MAAA,KAAK,EAAE;AAAEmD,QAAAA,KAAK,EAAE;AAAT,OAAV;AAA8B,MAAA,SAAS,EAAC,kBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAApH,CADJ,CAxBJ,CADH,CADL,CARJ,CADJ,CADJ,WA6CA;AAAG,MAAA,OAAO,EAAE,MAAM,KAAKzC,aAAL,CAAmBX,KAAnB,CAAlB;AAA6C,MAAA,SAAS,EAAC,oBAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7CA,CAJJ,CADH,CADL,CAPJ,CADH,EAiEG;AAAK,MAAA,KAAK,EAAE;AAAEwC,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,cAAc,EAAE,QAAnC;AAA6CY,QAAAA,YAAY,EAAE;AAA3D,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,KAAK,EAAE;AAAEX,QAAAA,YAAY,EAAE;AAAhB,OAAf;AAAwC,MAAA,IAAI,EAAC,QAA7C;AAAsD,MAAA,SAAS,EAAC,iBAAhE;AAAkF,MAAA,OAAO,EAAE,KAAKrB,KAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,CAjEH,CADJ,GAsEI,IAlGT,CADJ,EAqGI,oBAAC,KAAD;AAAO,MAAA,MAAM,EAAE,KAAKzD,KAAL,CAAW6D,KAA1B;AAAiC,MAAA,MAAM,EAAE,KAAK6B,oBAA9C;AAAoE,MAAA,SAAS,EAAE,KAAKlG,KAAL,CAAWmG,SAA1F;AAAqG,MAAA,IAAI,EAAE,KAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,WAAD;AAAa,MAAA,MAAM,EAAE,KAAKD,oBAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAiD;AAAK,MAAA,KAAK,EAAE;AAAEd,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,cAAc,EAAE,QAAnC;AAA6Ce,QAAAA,KAAK,EAAE;AAApD,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2E;AAAK,MAAA,KAAK,EAAC,KAAX;AAAiB,MAAA,GAAG,EAAC,0BAArB;AAAgD,MAAA,GAAG,EAAC,IAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA3E,CAAjD,CADJ,EAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE,wBAAd;AAAwCC,QAAAA,QAAQ,EAAE,MAAlD;AAA0DC,QAAAA,UAAU,EAAE,KAAtE;AAA6EC,QAAAA,UAAU,EAAE;AAAzF,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAEpB,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,cAAc,EAAE;AAAnC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEADJ,CADJ,EAII;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,KAAK,EAAE;AAAED,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,cAAc,EAAE,cAAnC;AAAmDY,QAAAA,YAAY,EAAE;AAAjE,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK;AAAQ,MAAA,OAAO,EAAE,MAAM,KAAKQ,iBAAL,EAAvB;AAAiD,MAAA,KAAK,EAAE;AAAElB,QAAAA,eAAe,EAAE,SAAnB;AAA8BD,QAAAA,YAAY,EAAE,KAA5C;AAAmDU,QAAAA,KAAK,EAAE;AAA1D,OAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6H;AAAG,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAAV;AAA8B,MAAA,SAAS,EAAC,kBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA7H,QAAL,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK;AAAQ,MAAA,OAAO,EAAE,MAAM,KAAKE,oBAAL,EAAvB;AAAoD,MAAA,KAAK,EAAE;AAAEX,QAAAA,eAAe,EAAE,SAAnB;AAA8BD,QAAAA,YAAY,EAAE,KAA5C;AAAmDU,QAAAA,KAAK,EAAE;AAA1D,OAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgI;AAAG,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAAV;AAA8B,MAAA,SAAS,EAAC,oBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAhI,QAAL,CAFJ,CAJJ,CADJ,CAFJ,CArGJ,CADJ,CARJ,EA8HI,oBAAC,cAAD;AAAgB,MAAA,UAAU,EAAE1G,IAA5B;AAAkC,MAAA,oBAAoB,MAAtD;AAAuD,MAAA,WAAW,EAAE,GAApE;AAAyE,MAAA,QAAQ,EAAEH,KAAK,CAACuH,QAAN,CAAeC,SAAlG;AAA6G,MAAA,SAAS,EAAE,IAAxH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9HJ,CADJ,CADJ;AAoIH;;AAlT4B;;AAqTjC,eAAe7H,UAAU,CAACgB,QAAD,CAAzB","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Slide, Zoom, Flip, Bounce } from 'react-toastify';\r\nimport Select from 'react-select';\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\n\r\nclass Planning extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            marchandiseurs: [],\r\n            selectedMarchandiseur: '',\r\n            dateDebut: '',\r\n            dateFin: '',\r\n            magasins: [],\r\n            modal: false,\r\n            arrayMarchMag: [],\r\n            arrayIdLigneMarchSupp: [],\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (JSON.parse((localStorage.getItem('userPermissions'))) != null) {\r\n            axios.get(process.env.REACT_APP_API_URL + 'Back_magasin/SelectMarchandiseurs.php').then(res => {\r\n                this.setState({\r\n                    marchandiseurs: res.data\r\n                })\r\n            })\r\n        }\r\n        else {\r\n            document.location = '/'\r\n        }\r\n    }\r\n\r\n    addDateDebut = d => {\r\n        this.setState({\r\n            dateDebut: d\r\n        });\r\n    };\r\n\r\n    addDateFin = d => {\r\n        this.setState({\r\n            dateFin: d\r\n        });\r\n    };\r\n\r\n    planif = () => {\r\n        if (this.state.dateDebut != \"\" && this.state.dateFin != \"\") {\r\n            // date debut\r\n            var dateDebut = this.state.dateDebut\r\n            let monthOne = '' + (dateDebut.getMonth() + 1);\r\n            let dayOne = '' + dateDebut.getDate();\r\n            let yearOne = dateDebut.getFullYear();\r\n            if (monthOne.length < 2)\r\n                monthOne = '0' + monthOne;\r\n            if (dayOne.length < 2)\r\n                dayOne = '0' + dayOne;\r\n            // date fin\r\n            var convertDateDebut = [yearOne, monthOne, dayOne].join('-');\r\n            var dateFin = this.state.dateFin\r\n            let monthTwo = '' + (dateFin.getMonth() + 1);\r\n            let dayTwo = '' + dateFin.getDate();\r\n            let yearTwo = dateFin.getFullYear();\r\n            if (monthTwo.length < 2)\r\n                monthTwo = '0' + monthTwo;\r\n            if (dayTwo.length < 2)\r\n                dayTwo = '0' + dayTwo;\r\n            var convertDateFin = [yearTwo, monthTwo, dayTwo].join('-');\r\n            // Différence entre 2 dates\r\n            var date1 = new Date(convertDateDebut);\r\n            var date2 = new Date(convertDateFin);\r\n            var time_diff = date2.getTime() - date1.getTime();\r\n            var days_Diff = time_diff / (1000 * 3600 * 24);\r\n            if (days_Diff <= 7) {\r\n                jQuery.ajax({\r\n                    url: process.env.REACT_APP_API_URL + 'Back_magasin/Planning.php',\r\n                    type: 'POST',\r\n                    data: {\r\n                        dateDebut: convertDateDebut,\r\n                        dateFin: convertDateFin\r\n                    },\r\n                    dataType: 'json',\r\n                    success: (code_html, statut) => {\r\n                        this.setState({\r\n                            arrayMarchMag: code_html\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                toast.error(\"⛔ Veuillez choisir une periode inférieur ou egale a une semaine !!\", { containerId: 'A' });\r\n            }\r\n        }\r\n        else {\r\n            toast.error('⛔ Veuillez Verifier choisir une date debut et fin !!', { containerId: 'A' });\r\n        }\r\n    }\r\n\r\n    addMarchandiseur = (selectedMarchandiseur, index, indice) => {\r\n        if (selectedMarchandiseur != null) {\r\n            var marchandiseur = selectedMarchandiseur;\r\n            var arrayChange = this.state.arrayMarchMag\r\n            arrayChange[index].ligneData[indice].marchandiseur = marchandiseur\r\n            this.setState({\r\n                arrayMarchMag: arrayChange\r\n            }, () => {\r\n                jQuery.ajax({\r\n                    url: process.env.REACT_APP_API_URL + 'Back_magasin/SelectMagasinsByMarch.php',\r\n                    type: 'POST',\r\n                    data: {\r\n                        marchandiseurId: selectedMarchandiseur.value\r\n                    },\r\n                    dataType: 'json',\r\n                    success: (code_html, statut) => {\r\n                        this.setState({\r\n                            magasins: code_html\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            this.setState({\r\n                magasins: []\r\n            });\r\n        }\r\n    }\r\n\r\n    addMagasin = (selectedMagasin, index, indice) => {\r\n        var magasin = selectedMagasin;\r\n        var arrayChange = this.state.arrayMarchMag\r\n        arrayChange[index].ligneData[indice].magasin = magasin\r\n        this.setState({\r\n            arrayMarchMag: arrayChange\r\n        });\r\n    }\r\n\r\n    additionLigne = (index) => {\r\n        var allArray = this.state.arrayMarchMag\r\n        var arrayIndex = this.state.arrayMarchMag[index].ligneData\r\n        var el = { marchandiseur: '', magasin: '', tousIdPlanif: [] }\r\n        arrayIndex.push(el)\r\n        allArray[index].ligneData = arrayIndex\r\n        this.setState({\r\n            arrayMarchMag: allArray\r\n        });\r\n    }\r\n\r\n    deleteLigne = (index, indice) => {\r\n        var arrayMarchMag = this.state.arrayMarchMag\r\n        var supLigne = arrayMarchMag[index].ligneData.splice(indice, 1)\r\n        this.setState({\r\n            arrayMarchMag: arrayMarchMag,\r\n            arrayIdLigneMarchSupp: [...this.state.arrayIdLigneMarchSupp, supLigne]\r\n        });\r\n    }\r\n\r\n    ajout = () => {\r\n        // jQuery.ajax({\r\n        //     url: process.env.REACT_APP_API_URL + 'Back_magasin/AddPlanning.php',\r\n        //     type: 'POST',\r\n        //     data: {\r\n        //         arrayMarchMag: this.state.arrayMarchMag,\r\n        //         arrayIdLigneMarchSupp: this.state.arrayIdLigneMarchSupp\r\n        //     },\r\n        //     dataType: 'json',\r\n        //     success: (code_html, statut) => {\r\n        //         if (code_html.Result == \"OK\") {\r\n        //             this.props.history.push('/Menu');\r\n        //         }\r\n        //         else if (code_html.Result == \"KO\") {\r\n        //             alert(\"erreur,l'un de vos champs est vide!!\");\r\n        //         }\r\n        //     }\r\n        // });\r\n        console.log(this.state.arrayMarchMag)\r\n        console.log(this.state.arrayIdLigneMarchSupp)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px', marginLeft: '0px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Planning</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-12\">\r\n                            <div className=\"white-box\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Date debut</label>\r\n                                            <DatePicker class=\"form-control ddate\" style={{ border: 'none' }}\r\n                                                selected={this.state.dateDebut}\r\n                                                onChange={this.addDateDebut}\r\n                                                dateFormat=\"dd/MM/yyy\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Date fin</label>\r\n                                            <DatePicker class=\"form-control ddate\" style={{ border: 'none' }}\r\n                                                selected={this.state.dateFin}\r\n                                                onChange={this.addDateFin}\r\n                                                dateFormat=\"dd/MM/yyy\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                    <div>\r\n                                        <button style={{ borderRadius: '5px', backgroundColor: '#761C19', borderColor: '#761C19' }} type=\"button\" className=\"btn btn-success\" onClick={this.planif}>Planifier</button>\r\n                                    </div>\r\n                                </div>\r\n                                {this.state.arrayMarchMag.length > 0 ?\r\n                                    (<div style={{ marginTop: '10px' }} className=\"row\">\r\n                                        <table className=\"table table-bordered\">\r\n                                            <thead >\r\n                                                <tr>\r\n                                                    <th style={{ textAlign: 'center', fontWeight: 'bold' }} scope=\"col\"><i style={{ padding: '5px' }} className=\"fas fa-calendar-day\"></i>Date</th>\r\n                                                    <th style={{ textAlign: 'center', fontWeight: 'bold' }} scope=\"col\"><i style={{ padding: '5px' }} className=\"fas fa-map-marked-alt\"></i>Marchandiseur-Magasins</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                {this.state.arrayMarchMag.map((el, index) =>\r\n                                                    <tr>\r\n                                                        <td style={{ textAlign: 'center' }} className=\"col-md-2\">\r\n                                                            {el.date}\r\n                                                        </td>\r\n                                                        <td style={{ textAlign: 'center' }} className=\"col-md-10\">\r\n                                                            <div>\r\n                                                                <table className=\"table table-bordered\">\r\n                                                                    <thead>\r\n                                                                        <tr>\r\n                                                                            <th style={{ textAlign: 'center' }} scope=\"col\">Marchandiseur</th>\r\n                                                                            <th style={{ textAlign: 'center' }} scope=\"col\">Magasins</th>\r\n                                                                            <th style={{ textAlign: 'center' }} scope=\"col\">Supp</th>\r\n                                                                        </tr>\r\n                                                                    </thead>\r\n                                                                    <tbody>\r\n                                                                        {this.state.arrayMarchMag[index].ligneData.map((el, indice) =>\r\n                                                                            <tr>\r\n                                                                                <td className=\"col-md-5\" style={{ textAlign: 'center' }}>\r\n                                                                                    <div>\r\n                                                                                        <Select\r\n                                                                                            value={el.marchandiseur}\r\n                                                                                            isClearable={true}\r\n                                                                                            isSearchable={true}\r\n                                                                                            onChange={(e) => this.addMarchandiseur(e, index, indice)}\r\n                                                                                            options={this.state.marchandiseurs}\r\n                                                                                        />\r\n                                                                                    </div>\r\n                                                                                </td>\r\n                                                                                <td className=\"col-md-5\" style={{ textAlign: 'center' }}>\r\n                                                                                    <div>\r\n                                                                                        <Select\r\n                                                                                            value={el.magasin}\r\n                                                                                            isMulti={true}\r\n                                                                                            isClearable={true}\r\n                                                                                            isSearchable={true}\r\n                                                                                            onChange={(e) => this.addMagasin(e, index, indice)}\r\n                                                                                            options={this.state.magasins}\r\n                                                                                        />\r\n                                                                                    </div>\r\n                                                                                </td>\r\n                                                                                <td className=\"col-md-2\">\r\n                                                                                    <button style={{ backgroundColor: '#D9534F', borderRadius: '5px' }} onClick={() => this.deleteLigne(index, indice)}><i style={{ color: 'white' }} className=\"fas fa-trash-alt\"></i></button>\r\n                                                                                </td>\r\n                                                                            </tr>\r\n                                                                        )}\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                        Ajout\r\n                                                        <i onClick={() => this.additionLigne(index)} className=\"fas fa-plus-circle\"></i>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                )}\r\n                                            </tbody>\r\n                                        </table>\r\n                                        <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px' }}>\r\n                                            <button style={{ borderRadius: '5px' }} type=\"button\" className=\"btn btn-success\" onClick={this.ajout}>Confirmer</button>\r\n                                        </div>\r\n                                    </div>) :\r\n                                    (null)}\r\n                            </div>\r\n                            <Modal isOpen={this.state.modal} toggle={this.nonDeleteLignEnseign} className={this.props.className} fade={false}>\r\n                                <ModalHeader toggle={this.nonDeleteLignEnseign}> <div style={{ display: 'flex', justifyContent: 'center', width: '465px' }}><img width='30%' src=\"./images/deleteModal.png\" alt=\"..\" /></div></ModalHeader>\r\n                                <ModalBody>\r\n                                    <div style={{ fontFamily: 'Montserrat, sans-serif', FontSize: '14px', FontWeight: '700', LineHeight: '18.375px' }}>\r\n                                        <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                            <p>Êtes-Vous sûr de vouloir supprimer cette ligne ?</p>\r\n                                        </div>\r\n                                        <div className='hvr-push' style={{ display: 'flex', justifyContent: 'space-around', marginBottom: '15px' }}>\r\n                                            <div><button onClick={() => this.deleteLignEnseign()} style={{ backgroundColor: '#00FF7F', borderRadius: '5px', color: 'white' }}><i style={{ color: 'white' }} className=\"far fa-thumbs-up\"></i>Oui</button></div>\r\n                                            <div><button onClick={() => this.nonDeleteLignEnseign()} style={{ backgroundColor: '#D9534F', borderRadius: '5px', color: 'white' }}><i style={{ color: 'white' }} className=\"far fa-thumbs-down\"></i>Non</button></div>\r\n                                        </div>\r\n                                    </div>\r\n                                </ModalBody>\r\n                            </Modal>\r\n                        </div>\r\n                    </div>\r\n                    <ToastContainer transition={Flip} enableMultiContainer containerId={'A'} position={toast.POSITION.TOP_RIGHT} autoClose={2500} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(Planning);"]},"metadata":{},"sourceType":"module"}