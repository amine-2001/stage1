{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp\\\\www\\\\Projet_snaii_DEV\\\\snaii\\\\src\\\\StatDemandesTravailleurs.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport jQuery from 'jquery';\nimport ReactApexChart from 'react-apexcharts';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Select from 'react-select';\nimport './paginate.css';\n\nclass StatDemandesTravailleurs extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleStart = d => {\n      this.setState({\n        startDate: d\n      });\n    };\n\n    this.handleEnd = d => {\n      this.setState({\n        endDate: d\n      });\n    };\n\n    this.choixService = services => {\n      this.setState({\n        services\n      });\n      console.log(`service selected:`, services);\n    };\n\n    this.state = {\n      series: [{\n        name: 'Nombre de demande valider',\n        data: []\n      }, {\n        name: 'Nombre de demande cloturer',\n        data: []\n      }],\n      options: {\n        chart: {\n          type: 'bar',\n          height: 350,\n          stacked: true,\n          toolbar: {\n            show: true\n          },\n          zoom: {\n            enabled: true\n          }\n        },\n        responsive: [{\n          breakpoint: 480,\n          options: {\n            legend: {\n              position: 'bottom',\n              offsetX: -10,\n              offsetY: 0\n            }\n          }\n        }],\n        plotOptions: {\n          bar: {\n            horizontal: false\n          }\n        },\n        xaxis: {\n          type: 'text',\n          categories: []\n        },\n        legend: {\n          position: 'right',\n          offsetY: 40\n        },\n        fill: {\n          opacity: 1\n        }\n      },\n      services: '',\n      startDate: new Date(),\n      endDate: new Date()\n    };\n    this.ajout = this.ajout.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get(process.env.REACT_APP_API_URL + 'Back_snaii/TousServices.php').then(res => {\n      console.log(res);\n      this.setState({\n        services: res.data\n      });\n    });\n  }\n\n  ajout() {\n    const offset = this.state.startDate.getTimezoneOffset();\n    var yourDate = new Date(this.state.startDate.getTime() + offset * 60 * 1000);\n    var startDate = yourDate.toISOString().split('T')[0];\n    console.log(startDate); /////////////////////\n\n    const offseet = this.state.endDate.getTimezoneOffset();\n    var yourDatee = new Date(this.state.endDate.getTime() + offseet * 60 * 1000);\n    var endDate = yourDatee.toISOString().split('T')[0];\n    console.log(endDate); /////////////////////\n\n    console.log(this.state.services.value); /////////////////////\n\n    jQuery.ajax({\n      url: process.env.REACT_APP_API_URL + 'Back_snaii/StatTravailleursDemandes.php',\n      type: 'POST',\n      data: {\n        startDate: startDate,\n        endDate: endDate,\n        idService: this.state.services.value\n      },\n      dataType: 'json',\n      success: function (code_html, statut) {\n        console.log(code_html);\n        this.setState({\n          options: { ...this.state.options,\n            xaxis: { ...this.state.options.xaxis,\n              categories: code_html[0]\n            }\n          }\n        });\n        var newSerieTravailleursParDemandeValider = [];\n        let nombreDeTravailleursParDemandeValider = code_html[1];\n        newSerieTravailleursParDemandeValider.push({\n          data: nombreDeTravailleursParDemandeValider,\n          name: 'Nombre de demande valider'\n        });\n        var newSerieTravailleursParDemandeCloturer = [];\n        let nombreDeTravailleursParDemandeCloturer = code_html[2];\n        newSerieTravailleursParDemandeCloturer.push({\n          data: nombreDeTravailleursParDemandeCloturer,\n          name: 'Nombre de demande cloturer'\n        });\n        let tous = [];\n        let demandes = tous.concat(newSerieTravailleursParDemandeValider, newSerieTravailleursParDemandeCloturer);\n        console.log(demandes);\n        this.setState({\n          series: demandes\n        });\n      }.bind(this)\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"page-wrapper\",\n      style: {\n        minHeight: '263px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row bg-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Statistique travailleurs par demande\"))), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"white-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Choix de la date\"), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        marginRight: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Date debut\"), React.createElement(DatePicker, {\n      class: \"form-control ddate\",\n      style: {\n        border: 'none'\n      },\n      selected: this.state.startDate,\n      onChange: this.handleStart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        marginRight: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Date fin\"), React.createElement(DatePicker, {\n      class: \"form-control ddate\",\n      style: {\n        border: 'none'\n      },\n      selected: this.state.endDate,\n      onChange: this.handleEnd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    })))), React.createElement(\"p\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Choix du service\"), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        marginRight: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Services\"), React.createElement(Select, {\n      className: 'reactSelect',\n      isClearable: true,\n      isSearchable: true,\n      onChange: this.choixService,\n      options: this.state.services,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: '10px',\n        marginBottom: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        width: '15%',\n        borderRadius: '5px'\n      },\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.ajout.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Confirmer\")), this.state.series[0].data != '' ? React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"chart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(ReactApexChart, {\n      options: this.state.options,\n      series: this.state.series,\n      type: \"bar\",\n      width: 700,\n      height: 450,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    })))) : null)))));\n  }\n\n}\n\nexport default StatDemandesTravailleurs;","map":{"version":3,"sources":["C:/wamp/www/Projet_snaii_DEV/snaii/src/StatDemandesTravailleurs.js"],"names":["React","Component","axios","jQuery","ReactApexChart","DatePicker","Select","StatDemandesTravailleurs","constructor","props","handleStart","d","setState","startDate","handleEnd","endDate","choixService","services","console","log","state","series","name","data","options","chart","type","height","stacked","toolbar","show","zoom","enabled","responsive","breakpoint","legend","position","offsetX","offsetY","plotOptions","bar","horizontal","xaxis","categories","fill","opacity","Date","ajout","bind","componentDidMount","get","process","env","REACT_APP_API_URL","then","res","offset","getTimezoneOffset","yourDate","getTime","toISOString","split","offseet","yourDatee","value","ajax","url","idService","dataType","success","code_html","statut","newSerieTravailleursParDemandeValider","nombreDeTravailleursParDemandeValider","push","newSerieTravailleursParDemandeCloturer","nombreDeTravailleursParDemandeCloturer","tous","demandes","concat","render","minHeight","fontWeight","display","justifyContent","marginRight","border","alignItems","marginTop","marginBottom","width","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\nimport ReactApexChart from 'react-apexcharts'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport Select from 'react-select';\r\nimport './paginate.css'\r\n\r\nclass StatDemandesTravailleurs extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            series: [{\r\n                name: 'Nombre de demande valider',\r\n                data: []\r\n            },\r\n            {\r\n                name: 'Nombre de demande cloturer',\r\n                data: []\r\n            }],\r\n            options: {\r\n                chart: {\r\n                    type: 'bar',\r\n                    height: 350,\r\n                    stacked: true,\r\n                    toolbar: {\r\n                        show: true\r\n                    },\r\n                    zoom: {\r\n                        enabled: true\r\n                    }\r\n                },\r\n                responsive: [{\r\n                    breakpoint: 480,\r\n                    options: {\r\n                        legend: {\r\n                            position: 'bottom',\r\n                            offsetX: -10,\r\n                            offsetY: 0\r\n                        }\r\n                    }\r\n                }],\r\n                plotOptions: {\r\n                    bar: {\r\n                        horizontal: false,\r\n                    },\r\n                },\r\n                xaxis: {\r\n                    type: 'text',\r\n                    categories: []\r\n                },\r\n                legend: {\r\n                    position: 'right',\r\n                    offsetY: 40\r\n                },\r\n                fill: {\r\n                    opacity: 1\r\n                }\r\n            },\r\n            services: '',\r\n            startDate: new Date(),\r\n            endDate: new Date()\r\n        };\r\n        this.ajout = this.ajout.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(process.env.REACT_APP_API_URL + 'Back_snaii/TousServices.php').then(res => {\r\n            console.log(res)\r\n            this.setState({\r\n                services: res.data\r\n            })\r\n        })\r\n    }\r\n\r\n    handleStart = d => {\r\n        this.setState({\r\n            startDate: d\r\n        });\r\n    };\r\n\r\n    handleEnd = d => {\r\n        this.setState({\r\n            endDate: d\r\n        });\r\n    };\r\n\r\n    choixService = services => {\r\n        this.setState({ services });\r\n        console.log(`service selected:`, services);\r\n    };\r\n\r\n    ajout() {\r\n        const offset = this.state.startDate.getTimezoneOffset();\r\n        var yourDate = new Date(this.state.startDate.getTime() + (offset * 60 * 1000));\r\n        var startDate = yourDate.toISOString().split('T')[0];\r\n        console.log(startDate)\r\n        /////////////////////\r\n        const offseet = this.state.endDate.getTimezoneOffset();\r\n        var yourDatee = new Date(this.state.endDate.getTime() + (offseet * 60 * 1000));\r\n        var endDate = yourDatee.toISOString().split('T')[0];\r\n        console.log(endDate)\r\n        /////////////////////\r\n        console.log(this.state.services.value)\r\n        /////////////////////\r\n        jQuery.ajax({\r\n            url: process.env.REACT_APP_API_URL + 'Back_snaii/StatTravailleursDemandes.php',\r\n            type: 'POST',\r\n            data: {\r\n                startDate: startDate,\r\n                endDate: endDate,\r\n                idService: this.state.services.value\r\n            },\r\n            dataType: 'json',\r\n            success: function (code_html, statut) {\r\n                console.log(code_html)\r\n                this.setState({\r\n                    options: {\r\n                        ...this.state.options,\r\n                        xaxis: {\r\n                            ...this.state.options.xaxis,\r\n                            categories: code_html[0]\r\n                        }\r\n                    }\r\n                })\r\n                var newSerieTravailleursParDemandeValider = []\r\n                let nombreDeTravailleursParDemandeValider = code_html[1];\r\n                newSerieTravailleursParDemandeValider.push({ data: nombreDeTravailleursParDemandeValider, name: 'Nombre de demande valider' })\r\n                var newSerieTravailleursParDemandeCloturer = []\r\n                let nombreDeTravailleursParDemandeCloturer = code_html[2];\r\n                newSerieTravailleursParDemandeCloturer.push({ data: nombreDeTravailleursParDemandeCloturer, name: 'Nombre de demande cloturer' })\r\n                let tous = []\r\n                let demandes = tous.concat(newSerieTravailleursParDemandeValider, newSerieTravailleursParDemandeCloturer)\r\n                console.log(demandes)\r\n                this.setState({\r\n                    series: demandes\r\n                })\r\n            }.bind(this)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Statistique travailleurs par demande</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div class=\"row\">\r\n                        <div class=\"col-sm-12\">\r\n                            <div class=\"white-box\">\r\n                                <p style={{ fontWeight: 'bold' }}>Choix de la date</p>\r\n                                <div style={{ display: 'flex', justifyContent: 'center' }} class=\"row\">\r\n                                    <div class=\"col-md-3\">\r\n                                        <div class=\"form-group\">\r\n                                            <label style={{ marginRight: '5px' }}>Date debut</label>\r\n                                            <DatePicker class=\"form-control ddate\" style={{ border: 'none' }}\r\n                                                selected={this.state.startDate}\r\n                                                onChange={this.handleStart}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"col-md-3\">\r\n                                        <div class=\"form-group\">\r\n                                            <label style={{ marginRight: '5px' }}>Date fin</label>\r\n                                            <DatePicker class=\"form-control ddate\" style={{ border: 'none' }}\r\n                                                selected={this.state.endDate}\r\n                                                onChange={this.handleEnd}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <p style={{ fontWeight: 'bold' }}>Choix du service</p>\r\n                                <div style={{ display: 'flex', justifyContent: 'center' }} class=\"row\">\r\n                                    <div class=\"col-md-3\">\r\n                                        <div class=\"form-group\">\r\n                                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                                                <label style={{ marginRight: '5px' }}>Services</label>\r\n                                                <Select\r\n                                                    className={'reactSelect'}\r\n                                                    isClearable={true}\r\n                                                    isSearchable={true}\r\n                                                    onChange={this.choixService}\r\n                                                    options={this.state.services}\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ display: 'flex', justifyContent: 'center', marginTop: '10px', marginBottom: '10px' }}>\r\n                                    <button style={{ width: '15%', borderRadius: '5px' }} type=\"button\" className=\"btn btn-success\" onClick={this.ajout.bind(this)}>Confirmer</button>\r\n                                </div>\r\n                                {this.state.series[0].data != '' ?\r\n                                    (<div class=\"row\">\r\n                                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                                            <div id=\"chart\">\r\n                                                <ReactApexChart options={this.state.options} series={this.state.series} type=\"bar\" width={700} height={450} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>) : (null)}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default StatDemandesTravailleurs;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}