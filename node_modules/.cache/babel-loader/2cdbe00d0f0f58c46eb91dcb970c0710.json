{"ast":null,"code":"import _toConsumableArray from\"C:\\\\wamp\\\\www\\\\savoir_plus_dev_nv\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\wamp\\\\www\\\\savoir_plus_dev_nv\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\wamp\\\\www\\\\savoir_plus_dev_nv\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\wamp\\\\www\\\\savoir_plus_dev_nv\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\wamp\\\\www\\\\savoir_plus_dev_nv\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\wamp\\\\www\\\\savoir_plus_dev_nv\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import jQuery from'jquery';import{Link,BrowserRouter as Router,Route,Switch,withRouter,HashRouter,Redirect}from'react-router-dom';import Select from'react-select';import{Button,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Slide,Zoom,Flip,Bounce}from'react-toastify';var AjoutNiveau=/*#__PURE__*/function(_Component){_inherits(AjoutNiveau,_Component);function AjoutNiveau(props){var _this;_classCallCheck(this,AjoutNiveau);_this=_possibleConstructorReturn(this,_getPrototypeOf(AjoutNiveau).call(this,props));_this.addFormation=function(selectedFormation){_this.setState({selectedFormation:selectedFormation});console.log(\"Formation selected:\",selectedFormation);};_this.addNomNiveau=function(event){_this.setState({nomNiveau:event.target.value});};_this.addDebutPeriode=function(event){_this.setState({periodeNiv:event.target.value});};_this.addFinPeriode=function(event){_this.setState({periodeNiv:event.target.value});};_this.addPeriodeNiveau=function(event){_this.setState({periodeNiv:event.target.value});};_this.addMntInitial=function(event){_this.setState({mntInitial:event.target.value},function(){var stateCopy=_this.state.tabChoix;for(var i=0;i<_this.state.tabChoix.length;i++){var sousTabChoix=_this.state.tabChoix[i];for(var j=0;j<sousTabChoix.length;j++){if(sousTabChoix[j].choixPay==\"Annuel\"){stateCopy[i][0].caze[0]=_this.state.mntInitial;}else if(sousTabChoix[j].choixPay==\"Montant réduction\"&&stateCopy[i][0].caze[0]>0){var pRed=stateCopy[i][0].caze[0];stateCopy[i][1].caze[1]=_this.state.mntInitial-_this.state.mntInitial/pRed;}else if(sousTabChoix[j].choixPay==\"Montant mensuel\"&&stateCopy[i][0].caze[0]>0){var nbMois=stateCopy[i][0].caze[0];stateCopy[i][1].caze[1]=_this.state.mntInitial/nbMois;}else if(sousTabChoix[j].choixPay==\"Montant mensuel avec réduction\"&&stateCopy[i][0].caze[0]>0&&stateCopy[i][1].caze[1]){var nbMoisRed=stateCopy[i][0].caze[0];var pMoisRed=stateCopy[i][1].caze[1];var mntIni=parseInt(_this.state.mntInitial);stateCopy[i][2].caze[2]=(mntIni-mntIni*pMoisRed/100)/nbMoisRed;}else if(sousTabChoix[j].choixPay==\"Montant mensuel avec réduction(++)\"&&stateCopy[i][0].caze[0]>0&&stateCopy[i][1].caze[1]){var nbMoisRed=stateCopy[i][0].caze[0];var pMoisRed=stateCopy[i][1].caze[1];var mntIni=parseInt(_this.state.mntInitial);stateCopy[i][2].caze[2]=(mntIni-mntIni*pMoisRed/100)/nbMoisRed;}}}_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);});});};_this.additionLignFormation=function(){var element={typePayEleve:'',annuelle:[],reduction:[],mensuel:[],tranches2:[],tranches3:[],mensuelRed:[]};_this.setState({niveaux:[].concat(_toConsumableArray(_this.state.niveaux),[element])});};_this.addTypePayEleve=function(selectedTypePayEleve,indexTypePayEleve){if(selectedTypePayEleve!=null){var typePayEleve=selectedTypePayEleve;_this.setState({selectedTypePayEleve:selectedTypePayEleve,niveaux:_this.state.niveaux.map(function(el,id){return id===indexTypePayEleve?Object.assign(el,{typePayEleve:typePayEleve}):el;})},function(){axios.get(process.env.REACT_APP_API_URL+'Back_mediatraining/GetChoixModePay.php?id='+selectedTypePayEleve.value).then(function(res){console.log(res);if(res.data.length===1){var stateCopy=_this.state.tabChoix;stateCopy[indexTypePayEleve]=res.data;_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);var posAnnee=document.getElementsByClassName('posAnnee');console.log(posAnnee.length-1);var indexAnnuel=posAnnee.length-1;var mntInitial=_this.state.mntInitial;var stateCopy=_this.state.tabChoix;stateCopy[indexAnnuel][0].caze[0]=mntInitial;_this.setState({tabChoix:stateCopy});});}else if(res.data.length>0){var stateCopy=_this.state.tabChoix;stateCopy[indexTypePayEleve]=res.data;_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);});}else{var stateCopy=_this.state.tabChoix;stateCopy[indexTypePayEleve]=null;_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);});}});});}};_this.add=function(event,indexLignTab,indice,nomChoix){var include=_this.state.tabChoix[indexLignTab][indice].idSousTypePayEleve;console.log(include);if(include!=undefined){var mntTranche=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=mntTranche;_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);});}else{if(nomChoix==\"Nombre mois\"){var nbrMois=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=nbrMois;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var nombreMois=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&nombreMois>0){var mntInitiale=parseInt(_this.state.mntInitial);var _nbrMois=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale/_nbrMois;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice+1].caze[indice+1]=mntCalcul;_this.setState({tabChoix:stateCopy});}});}else if(nomChoix==\"Réduction %\"){var pourcentageRed=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=pourcentageRed;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var pourcentageReduction=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&pourcentageReduction>0){var mntInitiale=parseInt(_this.state.mntInitial);var _pourcentageRed=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale-mntInitiale*_pourcentageRed/100;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice+1].caze[indice+1]=mntCalcul;_this.setState({tabChoix:stateCopy});}});}else if(nomChoix==\"Nombre mois avec réduction\"){if(_this.state.tabChoix[indexLignTab][2].caze[2]==0){// montant vide\nvar nbrMoisRed=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=nbrMoisRed;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var nombreMoisRed=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&nombreMoisRed>0){var mntInitiale=parseInt(_this.state.mntInitial);var _nbrMoisRed=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale/_nbrMoisRed;var stateCopy=_this.state.tabChoix;// \nstateCopy[indexLignTab][2].caze[2]=mntCalcul;_this.setState({tabChoix:stateCopy});}});}else if(_this.state.tabChoix[indexLignTab][2].caze[2]>0){// montant non vide\nvar _nbrMoisRed2=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=_nbrMoisRed2;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var nombreMoisRed=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&nombreMoisRed>0){var mntInitiale=parseInt(_this.state.mntInitial);var _nbrMoisRed3=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale/_nbrMoisRed3;var stateCopy=_this.state.tabChoix;// Refaire l'opération de % reduction:\nvar pourcentageMensRed=parseInt(_this.state.tabChoix[indexLignTab][1].caze[1]);var mntCal=mntCalcul-mntCalcul*pourcentageMensRed/100;//\nstateCopy[indexLignTab][2].caze[2]=mntCal;_this.setState({tabChoix:stateCopy});}});}}else if(nomChoix==\"Réduction mensuelle %\"){if(_this.state.tabChoix[indexLignTab][2].caze[2]==0){// montant vide\nvar pourcentageMensRed=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=pourcentageMensRed;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var pourcentageMensReduction=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&pourcentageMensReduction>0){var mntInitiale=parseInt(_this.state.mntInitial);var _pourcentageMensRed=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale-mntInitiale*_pourcentageMensRed/100;var stateCopy=_this.state.tabChoix;//\nstateCopy[indexLignTab][2].caze[2]=mntCalcul;_this.setState({tabChoix:stateCopy});}});}else if(_this.state.tabChoix[indexLignTab][2].caze[2]>0){// montant non vide\nvar _pourcentageMensRed2=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=_pourcentageMensRed2;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var pourcentageMensReduction=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&pourcentageMensReduction>0){var mntInitiale=parseInt(_this.state.mntInitial);var _pourcentageMensRed3=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale-mntInitiale*_pourcentageMensRed3/100;var stateCopy=_this.state.tabChoix;// Refaire l'opération / par le nombre de mois : \nvar _nbrMoisRed4=parseInt(_this.state.tabChoix[indexLignTab][0].caze[0]);var mntCal=mntCalcul/_nbrMoisRed4;//\nstateCopy[indexLignTab][2].caze[2]=mntCal;_this.setState({tabChoix:stateCopy});}});}}else if(nomChoix==\"Nombre mois avec réduction(++)\"){if(_this.state.tabChoix[indexLignTab][2].caze[2]==0){// montant vide\nvar _nbrMoisRed5=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=_nbrMoisRed5;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var nombreMoisRed=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&nombreMoisRed>0){var mntInitiale=parseInt(_this.state.mntInitial);var _nbrMoisRed6=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale/_nbrMoisRed6;var stateCopy=_this.state.tabChoix;// \nstateCopy[indexLignTab][2].caze[2]=mntCalcul;_this.setState({tabChoix:stateCopy});}});}else if(_this.state.tabChoix[indexLignTab][2].caze[2]>0){// montant non vide\nvar _nbrMoisRed7=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=_nbrMoisRed7;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var nombreMoisRed=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&nombreMoisRed>0){var mntInitiale=parseInt(_this.state.mntInitial);var _nbrMoisRed8=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale/_nbrMoisRed8;var stateCopy=_this.state.tabChoix;// Refaire l'opération de % reduction:\nvar _pourcentageMensRed4=parseInt(_this.state.tabChoix[indexLignTab][1].caze[1]);var mntCal=mntCalcul-mntCalcul*_pourcentageMensRed4/100;//\nstateCopy[indexLignTab][2].caze[2]=mntCal;_this.setState({tabChoix:stateCopy});}});}}else if(nomChoix==\"Réduction mensuelle %(++)\"){if(_this.state.tabChoix[indexLignTab][2].caze[2]==0){// montant vide\nvar _pourcentageMensRed5=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=_pourcentageMensRed5;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var pourcentageMensReduction=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&pourcentageMensReduction>0){var mntInitiale=parseInt(_this.state.mntInitial);var _pourcentageMensRed6=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale-mntInitiale*_pourcentageMensRed6/100;var stateCopy=_this.state.tabChoix;//\nstateCopy[indexLignTab][2].caze[2]=mntCalcul;_this.setState({tabChoix:stateCopy});}});}else if(_this.state.tabChoix[indexLignTab][2].caze[2]>0){// montant non vide\nvar _pourcentageMensRed7=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=_pourcentageMensRed7;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var pourcentageMensReduction=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&pourcentageMensReduction>0){var mntInitiale=parseInt(_this.state.mntInitial);var _pourcentageMensRed8=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale-mntInitiale*_pourcentageMensRed8/100;var stateCopy=_this.state.tabChoix;// Refaire l'opération / par le nombre de mois : \nvar _nbrMoisRed9=parseInt(_this.state.tabChoix[indexLignTab][0].caze[0]);var mntCal=mntCalcul/_nbrMoisRed9;//\nstateCopy[indexLignTab][2].caze[2]=mntCal;_this.setState({tabChoix:stateCopy});}});}}}};_this.toggleLignFormation=function(indexLignFormation){_this.setState(function(prevState){return{modal:!prevState.modal,indexLignFormationASupprimer:indexLignFormation};});};_this.deleteLignFormation=function(){_this.state.niveaux.splice(_this.state.indexLignFormationASupprimer,1);_this.state.tabChoix.splice(_this.state.indexLignFormationASupprimer,1);_this.setState(function(prevState){return{modal:!prevState.modal};});};_this.nonDeleteLignFormation=function(){_this.setState(function(prevState){return{modal:!prevState.modal};});};_this.ajout=function(){if(_this.state.selectedFormation!=''){var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var userId=userPermissions[0].idUser;var anneeScolaire=userPermissions[0].anneeScolaire;// recuperer et ranger valeur tableau\nvar cazeTranche3={typePayEleve:'',tranche3:[{tranche:[],idSousTypePayEleve:[]}]};var cazeTranche2={typePayEleve:'',tranche2:[{tranche:[],idSousTypePayEleve:[]}]};var cazeMensuel={typePayEleve:'',nbrMois:'',mntMensuel:''};var cazeReduction={typePayEleve:'',pourcentRed:'',mntRed:''};var cazeAnnuel={typePayEleve:'',mntAnnuel:''};var cazeMensRed={typePayEleve:'',nbrMoisRed:'',pourcentMoisRed:'',mntMensuelRed:''};var cazeMensRedPlus={typePayEleve:'',nbrMoisRed:'',pourcentMoisRed:'',mntMensuelRed:''};for(var i=0;i<_this.state.niveaux.length;i++){if(_this.state.tabChoix[i].length===3){if(_this.state.tabChoix[i][0].typePayEleve==19){// Trois Tranche\nvar tranche3=_this.state.tabChoix[i];for(var j=0;j<tranche3.length;j++){var ligneCaze=tranche3[j];if(j==0){cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[0]);cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve);console.log(ligneCaze.idSousTypePayEleve[0]);}else if(j==1){cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[1]);cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve);}else if(j==2){cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[2]);cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve);}}}if(_this.state.tabChoix[i][0].typePayEleve==22){// Mensuelle avec reduction \nvar mensRed=_this.state.tabChoix[i];for(var j=0;j<mensRed.length;j++){var _ligneCaze=mensRed[j];if(j==0){cazeMensRed=Object.assign(cazeMensRed,{nbrMoisRed:_ligneCaze.caze[0]});}else if(j==1){cazeMensRed=Object.assign(cazeMensRed,{pourcentMoisRed:_ligneCaze.caze[1]});}else if(j==2){cazeMensRed=Object.assign(cazeMensRed,{mntMensuelRed:_ligneCaze.caze[2]});}}}if(_this.state.tabChoix[i][0].typePayEleve==23){// Mensuelle avec reduction ++\nvar mensRedPlus=_this.state.tabChoix[i];for(var j=0;j<mensRedPlus.length;j++){var _ligneCaze2=mensRedPlus[j];if(j==0){cazeMensRedPlus=Object.assign(cazeMensRedPlus,{nbrMoisRed:_ligneCaze2.caze[0]});}else if(j==1){cazeMensRedPlus=Object.assign(cazeMensRedPlus,{pourcentMoisRed:_ligneCaze2.caze[1]});}else if(j==2){cazeMensRedPlus=Object.assign(cazeMensRedPlus,{mntMensuelRed:_ligneCaze2.caze[2]});}}}}else if(_this.state.tabChoix[i].length===2){if(_this.state.tabChoix[i][0].idSousTypePayEleve!=undefined){var tranche2=_this.state.tabChoix[i];for(var j=0;j<tranche2.length;j++){var _ligneCaze3=tranche2[j];console.log(_ligneCaze3);if(j==0){cazeTranche2.tranche2[0].tranche.push(_ligneCaze3.caze[0]);cazeTranche2.tranche2[0].idSousTypePayEleve.push(_ligneCaze3.idSousTypePayEleve);}else if(j==1){cazeTranche2.tranche2[0].tranche.push(_ligneCaze3.caze[1]);cazeTranche2.tranche2[0].idSousTypePayEleve.push(_ligneCaze3.idSousTypePayEleve);}}}else if(_this.state.tabChoix[i][0].choixPay==\"Nombre mois\"||_this.state.tabChoix[i][0].choixPay==\"Montant mensuel\"){var mensuel=_this.state.tabChoix[i];for(var j=0;j<mensuel.length;j++){var _ligneCaze4=mensuel[j];if(j==0){cazeMensuel=Object.assign(cazeMensuel,{nbrMois:_ligneCaze4.caze[0]});}else if(j==1){cazeMensuel=Object.assign(cazeMensuel,{mntMensuel:_ligneCaze4.caze[1]});}}}else if(_this.state.tabChoix[i][0].choixPay==\"Réduction %\"||_this.state.tabChoix[i][0].choixPay==\"Montant réduction\"){var reduction=_this.state.tabChoix[i];for(var j=0;j<reduction.length;j++){var _ligneCaze5=reduction[j];if(j==0){cazeReduction=Object.assign(cazeReduction,{pourcentRed:_ligneCaze5.caze[0]});}else if(j==1){cazeReduction=Object.assign(cazeReduction,{mntRed:_ligneCaze5.caze[1]});}}}}else if(_this.state.tabChoix[i].length===1){var annuel=_this.state.tabChoix[i];for(var j=0;j<annuel.length;j++){var _ligneCaze6=annuel[j];cazeAnnuel=Object.assign(cazeAnnuel,{mntAnnuel:_ligneCaze6.caze[j]});}}}// mettre dans le tableau niveau\nfor(var i=0;i<_this.state.niveaux.length;i++){if(_this.state.niveaux[i].typePayEleve.label==\"Annuel\"){_this.setState({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{annuelle:cazeAnnuel}):el;})});}else if(_this.state.niveaux[i].typePayEleve.label==\"Annuel avec réduction\"){_this.setState({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{reduction:cazeReduction}):el;})});}else if(_this.state.niveaux[i].typePayEleve.label==\"Mensuelle\"){_this.setState({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mensuel:cazeMensuel}):el;})});}else if(_this.state.niveaux[i].typePayEleve.label==\"2 Tranche\"){_this.setState({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{tranches2:[].concat(_toConsumableArray(_this.state.niveaux[0].tranches2),[cazeTranche2])}):el;})});}else if(_this.state.niveaux[i].typePayEleve.label==\"3 Tranches\"){_this.setState({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{tranches3:[].concat(_toConsumableArray(_this.state.niveaux[0].tranches3),[cazeTranche3])}):el;})});}else if(_this.state.niveaux[i].typePayEleve.label==\"Mensuelle avec réduction\"){_this.setState({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mensuelRed:[].concat(_toConsumableArray(_this.state.niveaux[0].mensuelRed),[cazeMensRed])}):el;})});}else if(_this.state.niveaux[i].typePayEleve.label==\"Mensuelle avec réduction(++)\"){_this.setState({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mensuelRedPlus:[].concat(_toConsumableArray(_this.state.niveaux[0].mensuelRedPlus),[cazeMensRedPlus])}):el;})});}}jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/AddNiveau.php',type:'POST',data:{formationId:_this.state.selectedFormation.value,nomNiveau:_this.state.nomNiveau,periodeDebut:_this.state.periodeDebut,periodeFin:_this.state.periodeFin,periodeNiv:_this.state.periodeNiv,mntInitial:_this.state.mntInitial,niveaux:_this.state.niveaux,anneeScolaire:anneeScolaire,userId:userId},dataType:'json',success:function success(code_html,statut){if(code_html.Result==\"OK\"){_this.props.history.push('/Niveaux');}else if(code_html.Result==\"KO\"){alert(\"erreur,l'un de vos champs est vide!!\");}}});}else{toast.error('⛔ Veuillez verifier le champ formation !!',{containerId:'A'});}};_this.state={formations:[],selectedFormation:'',nomNiveau:'',periodeDebut:'',periodeFin:'',periodeNiv:'',mntInitial:0,niveaux:[{typePayEleve:'',annuelle:[],reduction:[],mensuel:[],tranches2:[],tranches3:[],mensuelRed:[],mensuelRedPlus:[]}],indexLignFormationASupprimer:'',modal:false,typesPayEleve:[],selectedTypePayEleve:'',checked:false,tabChoix:[],anneeScol:'',anneeScolFut:''};return _this;}_createClass(AjoutNiveau,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(JSON.parse(localStorage.getItem('userPermissions'))!=null){var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var anneeScolaire=userPermissions[0].anneeScolaire;var anneeScolaireFut=parseInt(anneeScolaire)+1;this.setState({anneeScol:anneeScolaire,anneeScolFut:anneeScolaireFut},function(){_this2.setState({periodeDebut:10,periodeFin:7,periodeNiv:\"Du 1er Octobre \"+_this2.state.anneeScol+\" jusqu'au 31 juillet \"+_this2.state.anneeScolFut});});jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/SelectFormations.php',type:'POST',data:{anneeScolaire:anneeScolaire},dataType:'json',success:function success(code_html,statut){console.log(code_html);_this2.setState({formations:code_html});}});axios.get(process.env.REACT_APP_API_URL+'Back_mediatraining/SelectTypesPayEleve.php').then(function(res){console.log(res);_this2.setState({typesPayEleve:res.data});});}else{document.location='/';}}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{id:\"page-wrapper\",style:{minHeight:'263px',marginLeft:'0px'}},React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"div\",{className:\"row bg-title\"},React.createElement(\"div\",{className:\"col-lg-12\"},React.createElement(\"h4\",{className:\"page-title\"},\"Ajout niveau\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-sm-12\"},React.createElement(\"div\",{className:\"white-box\"},React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-start',alignItems:'center',marginBottom:'10px',marginRight:'20px'}},React.createElement(Link,{to:\"/Niveaux\"},\" \",React.createElement(\"button\",{style:{background:'#DC143C',border:'1px solid #DC143C',borderRadius:'5px'},type:\"button\",className:\"btn btn-info\"},\" \",React.createElement(\"i\",{style:{paddingRight:'5px'},className:\"fas fa-arrow-circle-left\"}),\"Retour\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Formation\"),React.createElement(Select,{isClearable:true,isSearchable:true,onChange:this.addFormation,options:this.state.formations}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Niveau\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"text\",className:\"form-control\",placeholder:\"Niveau\",onChange:this.addNomNiveau}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Mois debut\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"text\",className:\"form-control\",value:this.state.periodeDebut,onChange:this.addDebutPeriode}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Mois fin\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"text\",className:\"form-control\",value:this.state.periodeFin,onChange:this.addFinPeriode}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Obs\\xE9rvation d'attestation (dur\\xE9e formation)\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"text\",className:\"form-control\",value:this.state.periodeNiv,onChange:this.addPeriodeNiveau}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Montant initial\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"number\",className:\"form-control\",value:this.state.mntInitial,onChange:this.addMntInitial})))),this.state.mntInitial!==0?React.createElement(\"div\",{className:\"row\"},React.createElement(\"table\",{style:{marginTop:'10px'},className:\"table table-bordered\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Type paiement el\\xE8ve\"),React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Montant\"),React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Suppression\"))),this.state.niveaux.map(function(el,index){return React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"td\",null,React.createElement(Select,{className:\"posAnnee\",value:el.typePaiementEleve,isClearable:true,isSearchable:true,onChange:function onChange(e){return _this3.addTypePayEleve(e,index);},options:_this3.state.typesPayEleve}),\"  \"),React.createElement(\"td\",{style:{textAlign:'center'}},_this3.state.tabChoix[index]==null?null:React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-evenly',marginTop:'-15px'}},_this3.state.tabChoix[index].map(function(el,indice){return React.createElement(\"div\",null,React.createElement(\"p\",null,el.choixPay),React.createElement(\"input\",{className:\"tranche\",type:\"number\",value:el.caze[indice],onChange:function onChange(e){return _this3.add(e,index,indice,el.choixPay);},style:{textAlign:'center',height:'38px',borderRadius:'5px',border:'solid 1px #B3B3B3'}}));}))),React.createElement(\"td\",{style:{textAlign:'center'}},React.createElement(\"button\",{className:\"buttonSupprimer\",onClick:function onClick(){return _this3.toggleLignFormation(index);}},React.createElement(\"i\",{style:{color:'white'},className:\"fas fa-trash-alt\"})))));})),React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-start',marginLeft:'15px'}},React.createElement(Button,{style:{borderRadius:'5px'},onClick:this.additionLignFormation,color:\"secondary\"},React.createElement(\"i\",{className:\"fas fa-plus-circle\"}),\"Ajouter ligne\"))):null,React.createElement(Modal,{isOpen:this.state.modal,toggle:this.nonDeleteLignFormation,className:this.props.className,fade:false},React.createElement(ModalHeader,{toggle:this.nonDeleteLignFormation},\" \",React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',width:'465px'}},React.createElement(\"img\",{width:\"30%\",src:\"./images/deleteModal.png\",alt:\"..\"}))),React.createElement(ModalBody,null,React.createElement(\"div\",{style:{fontFamily:'Montserrat, sans-serif',FontSize:'14px',FontWeight:'700',LineHeight:'18.375px'}},React.createElement(\"div\",{style:{display:'flex',justifyContent:'center'}},React.createElement(\"p\",null,\"\\xCAtes-Vous s\\xFBr de vouloir supprimer ce niveau ?\")),React.createElement(\"div\",{className:\"hvr-push\",style:{display:'flex',justifyContent:'space-around',marginBottom:'15px'}},React.createElement(\"div\",null,React.createElement(\"button\",{onClick:function onClick(){return _this3.deleteLignFormation();},style:{backgroundColor:'#00FF7F',borderRadius:'5px',color:'white'}},React.createElement(\"i\",{style:{color:'white'},className:\"far fa-thumbs-up\"}),\"Oui\")),React.createElement(\"div\",null,React.createElement(\"button\",{onClick:function onClick(){return _this3.nonDeleteLignFormation();},style:{backgroundColor:'#D9534F',borderRadius:'5px',color:'white'}},React.createElement(\"i\",{style:{color:'white'},className:\"far fa-thumbs-down\"}),\"Non\")))))),React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',marginBottom:'10px'}},React.createElement(\"button\",{style:{borderRadius:'5px'},type:\"button\",className:\"btn btn-success\",onClick:this.ajout},\"Confirmer\"))))),React.createElement(ToastContainer,{transition:Flip,enableMultiContainer:true,containerId:'A',position:toast.POSITION.TOP_RIGHT,autoClose:2500})));}}]);return AjoutNiveau;}(Component);export default withRouter(AjoutNiveau);","map":{"version":3,"sources":["C:/wamp/www/savoir_plus_dev_nv/mediatraining/src/AjoutNiveau.js"],"names":["React","Component","axios","jQuery","Link","BrowserRouter","Router","Route","Switch","withRouter","HashRouter","Redirect","Select","Button","Modal","ModalHeader","ModalBody","ModalFooter","ToastContainer","toast","Slide","Zoom","Flip","Bounce","AjoutNiveau","props","addFormation","selectedFormation","setState","console","log","addNomNiveau","event","nomNiveau","target","value","addDebutPeriode","periodeNiv","addFinPeriode","addPeriodeNiveau","addMntInitial","mntInitial","stateCopy","state","tabChoix","i","length","sousTabChoix","j","choixPay","caze","pRed","nbMois","nbMoisRed","pMoisRed","mntIni","parseInt","additionLignFormation","element","typePayEleve","annuelle","reduction","mensuel","tranches2","tranches3","mensuelRed","niveaux","addTypePayEleve","selectedTypePayEleve","indexTypePayEleve","map","el","id","Object","assign","get","process","env","REACT_APP_API_URL","then","res","data","posAnnee","document","getElementsByClassName","indexAnnuel","add","indexLignTab","indice","nomChoix","include","idSousTypePayEleve","undefined","mntTranche","nbrMois","montantInitiale","nombreMois","mntInitiale","mntCalcul","pourcentageRed","pourcentageReduction","nbrMoisRed","nombreMoisRed","pourcentageMensRed","mntCal","pourcentageMensReduction","toggleLignFormation","indexLignFormation","prevState","modal","indexLignFormationASupprimer","deleteLignFormation","splice","nonDeleteLignFormation","ajout","userPermissions","JSON","parse","localStorage","getItem","userId","idUser","anneeScolaire","cazeTranche3","tranche3","tranche","cazeTranche2","tranche2","cazeMensuel","mntMensuel","cazeReduction","pourcentRed","mntRed","cazeAnnuel","mntAnnuel","cazeMensRed","pourcentMoisRed","mntMensuelRed","cazeMensRedPlus","ligneCaze","push","mensRed","mensRedPlus","annuel","label","mensuelRedPlus","ajax","url","type","formationId","periodeDebut","periodeFin","dataType","success","code_html","statut","Result","history","alert","error","containerId","formations","typesPayEleve","checked","anneeScol","anneeScolFut","anneeScolaireFut","location","minHeight","marginLeft","display","justifyContent","alignItems","marginBottom","marginRight","background","border","borderRadius","paddingRight","backgroundColor","marginTop","textAlign","index","typePaiementEleve","e","height","color","className","width","fontFamily","FontSize","FontWeight","LineHeight","POSITION","TOP_RIGHT"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom'\r\nimport Select from 'react-select';\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Slide, Zoom, Flip, Bounce } from 'react-toastify';\r\n\r\nclass AjoutNiveau extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            formations: [],\r\n            selectedFormation: '',\r\n            nomNiveau: '',\r\n            periodeDebut: '',\r\n            periodeFin: '',\r\n            periodeNiv: '',\r\n            mntInitial: 0,\r\n            niveaux: [{ typePayEleve: '', annuelle: [], reduction: [], mensuel: [], tranches2: [], tranches3: [], mensuelRed: [], mensuelRedPlus: [] }],\r\n            indexLignFormationASupprimer: '',\r\n            modal: false,\r\n            typesPayEleve: [],\r\n            selectedTypePayEleve: '',\r\n            checked: false,\r\n            tabChoix: [],\r\n            anneeScol: '',\r\n            anneeScolFut: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (JSON.parse((localStorage.getItem('userPermissions'))) != null) {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            var anneeScolaireFut = parseInt(anneeScolaire) + 1\r\n            this.setState({\r\n                anneeScol: anneeScolaire,\r\n                anneeScolFut: anneeScolaireFut,\r\n            }, () => {\r\n                this.setState({\r\n                    periodeDebut: 10,\r\n                    periodeFin: 7,\r\n                    periodeNiv: \"Du 1er Octobre \" + this.state.anneeScol + \" jusqu'au 31 juillet \" + this.state.anneeScolFut\r\n\r\n                });\r\n            });\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectFormations.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire\r\n                },\r\n                dataType: 'json',\r\n                success: (code_html, statut) => {\r\n                    console.log(code_html)\r\n                    this.setState({\r\n                        formations: code_html\r\n                    });\r\n                }\r\n            });\r\n            axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectTypesPayEleve.php').then(res => {\r\n                console.log(res)\r\n                this.setState({\r\n                    typesPayEleve: res.data\r\n                })\r\n            })\r\n        }\r\n        else {\r\n            document.location = '/'\r\n        }\r\n    }\r\n\r\n    addFormation = selectedFormation => {\r\n        this.setState({ selectedFormation });\r\n        console.log(`Formation selected:`, selectedFormation);\r\n    };\r\n\r\n    addNomNiveau = (event) => {\r\n        this.setState({\r\n            nomNiveau: event.target.value\r\n        });\r\n    }\r\n\r\n    addDebutPeriode = (event) => {\r\n        this.setState({\r\n            periodeNiv: event.target.value\r\n        });\r\n    }\r\n\r\n    addFinPeriode = (event) => {\r\n        this.setState({\r\n            periodeNiv: event.target.value\r\n        });\r\n    }\r\n\r\n    addPeriodeNiveau = (event) => {\r\n        this.setState({\r\n            periodeNiv: event.target.value\r\n        });\r\n    }\r\n\r\n    addMntInitial = (event) => {\r\n        this.setState({\r\n            mntInitial: event.target.value\r\n        }, () => {\r\n            var stateCopy = this.state.tabChoix;\r\n            for (var i = 0; i < this.state.tabChoix.length; i++) {\r\n                var sousTabChoix = this.state.tabChoix[i]\r\n                for (var j = 0; j < sousTabChoix.length; j++) {\r\n                    if (sousTabChoix[j].choixPay == \"Annuel\") {\r\n                        stateCopy[i][0].caze[0] = this.state.mntInitial;\r\n                    }\r\n                    else if (sousTabChoix[j].choixPay == \"Montant réduction\" && stateCopy[i][0].caze[0] > 0) {\r\n                        var pRed = stateCopy[i][0].caze[0]\r\n                        stateCopy[i][1].caze[1] = this.state.mntInitial - (this.state.mntInitial / pRed);\r\n                    }\r\n                    else if (sousTabChoix[j].choixPay == \"Montant mensuel\" && stateCopy[i][0].caze[0] > 0) {\r\n                        var nbMois = stateCopy[i][0].caze[0]\r\n                        stateCopy[i][1].caze[1] = this.state.mntInitial / nbMois;\r\n                    }\r\n                    else if (sousTabChoix[j].choixPay == \"Montant mensuel avec réduction\" && stateCopy[i][0].caze[0] > 0 && stateCopy[i][1].caze[1]) {\r\n                        var nbMoisRed = stateCopy[i][0].caze[0]\r\n                        var pMoisRed = stateCopy[i][1].caze[1]\r\n                        var mntIni = parseInt(this.state.mntInitial);\r\n                        stateCopy[i][2].caze[2] = ((mntIni - ((mntIni * pMoisRed) / 100)) / nbMoisRed);\r\n                    }\r\n                    else if (sousTabChoix[j].choixPay == \"Montant mensuel avec réduction(++)\" && stateCopy[i][0].caze[0] > 0 && stateCopy[i][1].caze[1]) {\r\n                        var nbMoisRed = stateCopy[i][0].caze[0]\r\n                        var pMoisRed = stateCopy[i][1].caze[1]\r\n                        var mntIni = parseInt(this.state.mntInitial);\r\n                        stateCopy[i][2].caze[2] = ((mntIni - ((mntIni * pMoisRed) / 100)) / nbMoisRed);\r\n                    }\r\n                }\r\n            }\r\n            this.setState({\r\n                tabChoix: stateCopy\r\n            }, () => {\r\n                console.log(this.state.tabChoix)\r\n            });\r\n        });\r\n    }\r\n\r\n    additionLignFormation = () => {\r\n        let element = { typePayEleve: '', annuelle: [], reduction: [], mensuel: [], tranches2: [], tranches3: [], mensuelRed: [] }\r\n        this.setState({\r\n            niveaux: [...this.state.niveaux, element]\r\n        })\r\n    }\r\n\r\n    addTypePayEleve = (selectedTypePayEleve, indexTypePayEleve) => {\r\n        if (selectedTypePayEleve != null) {\r\n            let typePayEleve = selectedTypePayEleve;\r\n            this.setState({\r\n                selectedTypePayEleve: selectedTypePayEleve,\r\n                niveaux: this.state.niveaux.map((el, id) => (id === indexTypePayEleve ? Object.assign(el, { typePayEleve: typePayEleve }) : el))\r\n            }, () => {\r\n                axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/GetChoixModePay.php?id=' + selectedTypePayEleve.value).then(res => {\r\n                    console.log(res)\r\n                    if (res.data.length === 1) {\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexTypePayEleve] = res.data;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        }, () => {\r\n                            console.log(this.state.tabChoix)\r\n                            const posAnnee = document.getElementsByClassName('posAnnee');\r\n                            console.log(posAnnee.length - 1)\r\n                            let indexAnnuel = posAnnee.length - 1\r\n                            let mntInitial = this.state.mntInitial\r\n                            var stateCopy = this.state.tabChoix;\r\n                            stateCopy[indexAnnuel][0].caze[0] = mntInitial;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        })\r\n                    }\r\n                    else if (res.data.length > 0) {\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexTypePayEleve] = res.data;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        }, () => {\r\n                            console.log(this.state.tabChoix)\r\n                        })\r\n                    }\r\n                    else {\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexTypePayEleve] = null;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        }, () => {\r\n                            console.log(this.state.tabChoix)\r\n                        })\r\n                    }\r\n                })\r\n            });\r\n        }\r\n    }\r\n\r\n    add = (event, indexLignTab, indice, nomChoix) => {\r\n        let include = this.state.tabChoix[indexLignTab][indice].idSousTypePayEleve\r\n        console.log(include)\r\n        if (include != undefined) {\r\n            let mntTranche = event.target.value;\r\n            var stateCopy = this.state.tabChoix;\r\n            stateCopy[indexLignTab][indice].caze[indice] = mntTranche;\r\n            this.setState({\r\n                tabChoix: stateCopy\r\n            }, () => {\r\n                console.log(this.state.tabChoix)\r\n            });\r\n        }\r\n        else {\r\n            if (nomChoix == \"Nombre mois\") {\r\n                let nbrMois = event.target.value;\r\n                var stateCopy = this.state.tabChoix;\r\n                stateCopy[indexLignTab][indice].caze[indice] = nbrMois;\r\n                this.setState({\r\n                    tabChoix: stateCopy\r\n                }, () => {\r\n                    let montantInitiale = parseInt(this.state.mntInitial)\r\n                    let nombreMois = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                    if (montantInitiale > 0 && nombreMois > 0) {\r\n                        let mntInitiale = parseInt(this.state.mntInitial);\r\n                        let nbrMois = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        let mntCalcul = mntInitiale / nbrMois\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexLignTab][indice + 1].caze[indice + 1] = mntCalcul;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            else if (nomChoix == \"Réduction %\") {\r\n                let pourcentageRed = event.target.value;\r\n                var stateCopy = this.state.tabChoix;\r\n                stateCopy[indexLignTab][indice].caze[indice] = pourcentageRed;\r\n                this.setState({\r\n                    tabChoix: stateCopy\r\n                }, () => {\r\n                    let montantInitiale = parseInt(this.state.mntInitial)\r\n                    let pourcentageReduction = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                    if (montantInitiale > 0 && pourcentageReduction > 0) {\r\n                        let mntInitiale = parseInt(this.state.mntInitial);\r\n                        let pourcentageRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        let mntCalcul = mntInitiale - ((mntInitiale * pourcentageRed) / 100)\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexLignTab][indice + 1].caze[indice + 1] = mntCalcul;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            else if (nomChoix == \"Nombre mois avec réduction\") {\r\n                if (this.state.tabChoix[indexLignTab][2].caze[2] == 0) {\r\n                    // montant vide\r\n                    let nbrMoisRed = event.target.value;\r\n                    var stateCopy = this.state.tabChoix;\r\n                    stateCopy[indexLignTab][indice].caze[indice] = nbrMoisRed;\r\n                    this.setState({\r\n                        tabChoix: stateCopy\r\n                    }, () => {\r\n                        let montantInitiale = parseInt(this.state.mntInitial)\r\n                        let nombreMoisRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        if (montantInitiale > 0 && nombreMoisRed > 0) {\r\n                            let mntInitiale = parseInt(this.state.mntInitial);\r\n                            let nbrMoisRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                            let mntCalcul = mntInitiale / nbrMoisRed\r\n                            var stateCopy = this.state.tabChoix;\r\n                            // \r\n                            stateCopy[indexLignTab][2].caze[2] = mntCalcul;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                else if (this.state.tabChoix[indexLignTab][2].caze[2] > 0) {\r\n                    // montant non vide\r\n                    let nbrMoisRed = event.target.value;\r\n                    var stateCopy = this.state.tabChoix;\r\n                    stateCopy[indexLignTab][indice].caze[indice] = nbrMoisRed;\r\n                    this.setState({\r\n                        tabChoix: stateCopy\r\n                    }, () => {\r\n                        let montantInitiale = parseInt(this.state.mntInitial)\r\n                        let nombreMoisRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        if (montantInitiale > 0 && nombreMoisRed > 0) {\r\n                            let mntInitiale = parseInt(this.state.mntInitial);\r\n                            let nbrMoisRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                            let mntCalcul = mntInitiale / nbrMoisRed\r\n                            var stateCopy = this.state.tabChoix;\r\n                            // Refaire l'opération de % reduction:\r\n                            let pourcentageMensRed = parseInt(this.state.tabChoix[indexLignTab][1].caze[1])\r\n                            let mntCal = mntCalcul - ((mntCalcul * pourcentageMensRed) / 100)\r\n                            //\r\n                            stateCopy[indexLignTab][2].caze[2] = mntCal;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (nomChoix == \"Réduction mensuelle %\") {\r\n                if (this.state.tabChoix[indexLignTab][2].caze[2] == 0) {\r\n                    // montant vide\r\n                    let pourcentageMensRed = event.target.value;\r\n                    var stateCopy = this.state.tabChoix;\r\n                    stateCopy[indexLignTab][indice].caze[indice] = pourcentageMensRed;\r\n                    this.setState({\r\n                        tabChoix: stateCopy\r\n                    }, () => {\r\n                        let montantInitiale = parseInt(this.state.mntInitial)\r\n                        let pourcentageMensReduction = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        if (montantInitiale > 0 && pourcentageMensReduction > 0) {\r\n                            let mntInitiale = parseInt(this.state.mntInitial);\r\n                            let pourcentageMensRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                            let mntCalcul = mntInitiale - ((mntInitiale * pourcentageMensRed) / 100)\r\n                            var stateCopy = this.state.tabChoix;\r\n                            //\r\n                            stateCopy[indexLignTab][2].caze[2] = mntCalcul;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                else if (this.state.tabChoix[indexLignTab][2].caze[2] > 0) {\r\n                    // montant non vide\r\n                    let pourcentageMensRed = event.target.value;\r\n                    var stateCopy = this.state.tabChoix;\r\n                    stateCopy[indexLignTab][indice].caze[indice] = pourcentageMensRed;\r\n                    this.setState({\r\n                        tabChoix: stateCopy\r\n                    }, () => {\r\n                        let montantInitiale = parseInt(this.state.mntInitial)\r\n                        let pourcentageMensReduction = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        if (montantInitiale > 0 && pourcentageMensReduction > 0) {\r\n                            let mntInitiale = parseInt(this.state.mntInitial);\r\n                            let pourcentageMensRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                            let mntCalcul = mntInitiale - ((mntInitiale * pourcentageMensRed) / 100)\r\n                            var stateCopy = this.state.tabChoix;\r\n                            // Refaire l'opération / par le nombre de mois : \r\n                            let nbrMoisRed = parseInt(this.state.tabChoix[indexLignTab][0].caze[0])\r\n                            let mntCal = mntCalcul / nbrMoisRed\r\n                            //\r\n                            stateCopy[indexLignTab][2].caze[2] = mntCal;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            else if (nomChoix == \"Nombre mois avec réduction(++)\") {\r\n                if (this.state.tabChoix[indexLignTab][2].caze[2] == 0) {\r\n                    // montant vide\r\n                    let nbrMoisRed = event.target.value;\r\n                    var stateCopy = this.state.tabChoix;\r\n                    stateCopy[indexLignTab][indice].caze[indice] = nbrMoisRed;\r\n                    this.setState({\r\n                        tabChoix: stateCopy\r\n                    }, () => {\r\n                        let montantInitiale = parseInt(this.state.mntInitial)\r\n                        let nombreMoisRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        if (montantInitiale > 0 && nombreMoisRed > 0) {\r\n                            let mntInitiale = parseInt(this.state.mntInitial);\r\n                            let nbrMoisRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                            let mntCalcul = mntInitiale / nbrMoisRed\r\n                            var stateCopy = this.state.tabChoix;\r\n                            // \r\n                            stateCopy[indexLignTab][2].caze[2] = mntCalcul;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                else if (this.state.tabChoix[indexLignTab][2].caze[2] > 0) {\r\n                    // montant non vide\r\n                    let nbrMoisRed = event.target.value;\r\n                    var stateCopy = this.state.tabChoix;\r\n                    stateCopy[indexLignTab][indice].caze[indice] = nbrMoisRed;\r\n                    this.setState({\r\n                        tabChoix: stateCopy\r\n                    }, () => {\r\n                        let montantInitiale = parseInt(this.state.mntInitial)\r\n                        let nombreMoisRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        if (montantInitiale > 0 && nombreMoisRed > 0) {\r\n                            let mntInitiale = parseInt(this.state.mntInitial);\r\n                            let nbrMoisRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                            let mntCalcul = mntInitiale / nbrMoisRed\r\n                            var stateCopy = this.state.tabChoix;\r\n                            // Refaire l'opération de % reduction:\r\n                            let pourcentageMensRed = parseInt(this.state.tabChoix[indexLignTab][1].caze[1])\r\n                            let mntCal = mntCalcul - ((mntCalcul * pourcentageMensRed) / 100)\r\n                            //\r\n                            stateCopy[indexLignTab][2].caze[2] = mntCal;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (nomChoix == \"Réduction mensuelle %(++)\") {\r\n                if (this.state.tabChoix[indexLignTab][2].caze[2] == 0) {\r\n                    // montant vide\r\n                    let pourcentageMensRed = event.target.value;\r\n                    var stateCopy = this.state.tabChoix;\r\n                    stateCopy[indexLignTab][indice].caze[indice] = pourcentageMensRed;\r\n                    this.setState({\r\n                        tabChoix: stateCopy\r\n                    }, () => {\r\n                        let montantInitiale = parseInt(this.state.mntInitial)\r\n                        let pourcentageMensReduction = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        if (montantInitiale > 0 && pourcentageMensReduction > 0) {\r\n                            let mntInitiale = parseInt(this.state.mntInitial);\r\n                            let pourcentageMensRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                            let mntCalcul = mntInitiale - ((mntInitiale * pourcentageMensRed) / 100)\r\n                            var stateCopy = this.state.tabChoix;\r\n                            //\r\n                            stateCopy[indexLignTab][2].caze[2] = mntCalcul;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                else if (this.state.tabChoix[indexLignTab][2].caze[2] > 0) {\r\n                    // montant non vide\r\n                    let pourcentageMensRed = event.target.value;\r\n                    var stateCopy = this.state.tabChoix;\r\n                    stateCopy[indexLignTab][indice].caze[indice] = pourcentageMensRed;\r\n                    this.setState({\r\n                        tabChoix: stateCopy\r\n                    }, () => {\r\n                        let montantInitiale = parseInt(this.state.mntInitial)\r\n                        let pourcentageMensReduction = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        if (montantInitiale > 0 && pourcentageMensReduction > 0) {\r\n                            let mntInitiale = parseInt(this.state.mntInitial);\r\n                            let pourcentageMensRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                            let mntCalcul = mntInitiale - ((mntInitiale * pourcentageMensRed) / 100)\r\n                            var stateCopy = this.state.tabChoix;\r\n                            // Refaire l'opération / par le nombre de mois : \r\n                            let nbrMoisRed = parseInt(this.state.tabChoix[indexLignTab][0].caze[0])\r\n                            let mntCal = mntCalcul / nbrMoisRed\r\n                            //\r\n                            stateCopy[indexLignTab][2].caze[2] = mntCal;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    toggleLignFormation = (indexLignFormation) => {\r\n        this.setState(prevState => ({\r\n            modal: !prevState.modal,\r\n            indexLignFormationASupprimer: indexLignFormation\r\n        }));\r\n    }\r\n\r\n    deleteLignFormation = () => {\r\n        this.state.niveaux.splice(this.state.indexLignFormationASupprimer, 1)\r\n        this.state.tabChoix.splice(this.state.indexLignFormationASupprimer, 1)\r\n        this.setState(prevState => ({\r\n            modal: !prevState.modal\r\n        }));\r\n    }\r\n\r\n    nonDeleteLignFormation = () => {\r\n        this.setState(prevState => ({\r\n            modal: !prevState.modal\r\n        }));\r\n    }\r\n\r\n    ajout = () => {\r\n        if (this.state.selectedFormation != '') {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var userId = userPermissions[0].idUser\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            // recuperer et ranger valeur tableau\r\n            var cazeTranche3 = { typePayEleve: '', tranche3: [{ tranche: [], idSousTypePayEleve: [] }] }\r\n            var cazeTranche2 = { typePayEleve: '', tranche2: [{ tranche: [], idSousTypePayEleve: [] }] }\r\n            var cazeMensuel = { typePayEleve: '', nbrMois: '', mntMensuel: '' }\r\n            var cazeReduction = { typePayEleve: '', pourcentRed: '', mntRed: '' }\r\n            var cazeAnnuel = { typePayEleve: '', mntAnnuel: '' }\r\n            var cazeMensRed = { typePayEleve: '', nbrMoisRed: '', pourcentMoisRed: '', mntMensuelRed: '' }\r\n            var cazeMensRedPlus = { typePayEleve: '', nbrMoisRed: '', pourcentMoisRed: '', mntMensuelRed: '' }\r\n            for (var i = 0; i < this.state.niveaux.length; i++) {\r\n                if (this.state.tabChoix[i].length === 3) {\r\n                    if (this.state.tabChoix[i][0].typePayEleve == 19) {\r\n                        // Trois Tranche\r\n                        let tranche3 = this.state.tabChoix[i]\r\n                        for (var j = 0; j < tranche3.length; j++) {\r\n                            let ligneCaze = tranche3[j];\r\n                            if (j == 0) {\r\n                                cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[0])\r\n                                cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                                console.log(ligneCaze.idSousTypePayEleve[0])\r\n                            }\r\n                            else if (j == 1) {\r\n                                cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[1])\r\n                                cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                            }\r\n                            else if (j == 2) {\r\n                                cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[2])\r\n                                cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                            }\r\n                        }\r\n                    }\r\n                    if (this.state.tabChoix[i][0].typePayEleve == 22) {\r\n                        // Mensuelle avec reduction \r\n                        let mensRed = this.state.tabChoix[i]\r\n                        for (var j = 0; j < mensRed.length; j++) {\r\n                            let ligneCaze = mensRed[j]\r\n                            if (j == 0) {\r\n                                cazeMensRed = Object.assign(cazeMensRed, { nbrMoisRed: ligneCaze.caze[0] })\r\n                            }\r\n                            else if (j == 1) {\r\n                                cazeMensRed = Object.assign(cazeMensRed, { pourcentMoisRed: ligneCaze.caze[1] })\r\n                            }\r\n                            else if (j == 2) {\r\n                                cazeMensRed = Object.assign(cazeMensRed, { mntMensuelRed: ligneCaze.caze[2] })\r\n                            }\r\n                        }\r\n                    }\r\n                    if (this.state.tabChoix[i][0].typePayEleve == 23) {\r\n                        // Mensuelle avec reduction ++\r\n                        let mensRedPlus = this.state.tabChoix[i]\r\n                        for (var j = 0; j < mensRedPlus.length; j++) {\r\n                            let ligneCaze = mensRedPlus[j]\r\n                            if (j == 0) {\r\n                                cazeMensRedPlus = Object.assign(cazeMensRedPlus, { nbrMoisRed: ligneCaze.caze[0] })\r\n                            }\r\n                            else if (j == 1) {\r\n                                cazeMensRedPlus = Object.assign(cazeMensRedPlus, { pourcentMoisRed: ligneCaze.caze[1] })\r\n                            }\r\n                            else if (j == 2) {\r\n                                cazeMensRedPlus = Object.assign(cazeMensRedPlus, { mntMensuelRed: ligneCaze.caze[2] })\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else if (this.state.tabChoix[i].length === 2) {\r\n                    if (this.state.tabChoix[i][0].idSousTypePayEleve != undefined) {\r\n                        let tranche2 = this.state.tabChoix[i]\r\n                        for (var j = 0; j < tranche2.length; j++) {\r\n                            let ligneCaze = tranche2[j]\r\n                            console.log(ligneCaze)\r\n                            if (j == 0) {\r\n                                cazeTranche2.tranche2[0].tranche.push(ligneCaze.caze[0])\r\n                                cazeTranche2.tranche2[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                            }\r\n                            else if (j == 1) {\r\n                                cazeTranche2.tranche2[0].tranche.push(ligneCaze.caze[1])\r\n                                cazeTranche2.tranche2[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (this.state.tabChoix[i][0].choixPay == \"Nombre mois\" || this.state.tabChoix[i][0].choixPay == \"Montant mensuel\") {\r\n                        let mensuel = this.state.tabChoix[i]\r\n                        for (var j = 0; j < mensuel.length; j++) {\r\n                            let ligneCaze = mensuel[j]\r\n                            if (j == 0) {\r\n                                cazeMensuel = Object.assign(cazeMensuel, { nbrMois: ligneCaze.caze[0] })\r\n                            }\r\n                            else if (j == 1) {\r\n                                cazeMensuel = Object.assign(cazeMensuel, { mntMensuel: ligneCaze.caze[1] })\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (this.state.tabChoix[i][0].choixPay == \"Réduction %\" || this.state.tabChoix[i][0].choixPay == \"Montant réduction\") {\r\n                        let reduction = this.state.tabChoix[i]\r\n                        for (var j = 0; j < reduction.length; j++) {\r\n                            let ligneCaze = reduction[j]\r\n                            if (j == 0) {\r\n                                cazeReduction = Object.assign(cazeReduction, { pourcentRed: ligneCaze.caze[0] })\r\n                            }\r\n                            else if (j == 1) {\r\n                                cazeReduction = Object.assign(cazeReduction, { mntRed: ligneCaze.caze[1] })\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else if (this.state.tabChoix[i].length === 1) {\r\n                    let annuel = this.state.tabChoix[i]\r\n                    for (var j = 0; j < annuel.length; j++) {\r\n                        let ligneCaze = annuel[j]\r\n                        cazeAnnuel = Object.assign(cazeAnnuel, { mntAnnuel: ligneCaze.caze[j] })\r\n                    }\r\n                }\r\n            }\r\n            // mettre dans le tableau niveau\r\n            for (var i = 0; i < this.state.niveaux.length; i++) {\r\n                if (this.state.niveaux[i].typePayEleve.label == \"Annuel\") {\r\n                    this.setState({\r\n                        niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { annuelle: cazeAnnuel }) : el))\r\n                    });\r\n                }\r\n                else if (this.state.niveaux[i].typePayEleve.label == \"Annuel avec réduction\") {\r\n                    this.setState({\r\n                        niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { reduction: cazeReduction }) : el))\r\n                    });\r\n                }\r\n                else if (this.state.niveaux[i].typePayEleve.label == \"Mensuelle\") {\r\n                    this.setState({\r\n                        niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mensuel: cazeMensuel }) : el))\r\n                    });\r\n                }\r\n                else if (this.state.niveaux[i].typePayEleve.label == \"2 Tranche\") {\r\n                    this.setState({\r\n                        niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { tranches2: [...this.state.niveaux[0].tranches2, cazeTranche2] }) : el))\r\n                    });\r\n                }\r\n                else if (this.state.niveaux[i].typePayEleve.label == \"3 Tranches\") {\r\n                    this.setState({\r\n                        niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { tranches3: [...this.state.niveaux[0].tranches3, cazeTranche3] }) : el))\r\n                    });\r\n                }\r\n                else if (this.state.niveaux[i].typePayEleve.label == \"Mensuelle avec réduction\") {\r\n                    this.setState({\r\n                        niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mensuelRed: [...this.state.niveaux[0].mensuelRed, cazeMensRed] }) : el))\r\n                    });\r\n                }\r\n                else if (this.state.niveaux[i].typePayEleve.label == \"Mensuelle avec réduction(++)\") {\r\n                    this.setState({\r\n                        niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mensuelRedPlus: [...this.state.niveaux[0].mensuelRedPlus, cazeMensRedPlus] }) : el))\r\n                    });\r\n                }\r\n            }\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/AddNiveau.php',\r\n                type: 'POST',\r\n                data: {\r\n                    formationId: this.state.selectedFormation.value,\r\n                    nomNiveau: this.state.nomNiveau,\r\n                    periodeDebut: this.state.periodeDebut,\r\n                    periodeFin: this.state.periodeFin,\r\n                    periodeNiv: this.state.periodeNiv,\r\n                    mntInitial: this.state.mntInitial,\r\n                    niveaux: this.state.niveaux,\r\n                    anneeScolaire: anneeScolaire,\r\n                    userId: userId\r\n                },\r\n                dataType: 'json',\r\n                success: (code_html, statut) => {\r\n                    if (code_html.Result == \"OK\") {\r\n                        this.props.history.push('/Niveaux');\r\n                    }\r\n                    else if (code_html.Result == \"KO\") {\r\n                        alert(\"erreur,l'un de vos champs est vide!!\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            toast.error('⛔ Veuillez verifier le champ formation !!', { containerId: 'A' });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px', marginLeft: '0px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Ajout niveau</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-12\">\r\n                            <div className=\"white-box\">\r\n                                <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginBottom: '10px', marginRight: '20px' }}>\r\n                                    <Link to=\"/Niveaux\" > <button style={{ background: '#DC143C', border: '1px solid #DC143C', borderRadius: '5px' }} type=\"button\" className=\"btn btn-info\"> <i style={{ paddingRight: '5px' }} className=\"fas fa-arrow-circle-left\"></i>Retour</button></Link>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Formation</label>\r\n                                            <Select\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={this.addFormation}\r\n                                                options={this.state.formations}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Niveau</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"text\" className=\"form-control\" placeholder='Niveau' onChange={this.addNomNiveau} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Mois debut</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"text\" className=\"form-control\" value={this.state.periodeDebut} onChange={this.addDebutPeriode} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Mois fin</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"text\" className=\"form-control\" value={this.state.periodeFin} onChange={this.addFinPeriode} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Obsérvation d'attestation (durée formation)</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"text\" className=\"form-control\" value={this.state.periodeNiv} onChange={this.addPeriodeNiveau} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Montant initial</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"number\" className=\"form-control\" value={this.state.mntInitial} onChange={this.addMntInitial} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                {this.state.mntInitial !== 0 ?\r\n                                    (<div className=\"row\">\r\n                                        <table style={{ marginTop: '10px' }} className=\"table table-bordered\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Type paiement elève</th>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Montant</th>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Suppression</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            {this.state.niveaux.map((el, index) =>\r\n                                                <tbody>\r\n                                                    <tr>\r\n                                                        <td><Select\r\n                                                            className='posAnnee'\r\n                                                            value={el.typePaiementEleve}\r\n                                                            isClearable={true}\r\n                                                            isSearchable={true}\r\n                                                            onChange={(e) => this.addTypePayEleve(e, index)}\r\n                                                            options={this.state.typesPayEleve}\r\n                                                        />  </td>\r\n                                                        <td style={{ textAlign: 'center' }}>{this.state.tabChoix[index] == null ? (null) : (<div style={{ display: 'flex', justifyContent: 'space-evenly', marginTop: '-15px' }}>{this.state.tabChoix[index].map((el, indice) => <div><p>{el.choixPay}</p><input className=\"tranche\" type=\"number\" value={el.caze[indice]} onChange={(e) => this.add(e, index, indice, el.choixPay)} style={{ textAlign: 'center', height: '38px', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} /></div>)}</div>)}</td>\r\n                                                        <td style={{ textAlign: 'center' }}><button className='buttonSupprimer' onClick={() => this.toggleLignFormation(index)}><i style={{ color: 'white' }} className=\"fas fa-trash-alt\"></i></button></td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            )}\r\n                                        </table>\r\n                                        <div style={{ display: 'flex', justifyContent: 'flex-start', marginLeft: '15px' }}>\r\n                                            <Button style={{ borderRadius: '5px' }} onClick={this.additionLignFormation} color=\"secondary\"><i className=\"fas fa-plus-circle\"></i>Ajouter ligne</Button>\r\n                                        </div>\r\n                                    </div>) : (null)}\r\n                                <Modal isOpen={this.state.modal} toggle={this.nonDeleteLignFormation} className={this.props.className} fade={false}>\r\n                                    <ModalHeader toggle={this.nonDeleteLignFormation}> <div style={{ display: 'flex', justifyContent: 'center', width: '465px' }}><img width='30%' src=\"./images/deleteModal.png\" alt=\"..\" /></div></ModalHeader>\r\n                                    <ModalBody>\r\n                                        <div style={{ fontFamily: 'Montserrat, sans-serif', FontSize: '14px', FontWeight: '700', LineHeight: '18.375px' }}>\r\n                                            <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                                <p>Êtes-Vous sûr de vouloir supprimer ce niveau ?</p>\r\n                                            </div>\r\n                                            <div className='hvr-push' style={{ display: 'flex', justifyContent: 'space-around', marginBottom: '15px' }}>\r\n                                                <div><button onClick={() => this.deleteLignFormation()} style={{ backgroundColor: '#00FF7F', borderRadius: '5px', color: 'white' }}><i style={{ color: 'white' }} className=\"far fa-thumbs-up\"></i>Oui</button></div>\r\n                                                <div><button onClick={() => this.nonDeleteLignFormation()} style={{ backgroundColor: '#D9534F', borderRadius: '5px', color: 'white' }}><i style={{ color: 'white' }} className=\"far fa-thumbs-down\"></i>Non</button></div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ModalBody>\r\n                                </Modal>\r\n                                <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px' }}>\r\n                                    <button style={{ borderRadius: '5px' }} type=\"button\" className=\"btn btn-success\" onClick={this.ajout}>Confirmer</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <ToastContainer transition={Flip} enableMultiContainer containerId={'A'} position={toast.POSITION.TOP_RIGHT} autoClose={2500} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(AjoutNiveau);"]},"metadata":{},"sourceType":"module"}