{"ast":null,"code":"import _defineProperty from\"C:\\\\wamp\\\\www\\\\savoir_plus_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"C:\\\\wamp\\\\www\\\\savoir_plus_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\wamp\\\\www\\\\savoir_plus_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\wamp\\\\www\\\\savoir_plus_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\wamp\\\\www\\\\savoir_plus_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\wamp\\\\www\\\\savoir_plus_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\wamp\\\\www\\\\savoir_plus_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import jQuery from'jquery';import{Link,BrowserRouter as Router,Route,Switch,withRouter,HashRouter,Redirect}from'react-router-dom';import Select from'react-select';import{Button,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';var ModifNiveau=/*#__PURE__*/function(_Component){_inherits(ModifNiveau,_Component);function ModifNiveau(props){var _this;_classCallCheck(this,ModifNiveau);_this=_possibleConstructorReturn(this,_getPrototypeOf(ModifNiveau).call(this,props));_this.modifFormation=function(selectedFormation){_this.setState({selectedFormation:selectedFormation});console.log(\"Formation selected:\",selectedFormation);};_this.modifNomNiveau=function(event){_this.setState({nomNiveau:event.target.value});};_this.modifPeriodeNiveau=function(event){_this.setState({periodeNiv:event.target.value});};_this.modifMntInitial=function(event){_this.setState({mntInitial:event.target.value},function(){var stateCopy=_this.state.tabChoix;for(var i=0;i<_this.state.tabChoix.length;i++){var sousTabChoix=_this.state.tabChoix[i];for(var j=0;j<sousTabChoix.length;j++){if(sousTabChoix[j].choixPay==\"Annuel\"){stateCopy[i][0].caze[0]=_this.state.mntInitial;}else if(sousTabChoix[j].choixPay==\"Montant réduction\"){var pRed=stateCopy[i][0].caze[0];stateCopy[i][1].caze[1]=_this.state.mntInitial-_this.state.mntInitial/pRed;}else if(sousTabChoix[j].choixPay==\"Montant mensuel\"){var nbMois=stateCopy[i][0].caze[0];stateCopy[i][1].caze[1]=_this.state.mntInitial/nbMois;}}}_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);});});};_this.additionLignFormation=function(){var element={idFraisNiv:-1,typePayEleve:'',annuelle:[],reduction:[],mensuel:[],tranches2:[],tranches3:[]};_this.setState({niveaux:[].concat(_toConsumableArray(_this.state.niveaux),[element])});};_this.modifDuree=function(event){_this.setState({duree:event.target.value});};_this.modifTypePayEleve=function(selectedTypePayEleve,indexTypePayEleve){if(selectedTypePayEleve!=null){var typePayEleve=selectedTypePayEleve;_this.setState({selectedTypePayEleve:selectedTypePayEleve,niveaux:_this.state.niveaux.map(function(el,id){return id===indexTypePayEleve?Object.assign(el,{typePayEleve:typePayEleve}):el;})},function(){axios.get(process.env.REACT_APP_API_URL+'Back_mediatraining/GetChoix.php?id='+selectedTypePayEleve.value).then(function(res){console.log(res);if(res.data.length===1){var stateCopy=_this.state.tabChoix;stateCopy[indexTypePayEleve]=res.data;_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);var posAnnee=document.getElementsByClassName('posAnnee');console.log(posAnnee.length-1);var indexAnnuel=posAnnee.length-1;var mntInitial=_this.state.mntInitial;var stateCopy=_this.state.tabChoix;stateCopy[indexAnnuel][0].caze[0]=mntInitial;_this.setState({tabChoix:stateCopy});});}else if(res.data.length>0){var stateCopy=_this.state.tabChoix;stateCopy[indexTypePayEleve]=res.data;_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);});}else{var stateCopy=_this.state.tabChoix;stateCopy[indexTypePayEleve]=null;_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);});}});});}};_this.add=function(event,indexLignTab,indice,nomChoix){var include=_this.state.tabChoix[indexLignTab][indice].idSousTypePayEleve;console.log(include);if(include!=undefined){var mntTranche=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=mntTranche;_this.setState({tabChoix:stateCopy},function(){console.log(_this.state.tabChoix);});}else{if(nomChoix==\"Nombre mois\"){var nbrMois=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=nbrMois;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var nombreMois=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&nombreMois>0){var mntInitiale=parseInt(_this.state.mntInitial);var _nbrMois=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale/_nbrMois;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice+1].caze[indice+1]=mntCalcul;_this.setState({tabChoix:stateCopy});}});}else if(nomChoix==\"Réduction %\"){var pourcentageRed=event.target.value;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice].caze[indice]=pourcentageRed;_this.setState({tabChoix:stateCopy},function(){var montantInitiale=parseInt(_this.state.mntInitial);var pourcentageReduction=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);if(montantInitiale>0&&pourcentageReduction>0){var mntInitiale=parseInt(_this.state.mntInitial);var _pourcentageRed=parseInt(_this.state.tabChoix[indexLignTab][indice].caze[indice]);var mntCalcul=mntInitiale-mntInitiale*_pourcentageRed/100;var stateCopy=_this.state.tabChoix;stateCopy[indexLignTab][indice+1].caze[indice+1]=mntCalcul;_this.setState({tabChoix:stateCopy});}});}}};_this.toggleLignFormation=function(indexLignFormation,idFraisNiv){_this.setState(function(prevState){return{modal:!prevState.modal,idFraisNivASupprimer:idFraisNiv,indexLignFormationASupprimer:indexLignFormation};});};_this.deleteLignFormation=function(){_this.state.niveaux.splice(_this.state.indexLignFormationASupprimer,1);_this.state.tabChoix.splice(_this.state.indexLignFormationASupprimer,1);var idFraisNivASupprimer=_this.state.idFraisNivASupprimer;_this.setState({tabIdFraisNivDelete:[].concat(_toConsumableArray(_this.state.tabIdFraisNivDelete),[idFraisNivASupprimer])});_this.setState(function(prevState){return{modal:!prevState.modal};});};_this.nonDeleteLignFormation=function(){_this.setState(function(prevState){return{modal:!prevState.modal};});};_this.modif=function(){var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var userId=userPermissions[0].idUser;var year=new Date().getFullYear();// recuperer et ranger valeur tableau\nvar cazeTranche3={typePayEleve:'',tranche3:[{tranche:[],idSousTypePayEleve:[]}]};var cazeTranche2={typePayEleve:'',tranche2:[{tranche:[],idSousTypePayEleve:[]}]};var cazeMensuel={typePayEleve:'',nbrMois:'',mntMensuel:''};var cazeReduction={typePayEleve:'',pourcentRed:'',mntRed:''};var cazeAnnuel={typePayEleve:'',mntAnnuel:''};for(var i=0;i<_this.state.niveaux.length;i++){if(_this.state.tabChoix[i].length===3){var tranche3=_this.state.tabChoix[i];for(var j=0;j<tranche3.length;j++){var ligneCaze=tranche3[j];if(j==0){cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[0]);cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve);console.log(ligneCaze.idSousTypePayEleve[0]);}else if(j==1){cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[1]);cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve);}else if(j==2){cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[2]);cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve);}}}else if(_this.state.tabChoix[i].length===2){if(_this.state.tabChoix[i][0].idSousTypePayEleve!=undefined){var tranche2=_this.state.tabChoix[i];for(var j=0;j<tranche2.length;j++){var _ligneCaze=tranche2[j];if(j==0){cazeTranche2.tranche2[0].tranche.push(_ligneCaze.caze[0]);cazeTranche2.tranche2[0].idSousTypePayEleve.push(_ligneCaze.idSousTypePayEleve);}else if(j==1){cazeTranche2.tranche2[0].tranche.push(_ligneCaze.caze[1]);cazeTranche2.tranche2[0].idSousTypePayEleve.push(_ligneCaze.idSousTypePayEleve);}}}else if(_this.state.tabChoix[i][0].choixPay==\"Nombre mois\"||_this.state.tabChoix[i][0].choixPay==\"Montant mensuel\"){var mensuel=_this.state.tabChoix[i];for(var j=0;j<mensuel.length;j++){var _ligneCaze2=mensuel[j];if(j==0){cazeMensuel=Object.assign(cazeMensuel,{nbrMois:_ligneCaze2.caze[0]});}else if(j==1){cazeMensuel=Object.assign(cazeMensuel,{mntMensuel:_ligneCaze2.caze[1]});}}}else if(_this.state.tabChoix[i][0].choixPay==\"Réduction %\"||_this.state.tabChoix[i][0].choixPay==\"Montant réduction\"){var reduction=_this.state.tabChoix[i];for(var j=0;j<reduction.length;j++){var _ligneCaze3=reduction[j];if(j==0){cazeReduction=Object.assign(cazeReduction,{pourcentRed:_ligneCaze3.caze[0]});}else if(j==1){cazeReduction=Object.assign(cazeReduction,{mntRed:_ligneCaze3.caze[1]});}}}}else if(_this.state.tabChoix[i].length===1){var annuel=_this.state.tabChoix[i];for(var j=0;j<annuel.length;j++){var _ligneCaze4=annuel[j];cazeAnnuel=Object.assign(cazeAnnuel,{mntAnnuel:_ligneCaze4.caze[j]});}}}// mettre dans le tableau niveau\nfor(var i=0;i<_this.state.niveaux.length;i++){if(_this.state.niveaux[i].typePayEleve.label==\"Annuel\"){_this.setState(_defineProperty({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{annuelle:cazeAnnuel}):el;})},\"niveaux\",_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mntInitiale:_this.state.mntInitial}):el;})));}else if(_this.state.niveaux[i].typePayEleve.label==\"Annuel avec réduction\"){_this.setState(_defineProperty({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{reduction:cazeReduction}):el;})},\"niveaux\",_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mntInitiale:_this.state.mntInitial}):el;})));}else if(_this.state.niveaux[i].typePayEleve.label==\"Mensuelle\"){_this.setState(_defineProperty({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mensuel:cazeMensuel}):el;})},\"niveaux\",_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mntInitiale:_this.state.mntInitial}):el;})));}else if(_this.state.niveaux[i].typePayEleve.label==\"2 Tranche\"){_this.setState(_defineProperty({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{tranches2:[].concat(_toConsumableArray(_this.state.niveaux[0].tranches2),[cazeTranche2])}):el;})},\"niveaux\",_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mntInitiale:_this.state.mntInitial}):el;})));}else if(_this.state.niveaux[i].typePayEleve.label==\"3 Tranches\"){_this.setState(_defineProperty({niveaux:_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{tranches3:[].concat(_toConsumableArray(_this.state.niveaux[0].tranches3),[cazeTranche3])}):el;})},\"niveaux\",_this.state.niveaux.map(function(el,id){return id===i?Object.assign(el,{mntInitiale:_this.state.mntInitial}):el;})));}}console.log(_this.state.tabChoix);console.log(_this.state.niveaux);console.log(_this.state.tabIdFraisNivDelete);jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/UpdNiveau.php?id='+_this.state.idNiveau,type:'POST',data:{formationId:_this.state.selectedFormation.value,nomNiveau:_this.state.nomNiveau,duree:_this.state.duree,periodeNiv:_this.state.periodeNiv,mntInitial:_this.state.mntInitial,niveaux:_this.state.niveaux,tabIdFraisNiv:_this.state.tabIdFraisNivDelete,year:year,userId:userId},dataType:'json',success:function success(code_html,statut){if(code_html.Result==\"OK\"){_this.props.history.push('/Niveaux');}else if(code_html.Result==\"KO\"){alert(\"erreur,l'un de vos champs est vide!!\");}}});};_this.state={idNiveau:'',formations:[],selectedFormation:'',nomNiveau:'',duree:'',periodeNiv:'',mntInitial:0,niveaux:[],indexLignFormationASupprimer:'',modal:false,typesPayEleve:[],selectedTypePayEleve:'',checked:false,tabChoix:[],idFraisNivASupprimer:'',tabIdFraisNivDelete:[]};return _this;}_createClass(ModifNiveau,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(JSON.parse(localStorage.getItem('userPermissions'))!=null){var idNiveau=this.props.location.state.idNiveau;axios.get(process.env.REACT_APP_API_URL+'Back_mediatraining/GetNiveauByIdModif.php?id='+idNiveau).then(function(res){_this2.setState({idNiveau:res.data[0].idNiveau,selectedFormation:res.data[0].formation,nomNiveau:res.data[0].nomNiveau,duree:res.data[0].duree,periodeNiv:res.data[0].periodeNiv,mntInitial:res.data[1][0].mntInitiale,niveaux:res.data[1]},function(){console.log(_this2.state.niveaux);});});axios.get(process.env.REACT_APP_API_URL+'Back_mediatraining/GetChoixModif.php?id='+idNiveau).then(function(res){_this2.setState({tabChoix:res.data},function(){console.log(_this2.state.tabChoix);});});var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var anneeScolaire=userPermissions[0].anneeScolaire;jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/SelectFormations.php',type:'POST',data:{anneeScolaire:anneeScolaire},dataType:'json',success:function success(code_html,statut){console.log(code_html);_this2.setState({formations:code_html});}});axios.get(process.env.REACT_APP_API_URL+'Back_mediatraining/SelectTypesPayEleve.php').then(function(res){console.log(res);_this2.setState({typesPayEleve:res.data});});}}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{id:\"page-wrapper\",style:{minHeight:'263px',marginLeft:'0px'}},React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"div\",{className:\"row bg-title\"},React.createElement(\"div\",{className:\"col-lg-12\"},React.createElement(\"h4\",{className:\"page-title\"},\"Modification niveau\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-sm-12\"},React.createElement(\"div\",{className:\"white-box\"},React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-start',alignItems:'center',marginBottom:'10px',marginRight:'20px'}},React.createElement(Link,{to:\"/Niveaux\"},\" \",React.createElement(\"button\",{style:{background:'#DC143C',border:'1px solid #DC143C',borderRadius:'5px'},type:\"button\",className:\"btn btn-info\"},\" \",React.createElement(\"i\",{style:{paddingRight:'5px'},className:\"fas fa-arrow-circle-left\"}),\"Retour\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Formation\"),React.createElement(Select,{value:this.state.selectedFormation,isClearable:true,isSearchable:true,onChange:this.modifFormation,options:this.state.formations}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Niveau\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"text\",className:\"form-control\",value:this.state.nomNiveau,onChange:this.modifNomNiveau}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Dur\\xE9e\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"text\",className:\"form-control\",value:this.state.duree,onChange:this.modifDuree}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Obs\\xE9rvation d'attestation (dur\\xE9e formation)\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"text\",className:\"form-control\",value:this.state.periodeNiv,onChange:this.modifPeriodeNiveau}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Montant initial\"),React.createElement(\"input\",{style:{backgroundColor:'white',borderRadius:'5px',border:'solid 1px #B3B3B3'},type:\"number\",className:\"form-control\",value:this.state.mntInitial,onChange:this.modifMntInitial})))),this.state.mntInitial!==0?React.createElement(\"div\",{className:\"row\"},React.createElement(\"table\",{style:{marginTop:'10px'},className:\"table table-bordered\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Type paiement el\\xE8ve\"),React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Montant\"),React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Suppression\"))),this.state.niveaux.map(function(el,index){return React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"td\",null,React.createElement(Select,{className:\"posAnnee\",value:el.typePayEleve,isClearable:true,isSearchable:true,onChange:function onChange(e){return _this3.modifTypePayEleve(e,index);},options:_this3.state.typesPayEleve}),\"  \"),React.createElement(\"td\",{style:{textAlign:'center'}},_this3.state.tabChoix[index]==null?null:React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-evenly',marginTop:'-15px'}},_this3.state.tabChoix[index].map(function(el,indice){return React.createElement(\"div\",null,React.createElement(\"p\",null,el.choixPay),React.createElement(\"input\",{className:\"tranche\",type:\"number\",value:el.caze[indice],onChange:function onChange(e){return _this3.add(e,index,indice,el.choixPay);},style:{textAlign:'center',height:'38px',borderRadius:'5px',border:'solid 1px #B3B3B3'}}));}))),React.createElement(\"td\",{style:{textAlign:'center'}},React.createElement(\"button\",{className:\"buttonSupprimer\",onClick:function onClick(){return _this3.toggleLignFormation(index,el.idFraisNiv);}},React.createElement(\"i\",{style:{color:'white'},className:\"fas fa-trash-alt\"})))));})),React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-start',marginLeft:'15px'}},React.createElement(Button,{style:{borderRadius:'5px'},onClick:this.additionLignFormation,color:\"secondary\"},React.createElement(\"i\",{className:\"fas fa-plus-circle\"}),\"Ajouter ligne\"))):null,React.createElement(Modal,{isOpen:this.state.modal,toggle:this.nonDeleteLignFormation,className:this.props.className,fade:false},React.createElement(ModalHeader,{toggle:this.nonDeleteLignFormation},\" \",React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',width:'465px'}},React.createElement(\"img\",{width:\"30%\",src:\"./images/deleteModal.png\",alt:\"..\"}))),React.createElement(ModalBody,null,React.createElement(\"div\",{style:{fontFamily:'Montserrat, sans-serif',FontSize:'14px',FontWeight:'700',LineHeight:'18.375px'}},React.createElement(\"div\",{style:{display:'flex',justifyContent:'center'}},React.createElement(\"p\",null,\"\\xCAtes-Vous s\\xFBr de vouloir supprimer ce niveau ?\")),React.createElement(\"div\",{className:\"hvr-push\",style:{display:'flex',justifyContent:'space-around',marginBottom:'15px'}},React.createElement(\"div\",null,React.createElement(\"button\",{onClick:function onClick(){return _this3.deleteLignFormation();},style:{backgroundColor:'#00FF7F',borderRadius:'5px',color:'white'}},React.createElement(\"i\",{style:{color:'white'},className:\"far fa-thumbs-up\"}),\"Oui\")),React.createElement(\"div\",null,React.createElement(\"button\",{onClick:function onClick(){return _this3.nonDeleteLignFormation();},style:{backgroundColor:'#D9534F',borderRadius:'5px',color:'white'}},React.createElement(\"i\",{style:{color:'white'},className:\"far fa-thumbs-down\"}),\"Non\")))))),React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',marginBottom:'10px'}},React.createElement(\"button\",{style:{borderRadius:'5px'},type:\"button\",className:\"btn btn-success\",onClick:this.modif},\"Confirmer\")))))));}}]);return ModifNiveau;}(Component);export default withRouter(ModifNiveau);","map":{"version":3,"sources":["C:/wamp/www/savoir_plus_prod/mediatraining/src/ModifNiveau.js"],"names":["React","Component","axios","jQuery","Link","BrowserRouter","Router","Route","Switch","withRouter","HashRouter","Redirect","Select","Button","Modal","ModalHeader","ModalBody","ModalFooter","ModifNiveau","props","modifFormation","selectedFormation","setState","console","log","modifNomNiveau","event","nomNiveau","target","value","modifPeriodeNiveau","periodeNiv","modifMntInitial","mntInitial","stateCopy","state","tabChoix","i","length","sousTabChoix","j","choixPay","caze","pRed","nbMois","additionLignFormation","element","idFraisNiv","typePayEleve","annuelle","reduction","mensuel","tranches2","tranches3","niveaux","modifDuree","duree","modifTypePayEleve","selectedTypePayEleve","indexTypePayEleve","map","el","id","Object","assign","get","process","env","REACT_APP_API_URL","then","res","data","posAnnee","document","getElementsByClassName","indexAnnuel","add","indexLignTab","indice","nomChoix","include","idSousTypePayEleve","undefined","mntTranche","nbrMois","montantInitiale","parseInt","nombreMois","mntInitiale","mntCalcul","pourcentageRed","pourcentageReduction","toggleLignFormation","indexLignFormation","prevState","modal","idFraisNivASupprimer","indexLignFormationASupprimer","deleteLignFormation","splice","tabIdFraisNivDelete","nonDeleteLignFormation","modif","userPermissions","JSON","parse","localStorage","getItem","userId","idUser","year","Date","getFullYear","cazeTranche3","tranche3","tranche","cazeTranche2","tranche2","cazeMensuel","mntMensuel","cazeReduction","pourcentRed","mntRed","cazeAnnuel","mntAnnuel","ligneCaze","push","annuel","label","ajax","url","idNiveau","type","formationId","tabIdFraisNiv","dataType","success","code_html","statut","Result","history","alert","formations","typesPayEleve","checked","location","formation","anneeScolaire","minHeight","marginLeft","display","justifyContent","alignItems","marginBottom","marginRight","background","border","borderRadius","paddingRight","backgroundColor","marginTop","textAlign","index","e","height","color","className","width","fontFamily","FontSize","FontWeight","LineHeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom'\r\nimport Select from 'react-select';\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\n\r\nclass ModifNiveau extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            idNiveau: '',\r\n            formations: [],\r\n            selectedFormation: '',\r\n            nomNiveau: '',\r\n            duree: '',\r\n            periodeNiv: '',\r\n            mntInitial: 0,\r\n            niveaux: [],\r\n            indexLignFormationASupprimer: '',\r\n            modal: false,\r\n            typesPayEleve: [],\r\n            selectedTypePayEleve: '',\r\n            checked: false,\r\n            tabChoix: [],\r\n            idFraisNivASupprimer: '',\r\n            tabIdFraisNivDelete: []\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (JSON.parse((localStorage.getItem('userPermissions'))) != null) {\r\n            let idNiveau = this.props.location.state.idNiveau;\r\n            axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/GetNiveauByIdModif.php?id=' + idNiveau).then(res => {\r\n                this.setState({\r\n                    idNiveau: res.data[0].idNiveau,\r\n                    selectedFormation: res.data[0].formation,\r\n                    nomNiveau: res.data[0].nomNiveau,\r\n                    duree: res.data[0].duree,\r\n                    periodeNiv: res.data[0].periodeNiv,\r\n                    mntInitial: res.data[1][0].mntInitiale,\r\n                    niveaux: res.data[1]\r\n                }, () => {\r\n                    console.log(this.state.niveaux)\r\n                })\r\n            })\r\n            axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/GetChoixModif.php?id=' + idNiveau).then(res => {\r\n                this.setState({\r\n                    tabChoix: res.data\r\n                }, () => {\r\n                    console.log(this.state.tabChoix)\r\n                })\r\n            })\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectFormations.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire\r\n                },\r\n                dataType: 'json',\r\n                success: (code_html, statut) => {\r\n                    console.log(code_html)\r\n                    this.setState({\r\n                        formations: code_html\r\n                    });\r\n                }\r\n            });\r\n            axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectTypesPayEleve.php').then(res => {\r\n                console.log(res)\r\n                this.setState({\r\n                    typesPayEleve: res.data\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    modifFormation = selectedFormation => {\r\n        this.setState({ selectedFormation });\r\n        console.log(`Formation selected:`, selectedFormation);\r\n    };\r\n\r\n    modifNomNiveau = (event) => {\r\n        this.setState({\r\n            nomNiveau: event.target.value\r\n        });\r\n    }\r\n\r\n    modifPeriodeNiveau = (event) => {\r\n        this.setState({\r\n            periodeNiv: event.target.value\r\n        });\r\n    }\r\n\r\n    modifMntInitial = (event) => {\r\n        this.setState({\r\n            mntInitial: event.target.value\r\n        }, () => {\r\n            var stateCopy = this.state.tabChoix;\r\n\r\n            for (var i = 0; i < this.state.tabChoix.length; i++) {\r\n                var sousTabChoix = this.state.tabChoix[i]\r\n                for (var j = 0; j < sousTabChoix.length; j++) {\r\n                    if (sousTabChoix[j].choixPay == \"Annuel\") {\r\n                        stateCopy[i][0].caze[0] = this.state.mntInitial;\r\n                    }\r\n                    else if (sousTabChoix[j].choixPay == \"Montant réduction\") {\r\n                        var pRed = stateCopy[i][0].caze[0]\r\n                        stateCopy[i][1].caze[1] = this.state.mntInitial - (this.state.mntInitial / pRed);\r\n                    }\r\n                    else if (sousTabChoix[j].choixPay == \"Montant mensuel\") {\r\n                        var nbMois = stateCopy[i][0].caze[0]\r\n                        stateCopy[i][1].caze[1] = this.state.mntInitial / nbMois;\r\n                    }\r\n                }\r\n            }\r\n            this.setState({\r\n                tabChoix: stateCopy\r\n            }, () => {\r\n                console.log(this.state.tabChoix)\r\n            });\r\n        });\r\n    }\r\n\r\n    additionLignFormation = () => {\r\n        let element = { idFraisNiv: -1, typePayEleve: '', annuelle: [], reduction: [], mensuel: [], tranches2: [], tranches3: [] }\r\n        this.setState({\r\n            niveaux: [...this.state.niveaux, element]\r\n        })\r\n    }\r\n\r\n    modifDuree = (event) => {\r\n        this.setState({\r\n            duree: event.target.value\r\n        });\r\n    }\r\n\r\n    modifTypePayEleve = (selectedTypePayEleve, indexTypePayEleve) => {\r\n        if (selectedTypePayEleve != null) {\r\n            let typePayEleve = selectedTypePayEleve;\r\n            this.setState({\r\n                selectedTypePayEleve: selectedTypePayEleve,\r\n                niveaux: this.state.niveaux.map((el, id) => (id === indexTypePayEleve ? Object.assign(el, { typePayEleve: typePayEleve }) : el))\r\n            }, () => {\r\n                axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/GetChoix.php?id=' + selectedTypePayEleve.value).then(res => {\r\n                    console.log(res)\r\n                    if (res.data.length === 1) {\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexTypePayEleve] = res.data;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        }, () => {\r\n                            console.log(this.state.tabChoix)\r\n                            const posAnnee = document.getElementsByClassName('posAnnee');\r\n                            console.log(posAnnee.length - 1)\r\n                            let indexAnnuel = posAnnee.length - 1\r\n                            let mntInitial = this.state.mntInitial\r\n                            var stateCopy = this.state.tabChoix;\r\n                            stateCopy[indexAnnuel][0].caze[0] = mntInitial;\r\n                            this.setState({\r\n                                tabChoix: stateCopy\r\n                            });\r\n                        })\r\n                    }\r\n                    else if (res.data.length > 0) {\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexTypePayEleve] = res.data;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        }, () => {\r\n                            console.log(this.state.tabChoix)\r\n                        })\r\n                    }\r\n                    else {\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexTypePayEleve] = null;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        }, () => {\r\n                            console.log(this.state.tabChoix)\r\n                        })\r\n                    }\r\n                })\r\n            });\r\n        }\r\n    }\r\n\r\n    add = (event, indexLignTab, indice, nomChoix) => {\r\n        let include = this.state.tabChoix[indexLignTab][indice].idSousTypePayEleve\r\n        console.log(include)\r\n        if (include != undefined) {\r\n            let mntTranche = event.target.value;\r\n            var stateCopy = this.state.tabChoix;\r\n            stateCopy[indexLignTab][indice].caze[indice] = mntTranche;\r\n            this.setState({\r\n                tabChoix: stateCopy\r\n            }, () => {\r\n                console.log(this.state.tabChoix)\r\n            });\r\n        }\r\n        else {\r\n            if (nomChoix == \"Nombre mois\") {\r\n                let nbrMois = event.target.value;\r\n                var stateCopy = this.state.tabChoix;\r\n                stateCopy[indexLignTab][indice].caze[indice] = nbrMois;\r\n                this.setState({\r\n                    tabChoix: stateCopy\r\n                }, () => {\r\n                    let montantInitiale = parseInt(this.state.mntInitial)\r\n                    let nombreMois = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                    if (montantInitiale > 0 && nombreMois > 0) {\r\n                        let mntInitiale = parseInt(this.state.mntInitial);\r\n                        let nbrMois = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        let mntCalcul = mntInitiale / nbrMois\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexLignTab][indice + 1].caze[indice + 1] = mntCalcul;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            else if (nomChoix == \"Réduction %\") {\r\n                let pourcentageRed = event.target.value;\r\n                var stateCopy = this.state.tabChoix;\r\n                stateCopy[indexLignTab][indice].caze[indice] = pourcentageRed;\r\n                this.setState({\r\n                    tabChoix: stateCopy\r\n                }, () => {\r\n                    let montantInitiale = parseInt(this.state.mntInitial)\r\n                    let pourcentageReduction = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                    if (montantInitiale > 0 && pourcentageReduction > 0) {\r\n                        let mntInitiale = parseInt(this.state.mntInitial);\r\n                        let pourcentageRed = parseInt(this.state.tabChoix[indexLignTab][indice].caze[indice])\r\n                        let mntCalcul = mntInitiale - ((mntInitiale * pourcentageRed) / 100)\r\n                        var stateCopy = this.state.tabChoix;\r\n                        stateCopy[indexLignTab][indice + 1].caze[indice + 1] = mntCalcul;\r\n                        this.setState({\r\n                            tabChoix: stateCopy\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    toggleLignFormation = (indexLignFormation, idFraisNiv) => {\r\n        this.setState(prevState => ({\r\n            modal: !prevState.modal,\r\n            idFraisNivASupprimer: idFraisNiv,\r\n            indexLignFormationASupprimer: indexLignFormation\r\n        }));\r\n    }\r\n\r\n    deleteLignFormation = () => {\r\n        this.state.niveaux.splice(this.state.indexLignFormationASupprimer, 1)\r\n        this.state.tabChoix.splice(this.state.indexLignFormationASupprimer, 1)\r\n        let idFraisNivASupprimer = this.state.idFraisNivASupprimer\r\n        this.setState({\r\n            tabIdFraisNivDelete: [...this.state.tabIdFraisNivDelete, idFraisNivASupprimer]\r\n        });\r\n        this.setState(prevState => ({\r\n            modal: !prevState.modal\r\n        }));\r\n    }\r\n\r\n    nonDeleteLignFormation = () => {\r\n        this.setState(prevState => ({\r\n            modal: !prevState.modal\r\n        }));\r\n    }\r\n\r\n    modif = () => {\r\n        var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n        var userId = userPermissions[0].idUser\r\n        let year = new Date().getFullYear();\r\n        // recuperer et ranger valeur tableau\r\n        var cazeTranche3 = { typePayEleve: '', tranche3: [{ tranche: [], idSousTypePayEleve: [] }] }\r\n        var cazeTranche2 = { typePayEleve: '', tranche2: [{ tranche: [], idSousTypePayEleve: [] }] }\r\n        var cazeMensuel = { typePayEleve: '', nbrMois: '', mntMensuel: '' }\r\n        var cazeReduction = { typePayEleve: '', pourcentRed: '', mntRed: '' }\r\n        var cazeAnnuel = { typePayEleve: '', mntAnnuel: '' }\r\n        for (var i = 0; i < this.state.niveaux.length; i++) {\r\n            if (this.state.tabChoix[i].length === 3) {\r\n                let tranche3 = this.state.tabChoix[i]\r\n                for (var j = 0; j < tranche3.length; j++) {\r\n                    let ligneCaze = tranche3[j];\r\n                    if (j == 0) {\r\n                        cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[0])\r\n                        cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                        console.log(ligneCaze.idSousTypePayEleve[0])\r\n                    }\r\n                    else if (j == 1) {\r\n                        cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[1])\r\n                        cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                    }\r\n                    else if (j == 2) {\r\n                        cazeTranche3.tranche3[0].tranche.push(ligneCaze.caze[2])\r\n                        cazeTranche3.tranche3[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                    }\r\n                }\r\n            }\r\n            else if (this.state.tabChoix[i].length === 2) {\r\n                if (this.state.tabChoix[i][0].idSousTypePayEleve != undefined) {\r\n                    let tranche2 = this.state.tabChoix[i]\r\n                    for (var j = 0; j < tranche2.length; j++) {\r\n                        let ligneCaze = tranche2[j]\r\n                        if (j == 0) {\r\n                            cazeTranche2.tranche2[0].tranche.push(ligneCaze.caze[0])\r\n                            cazeTranche2.tranche2[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                        }\r\n                        else if (j == 1) {\r\n                            cazeTranche2.tranche2[0].tranche.push(ligneCaze.caze[1])\r\n                            cazeTranche2.tranche2[0].idSousTypePayEleve.push(ligneCaze.idSousTypePayEleve)\r\n                        }\r\n                    }\r\n                }\r\n                else if (this.state.tabChoix[i][0].choixPay == \"Nombre mois\" || this.state.tabChoix[i][0].choixPay == \"Montant mensuel\") {\r\n                    let mensuel = this.state.tabChoix[i]\r\n                    for (var j = 0; j < mensuel.length; j++) {\r\n                        let ligneCaze = mensuel[j]\r\n                        if (j == 0) {\r\n                            cazeMensuel = Object.assign(cazeMensuel, { nbrMois: ligneCaze.caze[0] })\r\n                        }\r\n                        else if (j == 1) {\r\n                            cazeMensuel = Object.assign(cazeMensuel, { mntMensuel: ligneCaze.caze[1] })\r\n                        }\r\n                    }\r\n                }\r\n                else if (this.state.tabChoix[i][0].choixPay == \"Réduction %\" || this.state.tabChoix[i][0].choixPay == \"Montant réduction\") {\r\n                    let reduction = this.state.tabChoix[i]\r\n                    for (var j = 0; j < reduction.length; j++) {\r\n                        let ligneCaze = reduction[j]\r\n                        if (j == 0) {\r\n                            cazeReduction = Object.assign(cazeReduction, { pourcentRed: ligneCaze.caze[0] })\r\n                        }\r\n                        else if (j == 1) {\r\n                            cazeReduction = Object.assign(cazeReduction, { mntRed: ligneCaze.caze[1] })\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (this.state.tabChoix[i].length === 1) {\r\n                let annuel = this.state.tabChoix[i]\r\n                for (var j = 0; j < annuel.length; j++) {\r\n                    let ligneCaze = annuel[j]\r\n                    cazeAnnuel = Object.assign(cazeAnnuel, { mntAnnuel: ligneCaze.caze[j] })\r\n                }\r\n            }\r\n        }\r\n        // mettre dans le tableau niveau\r\n        for (var i = 0; i < this.state.niveaux.length; i++) {\r\n            if (this.state.niveaux[i].typePayEleve.label == \"Annuel\") {\r\n                this.setState({\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { annuelle: cazeAnnuel }) : el)),\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mntInitiale: this.state.mntInitial }) : el)),\r\n                });\r\n            }\r\n            else if (this.state.niveaux[i].typePayEleve.label == \"Annuel avec réduction\") {\r\n                this.setState({\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { reduction: cazeReduction }) : el)),\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mntInitiale: this.state.mntInitial }) : el)),\r\n                });\r\n            }\r\n            else if (this.state.niveaux[i].typePayEleve.label == \"Mensuelle\") {\r\n                this.setState({\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mensuel: cazeMensuel }) : el)),\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mntInitiale: this.state.mntInitial }) : el)),\r\n                });\r\n            }\r\n            else if (this.state.niveaux[i].typePayEleve.label == \"2 Tranche\") {\r\n                this.setState({\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { tranches2: [...this.state.niveaux[0].tranches2, cazeTranche2] }) : el)),\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mntInitiale: this.state.mntInitial }) : el)),\r\n                });\r\n            }\r\n            else if (this.state.niveaux[i].typePayEleve.label == \"3 Tranches\") {\r\n                this.setState({\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { tranches3: [...this.state.niveaux[0].tranches3, cazeTranche3] }) : el)),\r\n                    niveaux: this.state.niveaux.map((el, id) => (id === i ? Object.assign(el, { mntInitiale: this.state.mntInitial }) : el)),\r\n                });\r\n            }\r\n        }\r\n        console.log(this.state.tabChoix)\r\n        console.log(this.state.niveaux)\r\n        console.log(this.state.tabIdFraisNivDelete)\r\n        jQuery.ajax({\r\n            url: process.env.REACT_APP_API_URL + 'Back_mediatraining/UpdNiveau.php?id=' + this.state.idNiveau,\r\n            type: 'POST',\r\n            data: {\r\n                formationId: this.state.selectedFormation.value,\r\n                nomNiveau: this.state.nomNiveau,\r\n                duree: this.state.duree,\r\n                periodeNiv: this.state.periodeNiv,\r\n                mntInitial: this.state.mntInitial,\r\n                niveaux: this.state.niveaux,\r\n                tabIdFraisNiv: this.state.tabIdFraisNivDelete,\r\n                year: year,\r\n                userId: userId\r\n            },\r\n            dataType: 'json',\r\n            success: (code_html, statut) => {\r\n                if (code_html.Result == \"OK\") {\r\n                    this.props.history.push('/Niveaux');\r\n                }\r\n                else if (code_html.Result == \"KO\") {\r\n                    alert(\"erreur,l'un de vos champs est vide!!\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px', marginLeft: '0px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Modification niveau</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-12\">\r\n                            <div className=\"white-box\">\r\n                                <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginBottom: '10px', marginRight: '20px' }}>\r\n                                    <Link to=\"/Niveaux\" > <button style={{ background: '#DC143C', border: '1px solid #DC143C', borderRadius: '5px' }} type=\"button\" className=\"btn btn-info\"> <i style={{ paddingRight: '5px' }} className=\"fas fa-arrow-circle-left\"></i>Retour</button></Link>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Formation</label>\r\n                                            <Select\r\n                                                value={this.state.selectedFormation}\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={this.modifFormation}\r\n                                                options={this.state.formations}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Niveau</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"text\" className=\"form-control\" value={this.state.nomNiveau} onChange={this.modifNomNiveau} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Durée</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"text\" className=\"form-control\" value={this.state.duree} onChange={this.modifDuree} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Obsérvation d'attestation (durée formation)</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"text\" className=\"form-control\" value={this.state.periodeNiv} onChange={this.modifPeriodeNiveau} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Montant initial</label>\r\n                                            <input style={{ backgroundColor: 'white', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} type=\"number\" className=\"form-control\" value={this.state.mntInitial} onChange={this.modifMntInitial} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                {this.state.mntInitial !== 0 ?\r\n                                    (<div className=\"row\">\r\n                                        <table style={{ marginTop: '10px' }} className=\"table table-bordered\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Type paiement elève</th>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Montant</th>\r\n                                                    <th style={{ textAlign: 'center' }} scope=\"col\">Suppression</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            {this.state.niveaux.map((el, index) =>\r\n                                                <tbody>\r\n                                                    <tr>\r\n                                                        <td><Select\r\n                                                            className='posAnnee'\r\n                                                            value={el.typePayEleve}\r\n                                                            isClearable={true}\r\n                                                            isSearchable={true}\r\n                                                            onChange={(e) => this.modifTypePayEleve(e, index)}\r\n                                                            options={this.state.typesPayEleve}\r\n                                                        />  </td>\r\n                                                        <td style={{ textAlign: 'center' }}>{this.state.tabChoix[index] == null ? (null) : (<div style={{ display: 'flex', justifyContent: 'space-evenly', marginTop: '-15px' }}>{this.state.tabChoix[index].map((el, indice) => <div><p>{el.choixPay}</p><input className=\"tranche\" type=\"number\" value={el.caze[indice]} onChange={(e) => this.add(e, index, indice, el.choixPay)} style={{ textAlign: 'center', height: '38px', borderRadius: '5px', border: 'solid 1px #B3B3B3' }} /></div>)}</div>)}</td>\r\n                                                        <td style={{ textAlign: 'center' }}><button className='buttonSupprimer' onClick={() => this.toggleLignFormation(index, el.idFraisNiv)}><i style={{ color: 'white' }} className=\"fas fa-trash-alt\"></i></button></td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            )}\r\n                                        </table>\r\n                                        <div style={{ display: 'flex', justifyContent: 'flex-start', marginLeft: '15px' }}>\r\n                                            <Button style={{ borderRadius: '5px' }} onClick={this.additionLignFormation} color=\"secondary\"><i className=\"fas fa-plus-circle\"></i>Ajouter ligne</Button>\r\n                                        </div>\r\n                                    </div>) : (null)}\r\n                                <Modal isOpen={this.state.modal} toggle={this.nonDeleteLignFormation} className={this.props.className} fade={false}>\r\n                                    <ModalHeader toggle={this.nonDeleteLignFormation}> <div style={{ display: 'flex', justifyContent: 'center', width: '465px' }}><img width='30%' src=\"./images/deleteModal.png\" alt=\"..\" /></div></ModalHeader>\r\n                                    <ModalBody>\r\n                                        <div style={{ fontFamily: 'Montserrat, sans-serif', FontSize: '14px', FontWeight: '700', LineHeight: '18.375px' }}>\r\n                                            <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                                <p>Êtes-Vous sûr de vouloir supprimer ce niveau ?</p>\r\n                                            </div>\r\n                                            <div className='hvr-push' style={{ display: 'flex', justifyContent: 'space-around', marginBottom: '15px' }}>\r\n                                                <div><button onClick={() => this.deleteLignFormation()} style={{ backgroundColor: '#00FF7F', borderRadius: '5px', color: 'white' }}><i style={{ color: 'white' }} className=\"far fa-thumbs-up\"></i>Oui</button></div>\r\n                                                <div><button onClick={() => this.nonDeleteLignFormation()} style={{ backgroundColor: '#D9534F', borderRadius: '5px', color: 'white' }}><i style={{ color: 'white' }} className=\"far fa-thumbs-down\"></i>Non</button></div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ModalBody>\r\n                                </Modal>\r\n                                <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px' }}>\r\n                                    <button style={{ borderRadius: '5px' }} type=\"button\" className=\"btn btn-success\" onClick={this.modif}>Confirmer</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(ModifNiveau);"]},"metadata":{},"sourceType":"module"}