{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp\\\\www\\\\savoir_plus_dev_nv\\\\mediatraining\\\\src\\\\PaiementEtudGroup.js\";\nimport React, { Component, Fragment } from 'react';\nimport axios from 'axios';\nimport jQuery from 'jquery';\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom';\nimport Select from 'react-select';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Slide, Zoom, Flip, Bounce } from 'react-toastify';\nimport Checkbox from 'rc-checkbox';\nimport 'rc-checkbox/assets/index.css';\n\nclass PaiementEtudGroup extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addImp = selectedTypeImpr => {\n      if (selectedTypeImpr != null) {\n        this.setState({\n          selectedTypeImpr: selectedTypeImpr\n        });\n      } else {\n        this.setState({\n          selectedTypeImpr: ''\n        });\n      }\n    };\n\n    this.addFormation = selectedFormation => {\n      if (selectedFormation != null) {\n        var userPermissions = JSON.parse(localStorage.getItem('userPermissions'));\n        var anneeScolaire = userPermissions[0].anneeScolaire;\n        this.setState({\n          selectedFormation: selectedFormation\n        }, () => {\n          jQuery.ajax({\n            url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectGroupesSelonForm.php',\n            type: 'POST',\n            data: {\n              formationId: selectedFormation.value,\n              anneeScolaire: anneeScolaire\n            },\n            dataType: 'json',\n            success: (code_html, statut) => {\n              this.setState({\n                groupe: code_html\n              });\n            }\n          });\n        });\n      } else {\n        this.setState({\n          selectedFormation: ''\n        });\n      }\n    };\n\n    this.addGroupe = selectedGroupe => {\n      if (selectedGroupe != null) {\n        this.setState({\n          selectedGroupe: selectedGroupe\n        });\n      } else {\n        this.setState({\n          selectedGroupe: ''\n        });\n      }\n    };\n\n    this.imprToday = () => {\n      if (this.state.selectedGroupe != '') {\n        var userPermissions = JSON.parse(localStorage.getItem('userPermissions'));\n        var anneeScolaire = userPermissions[0].anneeScolaire; // Date aujourdhui\n\n        let dateToday = new Date();\n        let month = '' + (dateToday.getMonth() + 1);\n        let day = '' + dateToday.getDate();\n        let year = dateToday.getFullYear();\n        if (month.length < 2) month = '0' + month;\n        if (day.length < 2) day = '0' + day;\n        var today = [year, month, day].join('-'); //\n\n        jQuery.ajax({\n          url: process.env.REACT_APP_API_URL + 'Back_mediatraining/ImprPayGroupe.php',\n          type: 'POST',\n          data: {\n            anneeScolaire: anneeScolaire,\n            today: today,\n            groupeId: this.state.selectedGroupe.value\n          },\n          dataType: 'json',\n          success: function (code_html, statut) {\n            var server_path = code_html.server_path;\n            var file_path = code_html.file_path;\n            var path = server_path + file_path;\n            window.open(path, \"_blank\");\n          }\n        });\n      } else {\n        toast.error('⛔ Veuillez selectionner le groupe correspondant !!', {\n          containerId: 'A'\n        });\n      }\n    };\n\n    this.impr = () => {\n      if (this.state.selectedGroupe != '') {\n        var userPermissions = JSON.parse(localStorage.getItem('userPermissions'));\n        var anneeScolaire = userPermissions[0].anneeScolaire;\n        jQuery.ajax({\n          url: process.env.REACT_APP_API_URL + 'Back_mediatraining/ImprPayGroupe.php',\n          type: 'POST',\n          data: {\n            anneeScolaire: anneeScolaire,\n            today: '',\n            groupeId: this.state.selectedGroupe.value\n          },\n          dataType: 'json',\n          success: function (code_html, statut) {\n            var server_path = code_html.server_path;\n            var file_path = code_html.file_path;\n            var path = server_path + file_path;\n            window.open(path, \"_blank\");\n          }\n        });\n      } else {\n        toast.error('⛔ Veuillez selectionner le groupe correspondant !!', {\n          containerId: 'A'\n        });\n      }\n    };\n\n    this.state = {\n      formation: [],\n      selectedFormation: '',\n      groupe: [],\n      selectedGroupe: '',\n      typeImp: [{\n        label: 'Global',\n        value: '1'\n      }, {\n        label: \"Aujourdhui\",\n        value: '2'\n      }],\n      selectedTypeImpr: ''\n    };\n  }\n\n  componentDidMount() {\n    if (JSON.parse(localStorage.getItem('userPermissions')) != null) {\n      var userPermissions = JSON.parse(localStorage.getItem('userPermissions'));\n      var anneeScolaire = userPermissions[0].anneeScolaire;\n      jQuery.ajax({\n        url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectFormations.php',\n        type: 'POST',\n        data: {\n          anneeScolaire: anneeScolaire\n        },\n        dataType: 'json',\n        success: (code_html, statut) => {\n          this.setState({\n            formation: code_html\n          });\n        }\n      });\n    } else {\n      document.location = '/';\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"page-wrapper\",\n      style: {\n        minHeight: '263px',\n        marginLeft: '0px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row bg-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Paiments groupes\"))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"white-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Type impression\"), React.createElement(Select, {\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addImp(e),\n      options: this.state.typeImp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }))), this.state.selectedTypeImpr.value == 1 ? React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Formations\"), React.createElement(Select, {\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addFormation(e),\n      options: this.state.formation,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Groupes\"), React.createElement(Select, {\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addGroupe(e),\n      options: this.state.groupe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    })))) : null, this.state.selectedTypeImpr.value == 2 ? React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Formations\"), React.createElement(Select, {\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addFormation(e),\n      options: this.state.formation,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"Groupes\"), React.createElement(Select, {\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addGroupe(e),\n      options: this.state.groupe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      style: {\n        borderRadius: '5px',\n        backgroundColor: '#761C19',\n        borderColor: '#761C19'\n      },\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.impr,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        color: 'white',\n        paddingRight: '5px'\n      },\n      class: \"fas fa-print\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }), \"Impression global\")) : null)), React.createElement(ToastContainer, {\n      transition: Flip,\n      enableMultiContainer: true,\n      containerId: 'A',\n      position: toast.POSITION.TOP_RIGHT,\n      autoClose: 2500,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default withRouter(PaiementEtudGroup);","map":{"version":3,"sources":["C:/wamp/www/savoir_plus_dev_nv/mediatraining/src/PaiementEtudGroup.js"],"names":["React","Component","Fragment","axios","jQuery","Link","BrowserRouter","Router","Route","Switch","withRouter","HashRouter","Redirect","Select","DatePicker","Button","Modal","ModalHeader","ModalBody","ModalFooter","ToastContainer","toast","Slide","Zoom","Flip","Bounce","Checkbox","PaiementEtudGroup","constructor","props","addImp","selectedTypeImpr","setState","addFormation","selectedFormation","userPermissions","JSON","parse","localStorage","getItem","anneeScolaire","ajax","url","process","env","REACT_APP_API_URL","type","data","formationId","value","dataType","success","code_html","statut","groupe","addGroupe","selectedGroupe","imprToday","state","dateToday","Date","month","getMonth","day","getDate","year","getFullYear","length","today","join","groupeId","server_path","file_path","path","window","open","error","containerId","impr","formation","typeImp","label","componentDidMount","document","location","render","minHeight","marginLeft","e","borderRadius","backgroundColor","borderColor","color","paddingRight","POSITION","TOP_RIGHT"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom'\r\nimport Select from 'react-select';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Slide, Zoom, Flip, Bounce } from 'react-toastify';\r\nimport Checkbox from 'rc-checkbox';\r\nimport 'rc-checkbox/assets/index.css';\r\n\r\nclass PaiementEtudGroup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            formation: [],\r\n            selectedFormation: '',\r\n            groupe: [],\r\n            selectedGroupe: '',\r\n            typeImp: [{ label: 'Global', value: '1' }, { label: \"Aujourdhui\", value: '2' }],\r\n            selectedTypeImpr: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (JSON.parse((localStorage.getItem('userPermissions'))) != null) {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectFormations.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire\r\n                },\r\n                dataType: 'json',\r\n                success: (code_html, statut) => {\r\n                    this.setState({\r\n                        formation: code_html\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            document.location = '/'\r\n        }\r\n    }\r\n\r\n    addImp = selectedTypeImpr => {\r\n        if (selectedTypeImpr != null) {\r\n            this.setState({\r\n                selectedTypeImpr: selectedTypeImpr\r\n            });\r\n        }\r\n        else {\r\n            this.setState({\r\n                selectedTypeImpr: ''\r\n            });\r\n        }\r\n    }\r\n\r\n    addFormation = selectedFormation => {\r\n        if (selectedFormation != null) {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            this.setState({ selectedFormation: selectedFormation }, () => {\r\n                jQuery.ajax({\r\n                    url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectGroupesSelonForm.php',\r\n                    type: 'POST',\r\n                    data: {\r\n                        formationId: selectedFormation.value,\r\n                        anneeScolaire: anneeScolaire\r\n                    },\r\n                    dataType: 'json',\r\n                    success: (code_html, statut) => {\r\n                        this.setState({\r\n                            groupe: code_html\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            this.setState({ selectedFormation: '' })\r\n        }\r\n    };\r\n\r\n    addGroupe = selectedGroupe => {\r\n        if (selectedGroupe != null) {\r\n            this.setState({ selectedGroupe: selectedGroupe });\r\n        }\r\n        else {\r\n            this.setState({ selectedGroupe: '' });\r\n        }\r\n    };\r\n\r\n    imprToday = () => {\r\n        if (this.state.selectedGroupe != '') {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            // Date aujourdhui\r\n            let dateToday = new Date()\r\n            let month = '' + (dateToday.getMonth() + 1);\r\n            let day = '' + dateToday.getDate();\r\n            let year = dateToday.getFullYear();\r\n            if (month.length < 2)\r\n                month = '0' + month;\r\n            if (day.length < 2)\r\n                day = '0' + day;\r\n            var today = [year, month, day].join('-');\r\n            //\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/ImprPayGroupe.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire,\r\n                    today: today,\r\n                    groupeId: this.state.selectedGroupe.value\r\n                },\r\n                dataType: 'json',\r\n                success: function (code_html, statut) {\r\n                    var server_path = code_html.server_path;\r\n                    var file_path = code_html.file_path\r\n                    var path = server_path + file_path;\r\n                    window.open(path, \"_blank\")\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            toast.error('⛔ Veuillez selectionner le groupe correspondant !!', { containerId: 'A' });\r\n        }\r\n    }\r\n\r\n    impr = () => {\r\n        if (this.state.selectedGroupe != '') {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/ImprPayGroupe.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire,\r\n                    today: '',\r\n                    groupeId: this.state.selectedGroupe.value\r\n                },\r\n                dataType: 'json',\r\n                success: function (code_html, statut) {\r\n                    var server_path = code_html.server_path;\r\n                    var file_path = code_html.file_path\r\n                    var path = server_path + file_path;\r\n                    window.open(path, \"_blank\")\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            toast.error('⛔ Veuillez selectionner le groupe correspondant !!', { containerId: 'A' });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px', marginLeft: '0px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Paiments groupes</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-12\">\r\n                            <div className=\"white-box\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Type impression</label>\r\n                                            <Select\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={(e) => this.addImp(e)}\r\n                                                options={this.state.typeImp}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    {this.state.selectedTypeImpr.value == 1 ? (\r\n                                        <Fragment>\r\n                                            <div className=\"col-md-6\">\r\n                                                <div className=\"form-group\">\r\n                                                    <label>Formations</label>\r\n                                                    <Select\r\n                                                        isClearable={true}\r\n                                                        isSearchable={true}\r\n                                                        onChange={(e) => this.addFormation(e)}\r\n                                                        options={this.state.formation}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"col-md-6\">\r\n                                                <div className=\"form-group\">\r\n                                                    <label>Groupes</label>\r\n                                                    <Select\r\n                                                        isClearable={true}\r\n                                                        isSearchable={true}\r\n                                                        onChange={(e) => this.addGroupe(e)}\r\n                                                        options={this.state.groupe}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        </Fragment>\r\n                                    ) : (null)}\r\n                                    {this.state.selectedTypeImpr.value == 2 ? (\r\n                                        <Fragment>\r\n                                            <div className=\"col-md-6\">\r\n                                                <div className=\"form-group\">\r\n                                                    <label>Formations</label>\r\n                                                    <Select\r\n                                                        isClearable={true}\r\n                                                        isSearchable={true}\r\n                                                        onChange={(e) => this.addFormation(e)}\r\n                                                        options={this.state.formation}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"col-md-6\">\r\n                                                <div className=\"form-group\">\r\n                                                    <label>Groupes</label>\r\n                                                    <Select\r\n                                                        isClearable={true}\r\n                                                        isSearchable={true}\r\n                                                        onChange={(e) => this.addGroupe(e)}\r\n                                                        options={this.state.groupe}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                            <button style={{ borderRadius: '5px', backgroundColor: '#761C19', borderColor: '#761C19' }} type=\"button\" className=\"btn btn-success\" onClick={this.impr}><i style={{ color: 'white', paddingRight: '5px' }} class=\"fas fa-print\"></i>Impression global</button>\r\n                                        </Fragment>\r\n                                    ) : (null)}\r\n                                </div>\r\n                            </div>\r\n                            <ToastContainer transition={Flip} enableMultiContainer containerId={'A'} position={toast.POSITION.TOP_RIGHT} autoClose={2500} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(PaiementEtudGroup);"]},"metadata":{},"sourceType":"module"}