{"ast":null,"code":"import _classCallCheck from\"C:\\\\wamp\\\\www\\\\art_metiers_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\wamp\\\\www\\\\art_metiers_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\wamp\\\\www\\\\art_metiers_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\wamp\\\\www\\\\art_metiers_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\wamp\\\\www\\\\art_metiers_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import jQuery from'jquery';import{Link,BrowserRouter as Router,Route,Switch,withRouter,HashRouter,Redirect}from'react-router-dom';import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import Select from'react-select';import{RadioGroup,Radio}from'react-radio-group';import'./paginate.css';var AjoutVisiteur=/*#__PURE__*/function(_Component){_inherits(AjoutVisiteur,_Component);function AjoutVisiteur(props){var _this;_classCallCheck(this,AjoutVisiteur);_this=_possibleConstructorReturn(this,_getPrototypeOf(AjoutVisiteur).call(this,props));_this.addPrenom=function(event){_this.setState({prenom:event.target.value});};_this.addNom=function(event){_this.setState({nom:event.target.value});};_this.addDateNaissance=function(d){_this.setState({dateNaissance:d});};_this.addGender=function(selectedGender){_this.setState({selectedGender:selectedGender});};_this.addMobile=function(event){_this.setState({mobile:event.target.value});};_this.addNivBase=function(selectedNivBase){_this.setState({selectedNivBase:selectedNivBase});console.log(\"nivBase selected:\",selectedNivBase);};_this.ajout=function(){var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var userId=userPermissions[0].idUser;var anneeScolaire=userPermissions[0].anneeScolaire;// Convert date naissance\nvar dateNaissance=_this.state.dateNaissance;var month_two=''+(dateNaissance.getMonth()+1);var day_two=''+dateNaissance.getDate();var year_two=dateNaissance.getFullYear();if(month_two.length<2)month_two='0'+month_two;if(day_two.length<2)day_two='0'+day_two;var convertDateNaissance=[year_two,month_two,day_two].join('-');jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/AddVisiteur.php',type:'POST',data:{prenom:_this.state.prenom,nom:_this.state.nom,dateNaissance:convertDateNaissance,sexe:_this.state.selectedGender,mobile:_this.state.mobile,nivBaseId:_this.state.selectedNivBase.value,userId:userId,anneeScolaire:anneeScolaire},dataType:'json',success:function success(code_html,statut){if(code_html.Result==\"OK\"){_this.props.history.push('/Visiteurs');}else if(code_html.Result==\"KO\"){alert(\"erreur,l'un de vos champs est vide!!\");}}});};_this.state={prenom:'',nom:'',dateNaissance:new Date(),selectedGender:'Masculin',mobile:'',listNivBase:[],selectedNivBase:''};return _this;}_createClass(AjoutVisiteur,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(JSON.parse(localStorage.getItem('userPermissions'))!=null){axios.get(process.env.REACT_APP_API_URL+'Back_mediatraining/SelectNivBase.php').then(function(res){console.log(res);_this2.setState({listNivBase:res.data});});}else{document.location='/';}}},{key:\"addImageVerso\",value:function addImageVerso(e){this.setState({imageVerso:e.target.files});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{id:\"page-wrapper\",style:{minHeight:'263px',marginLeft:'0px'}},React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"div\",{className:\"row bg-title\"},React.createElement(\"div\",{className:\"col-lg-12\"},React.createElement(\"h4\",{className:\"page-title\"},\"Ajout visiteur\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-sm-12\"},React.createElement(\"div\",{className:\"white-box\"},React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-start',alignItems:'center',marginBottom:'10px',marginRight:'20px'}},React.createElement(Link,{to:\"/Visiteurs\"},\" \",React.createElement(\"button\",{style:{background:'#DC143C',border:'1px solid #DC143C',borderRadius:'5px'},type:\"button\",className:\"btn btn-info\"},\" \",React.createElement(\"i\",{style:{paddingRight:'5px'},className:\"fas fa-arrow-circle-left\"}),\"Retour\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Pr\\xE9nom\"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Pr\\xE9nom\",onChange:this.addPrenom,style:{borderRadius:'5px',border:'solid 1px',borderColor:'#B3B3B3'}}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Nom\"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Nom\",onChange:this.addNom,style:{borderRadius:'5px',border:'solid 1px',borderColor:'#B3B3B3'}}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"label\",null,\"Sexe\"),React.createElement(RadioGroup,{name:\"sexe\",selectedValue:this.state.selectedGender,onChange:this.addGender},React.createElement(\"label\",{style:{paddingRight:'5px'}},React.createElement(Radio,{value:\"Masculin\"}),\"Masculin\"),React.createElement(\"label\",{style:{paddingRight:'5px'}},React.createElement(Radio,{value:\"Feminin\"}),\"Feminin\"))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"label\",null,\"Date naissance\"),React.createElement(\"div\",{className:\"form-group\"},React.createElement(DatePicker,{class:\"form-control\",selected:this.state.dateNaissance,onChange:this.addDateNaissance}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Mobile\"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Mobile\",onChange:this.addMobile,style:{borderRadius:'5px',border:'solid 1px',borderColor:'#B3B3B3'}}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Niveau de base\"),React.createElement(Select,{isClearable:true,isSearchable:true,onChange:this.addNivBase,options:this.state.listNivBase})))),React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',marginBottom:'10px'}},React.createElement(\"button\",{style:{borderRadius:'5px'},type:\"button\",className:\"btn btn-success\",onClick:this.ajout},\"Confirmer\")))))));}}]);return AjoutVisiteur;}(Component);export default withRouter(AjoutVisiteur);","map":{"version":3,"sources":["C:/wamp/www/art_metiers_prod/mediatraining/src/AjoutVisiteur.js"],"names":["React","Component","axios","jQuery","Link","BrowserRouter","Router","Route","Switch","withRouter","HashRouter","Redirect","DatePicker","Select","RadioGroup","Radio","AjoutVisiteur","props","addPrenom","event","setState","prenom","target","value","addNom","nom","addDateNaissance","d","dateNaissance","addGender","selectedGender","addMobile","mobile","addNivBase","selectedNivBase","console","log","ajout","userPermissions","JSON","parse","localStorage","getItem","userId","idUser","anneeScolaire","state","month_two","getMonth","day_two","getDate","year_two","getFullYear","length","convertDateNaissance","join","ajax","url","process","env","REACT_APP_API_URL","type","data","sexe","nivBaseId","dataType","success","code_html","statut","Result","history","push","alert","Date","listNivBase","get","then","res","document","location","e","imageVerso","files","minHeight","marginLeft","display","justifyContent","alignItems","marginBottom","marginRight","background","border","borderRadius","paddingRight","borderColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport Select from 'react-select';\r\nimport { RadioGroup, Radio } from 'react-radio-group'\r\nimport './paginate.css'\r\n\r\nclass AjoutVisiteur extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            prenom: '',\r\n            nom: '',\r\n            dateNaissance: new Date(),\r\n            selectedGender: 'Masculin',\r\n            mobile: '',\r\n            listNivBase: [],\r\n            selectedNivBase: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (JSON.parse((localStorage.getItem('userPermissions'))) != null) {\r\n            axios.get(process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectNivBase.php').then(res => {\r\n                console.log(res)\r\n                this.setState({\r\n                    listNivBase: res.data\r\n                })\r\n            })\r\n        }\r\n        else {\r\n            document.location = '/'\r\n        }\r\n    }\r\n\r\n    addPrenom = (event) => {\r\n        this.setState({\r\n            prenom: event.target.value\r\n        });\r\n    }\r\n\r\n    addNom = (event) => {\r\n        this.setState({\r\n            nom: event.target.value\r\n        });\r\n    }\r\n\r\n    addDateNaissance = d => {\r\n        this.setState({\r\n            dateNaissance: d\r\n        });\r\n    };\r\n\r\n    addGender = (selectedGender) => {\r\n        this.setState({ selectedGender: selectedGender });\r\n    }\r\n\r\n    addMobile = (event) => {\r\n        this.setState({\r\n            mobile: event.target.value\r\n        });\r\n    }\r\n\r\n    addNivBase = selectedNivBase => {\r\n        this.setState({ selectedNivBase });\r\n        console.log(`nivBase selected:`, selectedNivBase);\r\n    };\r\n\r\n    addImageVerso(e) {\r\n        this.setState({ imageVerso: e.target.files })\r\n    }\r\n\r\n    ajout = () => {\r\n        var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n        var userId = userPermissions[0].idUser\r\n        var anneeScolaire = userPermissions[0].anneeScolaire\r\n        // Convert date naissance\r\n        let dateNaissance = this.state.dateNaissance\r\n        let month_two = '' + (dateNaissance.getMonth() + 1);\r\n        let day_two = '' + dateNaissance.getDate();\r\n        let year_two = dateNaissance.getFullYear();\r\n        if (month_two.length < 2)\r\n            month_two = '0' + month_two;\r\n        if (day_two.length < 2)\r\n            day_two = '0' + day_two;\r\n        let convertDateNaissance = [year_two, month_two, day_two].join('-');\r\n        jQuery.ajax({\r\n            url: process.env.REACT_APP_API_URL + 'Back_mediatraining/AddVisiteur.php',\r\n            type: 'POST',\r\n            data: {\r\n                prenom: this.state.prenom,\r\n                nom: this.state.nom,\r\n                dateNaissance: convertDateNaissance,\r\n                sexe: this.state.selectedGender,\r\n                mobile: this.state.mobile,\r\n                nivBaseId: this.state.selectedNivBase.value,\r\n                userId: userId,\r\n                anneeScolaire: anneeScolaire\r\n            },\r\n            dataType: 'json',\r\n            success: (code_html, statut) => {\r\n                if (code_html.Result == \"OK\") {\r\n                    this.props.history.push('/Visiteurs');\r\n                }\r\n                else if (code_html.Result == \"KO\") {\r\n                    alert(\"erreur,l'un de vos champs est vide!!\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px', marginLeft: '0px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Ajout visiteur</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-12\">\r\n                            <div className=\"white-box\">\r\n                                <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginBottom: '10px', marginRight: '20px' }}>\r\n                                    <Link to=\"/Visiteurs\" > <button style={{ background: '#DC143C', border: '1px solid #DC143C', borderRadius: '5px' }} type=\"button\" className=\"btn btn-info\"> <i style={{ paddingRight: '5px' }} className=\"fas fa-arrow-circle-left\"></i>Retour</button></Link>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Prénom</label>\r\n                                            <input type=\"text\" className=\"form-control\" placeholder=\"Prénom\" onChange={this.addPrenom} style={{ borderRadius: '5px', border: 'solid 1px', borderColor: '#B3B3B3' }} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Nom</label>\r\n                                            <input type=\"text\" className=\"form-control\" placeholder=\"Nom\" onChange={this.addNom} style={{ borderRadius: '5px', border: 'solid 1px', borderColor: '#B3B3B3' }} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <label>Sexe</label>\r\n                                        <RadioGroup\r\n                                            name=\"sexe\"\r\n                                            selectedValue={this.state.selectedGender}\r\n                                            onChange={this.addGender}>\r\n                                            <label style={{ paddingRight: '5px' }}>\r\n                                                <Radio value=\"Masculin\" />Masculin\r\n                                                </label>\r\n                                            <label style={{ paddingRight: '5px' }}>\r\n                                                <Radio value=\"Feminin\" />Feminin\r\n                                                </label>\r\n                                        </RadioGroup>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <label>Date naissance</label>\r\n                                        <div className=\"form-group\">\r\n                                            <DatePicker class=\"form-control\"\r\n                                                selected={this.state.dateNaissance}\r\n                                                onChange={this.addDateNaissance}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Mobile</label>\r\n                                            <input type=\"text\" className=\"form-control\" placeholder=\"Mobile\" onChange={this.addMobile} style={{ borderRadius: '5px', border: 'solid 1px', borderColor: '#B3B3B3' }} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Niveau de base</label>\r\n                                            <Select\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={this.addNivBase}\r\n                                                options={this.state.listNivBase}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px' }}>\r\n                                    <button style={{ borderRadius: '5px' }} type=\"button\" className=\"btn btn-success\" onClick={this.ajout}>Confirmer</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(AjoutVisiteur);"]},"metadata":{},"sourceType":"module"}