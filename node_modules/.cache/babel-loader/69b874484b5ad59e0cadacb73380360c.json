{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp\\\\www\\\\Projet_agora_DEV\\\\agora\\\\src\\\\Permissions.js\";\nimport React, { Component } from 'react';\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport jQuery from 'jquery';\n\nclass Permissions extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      faveurs: [],\n      permissions: [],\n      nomRole: ''\n    };\n    this.modif = this.modif.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get(process.env.REACT_APP_API_URL + 'Back_agora/Faveurs.php').then(res => {\n      this.setState({\n        faveurs: res.data\n      });\n    });\n    axios.get(process.env.REACT_APP_API_URL + 'Back_agora/GetPermissionByRoleId.php?id=' + this.props.location.state.id_role).then(res => {\n      this.setState({\n        nomRole: res.data[0].nomRole,\n        permissions: res.data\n      }, function () {\n        var long = this.state.permissions.length;\n        var ajout = document.getElementsByClassName('add');\n        console.log(ajout);\n        var addCan = [];\n        var explorer = document.getElementsByClassName('view');\n        console.log(explorer);\n        var readCan = [];\n        var modifier = document.getElementsByClassName('Update');\n        console.log(modifier);\n        var updateCan = [];\n        var supprimer = document.getElementsByClassName('delet');\n        console.log(supprimer);\n        var deleteCan = [];\n\n        for (var i = 0; i < long; i++) {\n          addCan.push(this.state.permissions[i].ajouter);\n          readCan.push(this.state.permissions[i].explorer);\n          updateCan.push(this.state.permissions[i].modifier);\n          deleteCan.push(this.state.permissions[i].supprimer);\n        }\n\n        console.log('le tableau addCan');\n        console.log(addCan);\n        console.log('le tableau readCan');\n        console.log(readCan);\n        console.log('le tableau updateCan');\n        console.log(updateCan);\n        console.log('le tableau deleteCan');\n        console.log(deleteCan);\n\n        for (var j = 0; j < long; j++) {\n          if (addCan[j] == 1) {\n            ajout[j].checked = true;\n          } else if (addCan[j] == 0) {\n            ajout[j].checked = false;\n          }\n\n          if (readCan[j] == 1) {\n            explorer[j].checked = true;\n          } else if (readCan[j] == 0) {\n            explorer[j].checked = false;\n          }\n\n          if (updateCan[j] == 1) {\n            modifier[j].checked = true;\n          } else if (updateCan[j] == 0) {\n            modifier[j].checked = false;\n          }\n\n          if (deleteCan[j] == 1) {\n            supprimer[j].checked = true;\n          } else if (deleteCan[j] == 0) {\n            supprimer[j].checked = false;\n          }\n        }\n      });\n    });\n  }\n\n  modif() {\n    ///\n    var canAdd = [0, 0, 0, 0];\n    var canRead = [0, 0, 0, 0];\n    var canUpdate = [0, 0, 0, 0];\n    var canDelete = [0, 0, 0, 0]; ///\n\n    var ajout = document.getElementsByClassName('add');\n    var explorer = document.getElementsByClassName('view');\n    var modifier = document.getElementsByClassName('Update');\n    var supprimer = document.getElementsByClassName('delet');\n    var longeur = this.state.faveurs.length;\n    var tabPermission = [];\n\n    for (var i = 0; i < longeur; i++) {\n      if (ajout[i].checked) {\n        canAdd[i] = 1;\n      } else if (ajout[i].checked === false) {\n        canAdd[i] = 0;\n      }\n\n      if (explorer[i].checked) {\n        canRead[i] = 1;\n      } else if (explorer[i].checked === false) {\n        canRead[i] = 0;\n      }\n\n      if (modifier[i].checked) {\n        canUpdate[i] = 1;\n      } else if (modifier[i].checked === false) {\n        canUpdate[i] = 0;\n      }\n\n      if (supprimer[i].checked) {\n        canDelete[i] = 1;\n      } else if (supprimer[i].checked === false) {\n        canDelete[i] = 0;\n      }\n\n      var objetPermission = {\n        faveur_id: this.state.faveurs[i].id_faveur,\n        role_id: this.props.location.state.id_role,\n        ajouter: canAdd[i],\n        explorer: canRead[i],\n        modifier: canUpdate[i],\n        supprimer: canDelete[i]\n      };\n      console.log(objetPermission);\n      tabPermission.push(objetPermission);\n    }\n\n    console.log(tabPermission);\n    jQuery.ajax({\n      url: process.env.REACT_APP_API_URL + 'Back_agora/ModifPermissionByRoleId.php?id=' + this.props.location.state.id_role,\n      type: 'POST',\n      data: {\n        tab_permission: tabPermission\n      },\n      dataType: 'json',\n      success: function (code_html, statut) {\n        if (code_html.Result === \"OK\") {} else if (code_html.Result === \"KO\") {}\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"page-wrapper\",\n      style: {\n        minHeight: '263px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row bg-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Modification permissions\"))), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"white-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'flex-start',\n        alignItems: 'center',\n        marginBottom: '10px',\n        marginLeft: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Role : \", this.state.nomRole)), React.createElement(\"div\", {\n      className: \"table-responsive\",\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table align-items-center table-flush\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Services\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Ajouter\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Explorer\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Modifier\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Supprimer\"))), this.state.faveurs.map(el => React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, el.nomFaveur), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"add\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"view\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"Update\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"delet\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }))))))), React.createElement(Link, {\n      to: \"/Roles\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginBottom: '10px',\n        marginTop: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.modif.bind(this),\n      style: {\n        width: '15%'\n      },\n      type: \"button\",\n      className: \"btn btn-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Confirmer\")))))))));\n  }\n\n}\n\nexport default Permissions;","map":{"version":3,"sources":["C:/wamp/www/Projet_agora_DEV/agora/src/Permissions.js"],"names":["React","Component","Link","BrowserRouter","Router","Route","Switch","withRouter","axios","jQuery","Permissions","constructor","props","state","faveurs","permissions","nomRole","modif","bind","componentDidMount","get","process","env","REACT_APP_API_URL","then","res","setState","data","location","id_role","long","length","ajout","document","getElementsByClassName","console","log","addCan","explorer","readCan","modifier","updateCan","supprimer","deleteCan","i","push","ajouter","j","checked","canAdd","canRead","canUpdate","canDelete","longeur","tabPermission","objetPermission","faveur_id","id_faveur","role_id","ajax","url","type","tab_permission","dataType","success","code_html","statut","Result","render","minHeight","display","justifyContent","alignItems","marginBottom","marginLeft","textAlign","map","el","nomFaveur","marginTop","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\n\r\nclass Permissions extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            faveurs: [],\r\n            permissions: [],\r\n            nomRole: ''\r\n        }\r\n        this.modif = this.modif.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(process.env.REACT_APP_API_URL + 'Back_agora/Faveurs.php').then(res => {\r\n            this.setState({ faveurs: res.data });\r\n        });\r\n        axios.get(process.env.REACT_APP_API_URL + 'Back_agora/GetPermissionByRoleId.php?id=' + this.props.location.state.id_role).then(res => {\r\n            this.setState({\r\n                nomRole: res.data[0].nomRole,\r\n                permissions: res.data\r\n            },\r\n                function () {\r\n                    var long = this.state.permissions.length\r\n                    var ajout = document.getElementsByClassName('add')\r\n                    console.log(ajout)\r\n                    var addCan = []\r\n                    var explorer = document.getElementsByClassName('view')\r\n                    console.log(explorer)\r\n                    var readCan = []\r\n                    var modifier = document.getElementsByClassName('Update')\r\n                    console.log(modifier)\r\n                    var updateCan = []\r\n                    var supprimer = document.getElementsByClassName('delet')\r\n                    console.log(supprimer)\r\n                    var deleteCan = []\r\n\r\n                    for (var i = 0; i < long; i++) {\r\n                        addCan.push(this.state.permissions[i].ajouter)\r\n                        readCan.push(this.state.permissions[i].explorer)\r\n                        updateCan.push(this.state.permissions[i].modifier)\r\n                        deleteCan.push(this.state.permissions[i].supprimer)\r\n                    }\r\n\r\n                    console.log('le tableau addCan')\r\n                    console.log(addCan)\r\n                    console.log('le tableau readCan')\r\n                    console.log(readCan)\r\n                    console.log('le tableau updateCan')\r\n                    console.log(updateCan)\r\n                    console.log('le tableau deleteCan')\r\n                    console.log(deleteCan)\r\n\r\n                    for (var j = 0; j < long; j++) {\r\n                        if (addCan[j] == 1) {\r\n                            ajout[j].checked = true\r\n                        }\r\n                        else if (addCan[j] == 0) {\r\n                            ajout[j].checked = false\r\n                        }\r\n                        if (readCan[j] == 1) {\r\n                            explorer[j].checked = true\r\n                        }\r\n                        else if (readCan[j] == 0) {\r\n                            explorer[j].checked = false\r\n                        }\r\n                        if (updateCan[j] == 1) {\r\n                            modifier[j].checked = true\r\n                        }\r\n                        else if (updateCan[j] == 0) {\r\n                            modifier[j].checked = false\r\n                        }\r\n                        if (deleteCan[j] == 1) {\r\n                            supprimer[j].checked = true\r\n                        }\r\n                        else if (deleteCan[j] == 0) {\r\n                            supprimer[j].checked = false\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n        });\r\n    }\r\n\r\n    modif() {\r\n        ///\r\n        var canAdd = [0, 0, 0, 0];\r\n        var canRead = [0, 0, 0, 0];\r\n        var canUpdate = [0, 0, 0, 0];\r\n        var canDelete = [0, 0, 0, 0];\r\n        ///\r\n        var ajout = document.getElementsByClassName('add')\r\n        var explorer = document.getElementsByClassName('view')\r\n        var modifier = document.getElementsByClassName('Update')\r\n        var supprimer = document.getElementsByClassName('delet')\r\n        var longeur = this.state.faveurs.length\r\n        var tabPermission = []\r\n\r\n        for (var i = 0; i < longeur; i++) {\r\n            if (ajout[i].checked) {\r\n                canAdd[i] = 1\r\n            }\r\n            else if (ajout[i].checked === false) {\r\n                canAdd[i] = 0\r\n            }\r\n            if (explorer[i].checked) {\r\n                canRead[i] = 1\r\n            }\r\n            else if (explorer[i].checked === false) {\r\n                canRead[i] = 0\r\n            }\r\n            if (modifier[i].checked) {\r\n                canUpdate[i] = 1\r\n            }\r\n            else if (modifier[i].checked === false) {\r\n                canUpdate[i] = 0\r\n            }\r\n            if (supprimer[i].checked) {\r\n                canDelete[i] = 1\r\n            }\r\n            else if (supprimer[i].checked === false) {\r\n                canDelete[i] = 0\r\n            }\r\n\r\n            var objetPermission = { faveur_id: this.state.faveurs[i].id_faveur, role_id: this.props.location.state.id_role, ajouter: canAdd[i], explorer: canRead[i], modifier: canUpdate[i], supprimer: canDelete[i] }\r\n            console.log(objetPermission)\r\n            tabPermission.push(objetPermission)\r\n        }\r\n        console.log(tabPermission)\r\n\r\n        jQuery.ajax({\r\n            url: process.env.REACT_APP_API_URL + 'Back_agora/ModifPermissionByRoleId.php?id=' + this.props.location.state.id_role,\r\n            type: 'POST',\r\n            data: {\r\n                tab_permission: tabPermission\r\n            },\r\n            dataType: 'json',\r\n            success: function (code_html, statut) {\r\n                if (code_html.Result === \"OK\") {\r\n                }\r\n                else if (code_html.Result === \"KO\") {\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Modification permissions</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div class=\"row\">\r\n                        <div class=\"col-sm-12\">\r\n                            <div class=\"white-box\">\r\n                                <div class=\"row\">\r\n                                    <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginBottom: '10px',marginLeft:'5px' }}>\r\n                                        <h3>Role : {this.state.nomRole}</h3>\r\n                                    </div>\r\n                                    <div className=\"table-responsive\" style={{ textAlign: 'center' }}>\r\n                                        <table className=\"table align-items-center table-flush\">\r\n                                            <thead className=\"thead-light\">\r\n                                                <tr>\r\n                                                    <th scope=\"col\">Services</th>\r\n                                                    <th scope=\"col\">Ajouter</th>\r\n                                                    <th scope=\"col\">Explorer</th>\r\n                                                    <th scope=\"col\">Modifier</th>\r\n                                                    <th scope=\"col\">Supprimer</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            {this.state.faveurs.map(el =>\r\n                                                <tbody>\r\n                                                    <tr>\r\n                                                        <td>\r\n                                                            {el.nomFaveur}\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <input class='add' type=\"checkbox\" />\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <input class='view' type=\"checkbox\" />\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <input class='Update' type=\"checkbox\" />\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <input class='delet' type=\"checkbox\" />\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            )}\r\n                                        </table>\r\n                                    </div>\r\n                                    <Link to='/Roles'>\r\n                                        <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px', marginTop: '10px' }}>\r\n                                            <button onClick={this.modif.bind(this)} style={{ width: '15%' }} type=\"button\" className=\"btn btn-success\">Confirmer</button>\r\n                                        </div>\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Permissions;"]},"metadata":{},"sourceType":"module"}