{"ast":null,"code":"import _classCallCheck from\"C:\\\\wamp\\\\www\\\\Projet_snaii_DEV\\\\snaii\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\wamp\\\\www\\\\Projet_snaii_DEV\\\\snaii\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\wamp\\\\www\\\\Projet_snaii_DEV\\\\snaii\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\wamp\\\\www\\\\Projet_snaii_DEV\\\\snaii\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\wamp\\\\www\\\\Projet_snaii_DEV\\\\snaii\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\wamp\\\\www\\\\Projet_snaii_DEV\\\\snaii\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import jQuery from'jquery';import{withRouter}from'react-router-dom';var ModifService=/*#__PURE__*/function(_Component){_inherits(ModifService,_Component);function ModifService(props){var _this;_classCallCheck(this,ModifService);_this=_possibleConstructorReturn(this,_getPrototypeOf(ModifService).call(this,props));_this.state={idService:'',nomService:'',imgService:'',tarif:''};_this.modifNomService=_this.modifNomService.bind(_assertThisInitialized(_this));_this.modifTarif=_this.modifTarif.bind(_assertThisInitialized(_this));_this.modif=_this.modif.bind(_assertThisInitialized(_this));return _this;}_createClass(ModifService,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id_service=this.props.location.state.id_service;axios.get(process.env.REACT_APP_API_URL+'Back_snaii/GetServiceById.php?id='+id_service).then(function(res){console.log(res);_this2.setState({idService:res.data.id_service,nomService:res.data.nomService,pathPhotoService:res.data.pathPhotoService,tarif:res.data.tarif});});}},{key:\"modifNomService\",value:function modifNomService(event){this.setState({nomService:event.target.value});}},{key:\"modifImgService\",value:function modifImgService(e){this.setState({imgService:e.target.files});}},{key:\"modifTarif\",value:function modifTarif(event){this.setState({tarif:event.target.value});}},{key:\"modif\",value:function modif(){var _this3=this;console.log(this.state.nomService);console.log(this.state.imgService);console.log(this.state.tarif);jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_snaii/UpdService.php?id='+this.state.idService,type:'POST',data:{nomService:this.state.nomService,pathImgService:\"images/photos_services/\"+this.state.imgService[0].name,tarif:this.state.tarif},dataType:'json',success:function success(code_html,statut){if(code_html.Result==\"OK\"){// alert(\"Félicitation la modification des informations du nouveau service a été effectuée avec succès !\");\n// document.location = \"/Services\";\n_this3.props.history.push('/Services');}else if(code_html.Result==\"KO\"){alert(\"erreur,l'un de vos champs est vide!!\");}}});var files=this.state.imgService;console.warn('data files',files);var reader=new FileReader();reader.readAsDataURL(files[0]);reader.onload=function(e){console.log(e);jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_snaii/UploadPhotoService.php',type:'POST',data:{file:e.target.result,nomfile:_this3.state.imgService[0].name},dataType:'json',success:function success(code_html,statut){}});};}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(\"div\",{id:\"page-wrapper\",style:{minHeight:'263px'}},React.createElement(\"div\",{style:{backgroundColor:'white'},className:\"container-fluid\"},React.createElement(\"div\",{className:\"row bg-title\"},React.createElement(\"div\",{className:\"col-lg-12\"},React.createElement(\"h4\",{className:\"page-title\"},\"Modification Service\"))),React.createElement(\"form\",null,React.createElement(\"div\",{class:\"row\"},React.createElement(\"div\",{class:\"col-md-6\"},React.createElement(\"div\",{class:\"form-group\"},React.createElement(\"label\",null,\"Nom service\"),React.createElement(\"input\",{type:\"text\",class:\"form-control\",value:this.state.nomService,onChange:this.modifNomService.bind(this),style:{borderRadius:'5px'}}))),React.createElement(\"div\",{class:\"col-md-6\"},React.createElement(\"div\",{class:\"form-group\"},React.createElement(\"label\",null,\"Photo service (png/jpg/jpeg/gif) \"),React.createElement(\"input\",{type:\"file\",class:\"form-control\",name:\"file\",onChange:function onChange(e){return _this4.modifImgService(e);},style:{borderRadius:'5px'}}))),React.createElement(\"div\",{class:\"col-md-6\"},React.createElement(\"div\",{class:\"form-group\"},React.createElement(\"label\",null,\"Tarif\"),React.createElement(\"input\",{type:\"number\",class:\"form-control\",value:this.state.tarif,onChange:this.modifTarif.bind(this),style:{borderRadius:'5px'}}))))),React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',marginBottom:'10px'}},React.createElement(\"button\",{style:{width:'15%',borderRadius:'5px'},type:\"button\",className:\"btn btn-success\",onClick:this.modif.bind(this)},\"Confirmer\"))));}}]);return ModifService;}(Component);export default withRouter(ModifService);","map":{"version":3,"sources":["C:/wamp/www/Projet_snaii_DEV/snaii/src/ModifService.js"],"names":["React","Component","axios","jQuery","withRouter","ModifService","props","state","idService","nomService","imgService","tarif","modifNomService","bind","modifTarif","modif","id_service","location","get","process","env","REACT_APP_API_URL","then","res","console","log","setState","data","pathPhotoService","event","target","value","e","files","ajax","url","type","pathImgService","name","dataType","success","code_html","statut","Result","history","push","alert","warn","reader","FileReader","readAsDataURL","onload","file","result","nomfile","minHeight","backgroundColor","borderRadius","modifImgService","display","justifyContent","marginBottom","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nclass ModifService extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            idService: '',\r\n            nomService: '',\r\n            imgService: '',\r\n            tarif: '',\r\n        }\r\n        this.modifNomService = this.modifNomService.bind(this);\r\n        this.modifTarif = this.modifTarif.bind(this);\r\n        this.modif = this.modif.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        let id_service = this.props.location.state.id_service;\r\n        axios.get(process.env.REACT_APP_API_URL + 'Back_snaii/GetServiceById.php?id=' + id_service).then(res => {\r\n            console.log(res)\r\n            this.setState({\r\n                idService: res.data.id_service,\r\n                nomService: res.data.nomService,\r\n                pathPhotoService: res.data.pathPhotoService,\r\n                tarif: res.data.tarif\r\n            })\r\n        })\r\n    }\r\n\r\n    modifNomService(event) {\r\n        this.setState({\r\n            nomService: event.target.value\r\n        });\r\n    }\r\n\r\n    modifImgService(e) {\r\n        this.setState({ imgService: e.target.files })\r\n    }\r\n\r\n    modifTarif(event) {\r\n        this.setState({\r\n            tarif: event.target.value\r\n        });\r\n    }\r\n\r\n    modif() {\r\n\r\n        console.log(this.state.nomService)\r\n        console.log(this.state.imgService)\r\n        console.log(this.state.tarif)\r\n\r\n        jQuery.ajax({\r\n            url: process.env.REACT_APP_API_URL + 'Back_snaii/UpdService.php?id=' + this.state.idService,\r\n            type: 'POST',\r\n            data: {\r\n                nomService: this.state.nomService,\r\n                pathImgService: \"images/photos_services/\" + this.state.imgService[0].name,\r\n                tarif: this.state.tarif\r\n            },\r\n            dataType: 'json',\r\n            success: (code_html, statut) => {\r\n                if (code_html.Result == \"OK\") {\r\n                    // alert(\"Félicitation la modification des informations du nouveau service a été effectuée avec succès !\");\r\n                    // document.location = \"/Services\";\r\n                    this.props.history.push('/Services');\r\n                }\r\n                else if (code_html.Result == \"KO\") {\r\n                    alert(\"erreur,l'un de vos champs est vide!!\");\r\n                }\r\n            }\r\n        });\r\n\r\n        let files = this.state.imgService;\r\n        console.warn('data files', files)\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(files[0])\r\n        reader.onload = (e) => {\r\n            console.log(e)\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_snaii/UploadPhotoService.php',\r\n                type: 'POST',\r\n                data: {\r\n                    file: e.target.result,\r\n                    nomfile: this.state.imgService[0].name\r\n                },\r\n                dataType: 'json',\r\n                success: function (code_html, statut) {\r\n                }\r\n            }\r\n            )\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px' }}>\r\n                <div style={{backgroundColor:'white'}} className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Modification Service</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n\r\n                    <form>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Nom service</label>\r\n                                    <input type=\"text\" class=\"form-control\" value={this.state.nomService} onChange={this.modifNomService.bind(this)} style={{borderRadius:'5px'}}/>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Photo service (png/jpg/jpeg/gif) </label>\r\n                                    <input type=\"file\" class=\"form-control\" name=\"file\" onChange={(e) => this.modifImgService(e)} style={{borderRadius:'5px'}}/>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Tarif</label>\r\n                                    <input type=\"number\" class=\"form-control\" value={this.state.tarif} onChange={this.modifTarif.bind(this)} style={{borderRadius:'5px'}}/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n\r\n                    <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px' }}>\r\n                        <button style={{ width: '15%', borderRadius: '5px' }} type=\"button\" className=\"btn btn-success\" onClick={this.modif.bind(this)}>Confirmer</button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(ModifService);"]},"metadata":{},"sourceType":"module"}