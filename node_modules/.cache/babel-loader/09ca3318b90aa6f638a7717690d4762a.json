{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp\\\\www\\\\savoir_plus_dev_nv\\\\mediatraining\\\\src\\\\PaiementEtudGroup.js\";\nimport React, { Component, Fragment } from 'react';\nimport axios from 'axios';\nimport jQuery from 'jquery';\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom';\nimport Select from 'react-select';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Slide, Zoom, Flip, Bounce } from 'react-toastify';\nimport Checkbox from 'rc-checkbox';\nimport 'rc-checkbox/assets/index.css';\n\nclass PaiementEtudGroup extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addFormation = selectedFormation => {\n      if (selectedFormation != null) {\n        var userPermissions = JSON.parse(localStorage.getItem('userPermissions'));\n        var anneeScolaire = userPermissions[0].anneeScolaire;\n        this.setState({\n          selectedFormation: selectedFormation\n        }, () => {\n          jQuery.ajax({\n            url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectGroupesSelonForm.php',\n            type: 'POST',\n            data: {\n              formationId: selectedFormation.value,\n              anneeScolaire: anneeScolaire\n            },\n            dataType: 'json',\n            success: (code_html, statut) => {\n              this.setState({\n                groupe: code_html\n              });\n            }\n          });\n        });\n      } else {\n        this.setState({\n          selectedFormation: ''\n        });\n      }\n    };\n\n    this.addGroupe = selectedGroupe => {\n      if (selectedGroupe != null) {\n        this.setState({\n          selectedGroupe: selectedGroupe\n        });\n      } else {\n        this.setState({\n          selectedGroupe: ''\n        });\n      }\n    };\n\n    this.imprToday = () => {\n      if (this.state.selectedGroupe != '') {\n        var userPermissions = JSON.parse(localStorage.getItem('userPermissions'));\n        var anneeScolaire = userPermissions[0].anneeScolaire; // Date aujourdhui\n\n        let dateToday = new Date();\n        let month = '' + (dateToday.getMonth() + 1);\n        let day = '' + dateToday.getDate();\n        let year = dateToday.getFullYear();\n        if (month.length < 2) month = '0' + month;\n        if (day.length < 2) day = '0' + day;\n        var today = [year, month, day].join('-'); //\n\n        jQuery.ajax({\n          url: process.env.REACT_APP_API_URL + 'Back_mediatraining/ImprPayGroupe.php',\n          type: 'POST',\n          data: {\n            anneeScolaire: anneeScolaire,\n            today: today,\n            groupe: this.state.selectedGroupe.value\n          },\n          dataType: 'json',\n          success: function (code_html, statut) {\n            var server_path = code_html.server_path;\n            var file_path = code_html.file_path;\n            var path = server_path + file_path;\n            window.open(path, \"_blank\");\n          }\n        });\n      } else {\n        toast.error('⛔ Veuillez selectionner le groupe correspondant !!', {\n          containerId: 'A'\n        });\n      }\n    };\n\n    this.impr = () => {\n      if (this.state.selectedGroupe != '') {\n        var userPermissions = JSON.parse(localStorage.getItem('userPermissions'));\n        var anneeScolaire = userPermissions[0].anneeScolaire;\n        jQuery.ajax({\n          url: process.env.REACT_APP_API_URL + 'Back_mediatraining/ImprPayGroupe.php',\n          type: 'POST',\n          data: {\n            anneeScolaire: anneeScolaire,\n            today: '',\n            groupe: this.state.selectedGroupe.value\n          },\n          dataType: 'json',\n          success: function (code_html, statut) {\n            var server_path = code_html.server_path;\n            var file_path = code_html.file_path;\n            var path = server_path + file_path;\n            window.open(path, \"_blank\");\n          }\n        });\n      } else {\n        toast.error('⛔ Veuillez selectionner le groupe correspondant !!', {\n          containerId: 'A'\n        });\n      }\n    };\n\n    this.state = {\n      formation: [],\n      selectedFormation: '',\n      groupe: [],\n      selectedGroupe: ''\n    };\n  }\n\n  componentDidMount() {\n    if (JSON.parse(localStorage.getItem('userPermissions')) != null) {\n      var userPermissions = JSON.parse(localStorage.getItem('userPermissions'));\n      var anneeScolaire = userPermissions[0].anneeScolaire;\n      jQuery.ajax({\n        url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectFormations.php',\n        type: 'POST',\n        data: {\n          anneeScolaire: anneeScolaire\n        },\n        dataType: 'json',\n        success: (code_html, statut) => {\n          this.setState({\n            formation: code_html\n          });\n        }\n      });\n    } else {\n      document.location = '/';\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"page-wrapper\",\n      style: {\n        minHeight: '263px',\n        marginLeft: '0px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row bg-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Paiments groupes\"))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"white-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Formations\"), React.createElement(Select, {\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addFormation(e),\n      options: this.state.formation,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Groupes\"), React.createElement(Select, {\n      isClearable: true,\n      isSearchable: true,\n      onChange: e => this.addGroupe(e),\n      options: this.state.groupe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-around'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        borderRadius: '5px',\n        backgroundColor: '#761C19',\n        borderColor: '#761C19'\n      },\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.imprToday,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        color: 'white',\n        paddingRight: '5px'\n      },\n      class: \"fas fa-print\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }), \"Impression aujourd'hui\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        borderRadius: '5px',\n        backgroundColor: '#761C19',\n        borderColor: '#761C19'\n      },\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.impr,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        color: 'white',\n        paddingRight: '5px'\n      },\n      class: \"fas fa-print\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), \"Impression global\")))), React.createElement(ToastContainer, {\n      transition: Flip,\n      enableMultiContainer: true,\n      containerId: 'A',\n      position: toast.POSITION.TOP_RIGHT,\n      autoClose: 2500,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default withRouter(PaiementEtudGroup);","map":{"version":3,"sources":["C:/wamp/www/savoir_plus_dev_nv/mediatraining/src/PaiementEtudGroup.js"],"names":["React","Component","Fragment","axios","jQuery","Link","BrowserRouter","Router","Route","Switch","withRouter","HashRouter","Redirect","Select","DatePicker","Button","Modal","ModalHeader","ModalBody","ModalFooter","ToastContainer","toast","Slide","Zoom","Flip","Bounce","Checkbox","PaiementEtudGroup","constructor","props","addFormation","selectedFormation","userPermissions","JSON","parse","localStorage","getItem","anneeScolaire","setState","ajax","url","process","env","REACT_APP_API_URL","type","data","formationId","value","dataType","success","code_html","statut","groupe","addGroupe","selectedGroupe","imprToday","state","dateToday","Date","month","getMonth","day","getDate","year","getFullYear","length","today","join","server_path","file_path","path","window","open","error","containerId","impr","formation","componentDidMount","document","location","render","minHeight","marginLeft","e","display","justifyContent","borderRadius","backgroundColor","borderColor","color","paddingRight","POSITION","TOP_RIGHT"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport jQuery from 'jquery'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom'\r\nimport Select from 'react-select';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Slide, Zoom, Flip, Bounce } from 'react-toastify';\r\nimport Checkbox from 'rc-checkbox';\r\nimport 'rc-checkbox/assets/index.css';\r\n\r\nclass PaiementEtudGroup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            formation: [],\r\n            selectedFormation: '',\r\n            groupe: [],\r\n            selectedGroupe: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (JSON.parse((localStorage.getItem('userPermissions'))) != null) {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectFormations.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire\r\n                },\r\n                dataType: 'json',\r\n                success: (code_html, statut) => {\r\n                    this.setState({\r\n                        formation: code_html\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            document.location = '/'\r\n        }\r\n    }\r\n\r\n    addFormation = selectedFormation => {\r\n        if (selectedFormation != null) {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            this.setState({ selectedFormation: selectedFormation }, () => {\r\n                jQuery.ajax({\r\n                    url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectGroupesSelonForm.php',\r\n                    type: 'POST',\r\n                    data: {\r\n                        formationId: selectedFormation.value,\r\n                        anneeScolaire: anneeScolaire\r\n                    },\r\n                    dataType: 'json',\r\n                    success: (code_html, statut) => {\r\n                        this.setState({\r\n                            groupe: code_html\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            this.setState({ selectedFormation: '' })\r\n        }\r\n    };\r\n\r\n    addGroupe = selectedGroupe => {\r\n        if (selectedGroupe != null) {\r\n            this.setState({ selectedGroupe: selectedGroupe });\r\n        }\r\n        else {\r\n            this.setState({ selectedGroupe: '' });\r\n        }\r\n    };\r\n\r\n    imprToday = () => {\r\n        if (this.state.selectedGroupe != '') {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            // Date aujourdhui\r\n            let dateToday = new Date()\r\n            let month = '' + (dateToday.getMonth() + 1);\r\n            let day = '' + dateToday.getDate();\r\n            let year = dateToday.getFullYear();\r\n            if (month.length < 2)\r\n                month = '0' + month;\r\n            if (day.length < 2)\r\n                day = '0' + day;\r\n            var today = [year, month, day].join('-');\r\n            //\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/ImprPayGroupe.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire,\r\n                    today: today,\r\n                    groupe: this.state.selectedGroupe.value\r\n                },\r\n                dataType: 'json',\r\n                success: function (code_html, statut) {\r\n                    var server_path = code_html.server_path;\r\n                    var file_path = code_html.file_path\r\n                    var path = server_path + file_path;\r\n                    window.open(path, \"_blank\")\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            toast.error('⛔ Veuillez selectionner le groupe correspondant !!', { containerId: 'A' });\r\n        }\r\n    }\r\n\r\n    impr = () => {\r\n        if (this.state.selectedGroupe != '') {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/ImprPayGroupe.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire,\r\n                    today: '',\r\n                    groupe: this.state.selectedGroupe.value\r\n                },\r\n                dataType: 'json',\r\n                success: function (code_html, statut) {\r\n                    var server_path = code_html.server_path;\r\n                    var file_path = code_html.file_path\r\n                    var path = server_path + file_path;\r\n                    window.open(path, \"_blank\")\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            toast.error('⛔ Veuillez selectionner le groupe correspondant !!', { containerId: 'A' });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px', marginLeft: '0px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Paiments groupes</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-12\">\r\n                            <div className=\"white-box\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Formations</label>\r\n                                            <Select\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={(e) => this.addFormation(e)}\r\n                                                options={this.state.formation}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Groupes</label>\r\n                                            <Select\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={(e) => this.addGroupe(e)}\r\n                                                options={this.state.groupe}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-around' }}>\r\n                                    <div>\r\n                                        <button style={{ borderRadius: '5px', backgroundColor: '#761C19', borderColor: '#761C19' }} type=\"button\" className=\"btn btn-success\" onClick={this.imprToday}><i style={{ color: 'white', paddingRight: '5px' }} class=\"fas fa-print\"></i>Impression aujourd'hui</button>\r\n                                    </div>\r\n                                    <div>\r\n                                        <button style={{ borderRadius: '5px', backgroundColor: '#761C19', borderColor: '#761C19' }} type=\"button\" className=\"btn btn-success\" onClick={this.impr}><i style={{ color: 'white', paddingRight: '5px' }} class=\"fas fa-print\"></i>Impression global</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <ToastContainer transition={Flip} enableMultiContainer containerId={'A'} position={toast.POSITION.TOP_RIGHT} autoClose={2500} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(PaiementEtudGroup);"]},"metadata":{},"sourceType":"module"}