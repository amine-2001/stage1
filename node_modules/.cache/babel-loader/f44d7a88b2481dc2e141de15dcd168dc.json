{"ast":null,"code":"import _classCallCheck from\"C:\\\\wamp\\\\www\\\\gmt_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\wamp\\\\www\\\\gmt_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\wamp\\\\www\\\\gmt_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\wamp\\\\www\\\\gmt_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\wamp\\\\www\\\\gmt_prod\\\\mediatraining\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component,Fragment}from'react';import jQuery from'jquery';import{Link,BrowserRouter as Router,Route,Switch,withRouter,HashRouter,Redirect}from'react-router-dom';import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import Select from'react-select';import Checkbox from'rc-checkbox';import'rc-checkbox/assets/index.css';var AjoutSeance=/*#__PURE__*/function(_Component){_inherits(AjoutSeance,_Component);function AjoutSeance(props){var _this;_classCallCheck(this,AjoutSeance);_this=_possibleConstructorReturn(this,_getPrototypeOf(AjoutSeance).call(this,props));_this.choixGroupe=function(selectedGroupe){if(selectedGroupe!=null){var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var anneeScolaire=userPermissions[0].anneeScolaire;_this.setState({selectedGroupe:selectedGroupe},function(){jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/SelectMatiereByGroup.php',type:'POST',data:{groupId:selectedGroupe.value,anneeScolaire:anneeScolaire},dataType:'json',success:function success(code_html,statut){_this.setState({listMatiere:code_html});}});jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/GetEleveByGroup.php',type:'POST',data:{groupId:selectedGroupe.value,anneeScolaire:anneeScolaire},dataType:'json',success:function success(code_html,statut){_this.setState({listEleve:code_html});}});});}};_this.choixMatiere=function(selectedMatiere){if(selectedMatiere!=null){var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var anneeScolaire=userPermissions[0].anneeScolaire;_this.setState({selectedMatiere:selectedMatiere},function(){jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/SelectEnsByMatiere.php',type:'POST',data:{matiereId:selectedMatiere.value,anneeScolaire:anneeScolaire},dataType:'json',success:function success(code_html,statut){_this.setState({listEnseignant:code_html});}});});}};_this.choixEnseignant=function(selectedEnseignant){if(selectedEnseignant!=null){_this.setState({selectedEnseignant:selectedEnseignant,block:true,blockEleve:true});}};_this.addDateSeance=function(d){_this.setState({dateSeance:d});};_this.addEtatTous=function(e){console.log('Checkbox checked:',e.target.checked);if(e.target.checked==true){_this.setState({blockEleve:false},function(){for(var i=0;i<_this.state.listEleve.length;i++){_this.setState({listEleve:_this.state.listEleve.map(function(el,id){return id===i?Object.assign(el,{etat:0}):el;})});}});}else{_this.setState({blockEleve:true});}};_this.addEtat=function(event,index){if(event.target.checked==true){var etat=1;_this.setState({listEleve:_this.state.listEleve.map(function(el,id){return id===index?Object.assign(el,{etat:etat}):el;})});}else{_this.setState({listEleve:_this.state.listEleve.map(function(el,id){return id===index?Object.assign(el,{etat:0}):el;})});}};_this.addDateDebutSeance=function(d){_this.setState({heureDebut:d});};_this.addDateFinSeance=function(d){_this.setState({heureFin:d});};_this.toggle=function(){_this.setState({listEleve:_this.state.listEleve.map(function(el){return Object.assign(el,{etat:!el.etat});})});};_this.ajout=function(){var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var anneeScolaire=userPermissions[0].anneeScolaire;var userId=userPermissions[0].idUser;// convert date seance\nvar dateSeance=_this.state.dateSeance;var month=''+(dateSeance.getMonth()+1);var day=''+dateSeance.getDate();var year=dateSeance.getFullYear();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;var convertDateSeance=[year,month,day].join('-');//**** Date debut *******/\n// convert heure debut pour hd\nvar hd=_this.state.heureDebut.toTimeString();hd=hd.split(' ')[0];// convert heure debut => ymd hms\nvar date_obOne=_this.state.heureDebut;var dateOne=(\"0\"+date_obOne.getDate()).slice(-2);var monthOne=(\"0\"+(date_obOne.getMonth()+1)).slice(-2);var yearOne=date_obOne.getFullYear();var hoursOne=date_obOne.getHours();var minutesOne=date_obOne.getMinutes();var secondsOne=date_obOne.getSeconds();var dateDebut=yearOne+\"-\"+monthOne+\"-\"+dateOne+\" \"+hoursOne+\":\"+minutesOne+\":\"+secondsOne;//**** Date fin *******/\n// convert heure fin pour hf \nvar hf=_this.state.heureFin.toTimeString();hf=hf.split(' ')[0];// convert heure fin => ymd hms\nvar date_obTwo=_this.state.heureFin;var dateTwo=(\"0\"+date_obTwo.getDate()).slice(-2);var monthTwo=(\"0\"+(date_obTwo.getMonth()+1)).slice(-2);var yearTwo=date_obTwo.getFullYear();var hoursTwo=date_obTwo.getHours();var minutesTwo=date_obTwo.getMinutes();var secondsTwo=date_obTwo.getSeconds();var dateFin=yearTwo+\"-\"+monthTwo+\"-\"+dateTwo+\" \"+hoursTwo+\":\"+minutesTwo+\":\"+secondsTwo;jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/AddAbsence.php',type:'POST',data:{date:convertDateSeance,departSeance:hd,dateDebut:dateDebut,finSeance:hf,dateFin:dateFin,groupId:_this.state.selectedGroupe.value,matiereId:_this.state.selectedMatiere.value,ensId:_this.state.selectedEnseignant.value,eleve:_this.state.listEleve,anneeScolaire:anneeScolaire,userId:userId},dataType:'json',success:function success(code_html,statut){if(code_html.Result==\"OK\"){_this.props.history.push('/Absence');}else if(code_html.Result==\"KO\"){alert(\"erreur,l'un de vos champs est vide!!\");}}});};_this.state={listFormation:[],selectedFormation:'',listMatiere:[],selectedMatiere:'',listEnseignant:[],selectedEnseignant:'',listGroupe:[],selectedGroupe:'',dateSeance:new Date(),heureDebut:new Date(),heureFin:new Date(),listEleve:[],block:false,blockEleve:false,disabled:false};return _this;}_createClass(AjoutSeance,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(JSON.parse(localStorage.getItem('userPermissions'))!=null){var userPermissions=JSON.parse(localStorage.getItem('userPermissions'));var anneeScolaire=userPermissions[0].anneeScolaire;jQuery.ajax({url:process.env.REACT_APP_API_URL+'Back_mediatraining/SelectGroupes.php',type:'POST',data:{anneeScolaire:anneeScolaire},dataType:'json',success:function success(code_html,statut){_this2.setState({listGroupe:code_html});}});}else{document.location='/';}}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{id:\"page-wrapper\",style:{minHeight:'263px',marginLeft:'0px'}},React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"div\",{className:\"row bg-title\"},React.createElement(\"div\",{className:\"col-lg-12\"},React.createElement(\"h4\",{className:\"page-title\"},\"Ajout s\\xE9ance\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-sm-12\"},React.createElement(\"div\",{className:\"white-box\"},React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-start',alignItems:'center',marginBottom:'10px',marginRight:'20px'}},React.createElement(Link,{to:\"/Absence\"},\" \",React.createElement(\"button\",{style:{background:'#DC143C',border:'1px solid #DC143C',borderRadius:'5px'},type:\"button\",className:\"btn btn-info\"},\" \",React.createElement(\"i\",{style:{paddingRight:'5px'},className:\"fas fa-arrow-circle-left\"}),\"Retour\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Groupe\"),React.createElement(Select,{isClearable:true,isSearchable:true,onChange:this.choixGroupe,options:this.state.listGroupe}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Mati\\xE9re\"),React.createElement(Select,{isClearable:true,isSearchable:true,onChange:this.choixMatiere,options:this.state.listMatiere}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Enseignant\"),React.createElement(Select,{isClearable:true,isSearchable:true,onChange:this.choixEnseignant,options:this.state.listEnseignant}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Date s\\xE9ance\"),React.createElement(DatePicker,{class:\"form-control ddate\",style:{border:'none'},selected:this.state.dateSeance,onChange:this.addDateSeance,dateFormat:\"dd/MM/yyy\"})))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Depart s\\xE9ance\"),React.createElement(DatePicker,{class:\"form-control ddate\",style:{border:'none'},selected:this.state.heureDebut,onChange:this.addDateDebutSeance,showTimeSelect:true,showTimeSelectOnly:true,timeIntervals:15,timeCaption:\"Time\",dateFormat:\"h:mm aa\"}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Fin s\\xE9ance\"),React.createElement(DatePicker,{class:\"form-control ddate\",style:{border:'none'},selected:this.state.heureFin,onChange:this.addDateFinSeance,showTimeSelect:true,showTimeSelectOnly:true,timeIntervals:15,timeCaption:\"Time\",dateFormat:\"h:mm aa\"})))),this.state.block==true?React.createElement(Fragment,null,this.state.listEleve.length>0?React.createElement(Fragment,null,React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{style:{paddingRight:'10px'}},\"Pas d'absence\"),React.createElement(Checkbox,{onChange:function onChange(e){return _this3.addEtatTous(e);},disabled:this.state.disabled}))),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"button\",{style:{backgroundColor:'#337AB7',borderColor:'#337AB7',color:'white'},onClick:this.toggle},\"Tous absents\")))):null,this.state.blockEleve==true?React.createElement(\"div\",{className:\"row\"},React.createElement(\"table\",{style:{marginTop:'10px'},className:\"table table-bordered\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Prenom\"),React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Nom\"),React.createElement(\"th\",{style:{textAlign:'center'},scope:\"col\"},\"Assiduit\\xE9\"))),this.state.listEleve.map(function(el,index){return React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"td\",{style:{textAlign:'center'}},React.createElement(\"p\",{style:{textAlign:'center',borderRadius:'5px'}},el.prenom)),React.createElement(\"td\",{style:{textAlign:'center'}},React.createElement(\"p\",{style:{textAlign:'center',borderRadius:'5px'}},el.nom)),React.createElement(\"td\",{style:{textAlign:'center'}},\" \",React.createElement(\"label\",{style:{paddingRight:'10px'}},\" Absent\"),React.createElement(Checkbox,{onChange:function onChange(e){return _this3.addEtat(e,index);},disabled:_this3.state.disabled}))));}))):null):null,React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',marginBottom:'10px',marginTop:'10px'}},React.createElement(\"button\",{style:{borderRadius:'5px'},type:\"button\",className:\"btn btn-success\",onClick:this.ajout},\"Confirmer\")))))));}}]);return AjoutSeance;}(Component);export default withRouter(AjoutSeance);","map":{"version":3,"sources":["C:/wamp/www/gmt_prod/mediatraining/src/AjoutSeance.js"],"names":["React","Component","Fragment","jQuery","Link","BrowserRouter","Router","Route","Switch","withRouter","HashRouter","Redirect","DatePicker","Select","Checkbox","AjoutSeance","props","choixGroupe","selectedGroupe","userPermissions","JSON","parse","localStorage","getItem","anneeScolaire","setState","ajax","url","process","env","REACT_APP_API_URL","type","data","groupId","value","dataType","success","code_html","statut","listMatiere","listEleve","choixMatiere","selectedMatiere","matiereId","listEnseignant","choixEnseignant","selectedEnseignant","block","blockEleve","addDateSeance","d","dateSeance","addEtatTous","e","console","log","target","checked","i","state","length","map","el","id","Object","assign","etat","addEtat","event","index","addDateDebutSeance","heureDebut","addDateFinSeance","heureFin","toggle","ajout","userId","idUser","month","getMonth","day","getDate","year","getFullYear","convertDateSeance","join","hd","toTimeString","split","date_obOne","dateOne","slice","monthOne","yearOne","hoursOne","getHours","minutesOne","getMinutes","secondsOne","getSeconds","dateDebut","hf","date_obTwo","dateTwo","monthTwo","yearTwo","hoursTwo","minutesTwo","secondsTwo","dateFin","date","departSeance","finSeance","ensId","eleve","Result","history","push","alert","listFormation","selectedFormation","listGroupe","Date","disabled","document","location","minHeight","marginLeft","display","justifyContent","alignItems","marginBottom","marginRight","background","border","borderRadius","paddingRight","backgroundColor","borderColor","color","marginTop","textAlign","prenom","nom"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport jQuery from 'jquery'\r\nimport { Link, BrowserRouter as Router, Route, Switch, withRouter, HashRouter, Redirect } from 'react-router-dom'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport Select from 'react-select';\r\nimport Checkbox from 'rc-checkbox';\r\nimport 'rc-checkbox/assets/index.css';\r\n\r\nclass AjoutSeance extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            listFormation: [],\r\n            selectedFormation: '',\r\n            listMatiere: [],\r\n            selectedMatiere: '',\r\n            listEnseignant: [],\r\n            selectedEnseignant: '',\r\n            listGroupe: [],\r\n            selectedGroupe: '',\r\n            dateSeance: new Date(),\r\n            heureDebut: new Date(),\r\n            heureFin: new Date(),\r\n            listEleve: [],\r\n            block: false,\r\n            blockEleve: false,\r\n            disabled: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (JSON.parse((localStorage.getItem('userPermissions'))) != null) {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            jQuery.ajax({\r\n                url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectGroupes.php',\r\n                type: 'POST',\r\n                data: {\r\n                    anneeScolaire: anneeScolaire\r\n                },\r\n                dataType: 'json',\r\n                success: (code_html, statut) => {\r\n                    this.setState({\r\n                        listGroupe: code_html\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            document.location = '/'\r\n        }\r\n    }\r\n\r\n    choixGroupe = selectedGroupe => {\r\n        if (selectedGroupe != null) {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            this.setState({ selectedGroupe }, () => {\r\n                jQuery.ajax({\r\n                    url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectMatiereByGroup.php',\r\n                    type: 'POST',\r\n                    data: {\r\n                        groupId: selectedGroupe.value,\r\n                        anneeScolaire: anneeScolaire\r\n                    },\r\n                    dataType: 'json',\r\n                    success: (code_html, statut) => {\r\n                        this.setState({\r\n                            listMatiere: code_html\r\n                        });\r\n                    }\r\n                });\r\n                jQuery.ajax({\r\n                    url: process.env.REACT_APP_API_URL + 'Back_mediatraining/GetEleveByGroup.php',\r\n                    type: 'POST',\r\n                    data: {\r\n                        groupId: selectedGroupe.value,\r\n                        anneeScolaire: anneeScolaire\r\n                    },\r\n                    dataType: 'json',\r\n                    success: (code_html, statut) => {\r\n                        this.setState({\r\n                            listEleve: code_html\r\n                        });\r\n                    }\r\n                });\r\n            })\r\n        }\r\n    }\r\n\r\n    choixMatiere = selectedMatiere => {\r\n        if (selectedMatiere != null) {\r\n            var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n            var anneeScolaire = userPermissions[0].anneeScolaire\r\n            this.setState({ selectedMatiere }, () => {\r\n                jQuery.ajax({\r\n                    url: process.env.REACT_APP_API_URL + 'Back_mediatraining/SelectEnsByMatiere.php',\r\n                    type: 'POST',\r\n                    data: {\r\n                        matiereId: selectedMatiere.value,\r\n                        anneeScolaire: anneeScolaire\r\n                    },\r\n                    dataType: 'json',\r\n                    success: (code_html, statut) => {\r\n                        this.setState({\r\n                            listEnseignant: code_html\r\n                        });\r\n                    }\r\n                });\r\n            })\r\n        }\r\n    };\r\n\r\n    choixEnseignant = selectedEnseignant => {\r\n        if (selectedEnseignant != null) {\r\n            this.setState({\r\n                selectedEnseignant,\r\n                block: true,\r\n                blockEleve: true\r\n            })\r\n        }\r\n    };\r\n\r\n    addDateSeance = d => {\r\n        this.setState({\r\n            dateSeance: d\r\n        });\r\n    }\r\n\r\n    addEtatTous = (e) => {\r\n        console.log('Checkbox checked:', (e.target.checked));\r\n        if (e.target.checked == true) {\r\n            this.setState({\r\n                blockEleve: false\r\n            }, () => {\r\n                for (var i = 0; i < this.state.listEleve.length; i++) {\r\n                    this.setState({\r\n                        listEleve: this.state.listEleve.map((el, id) => (id === i ? Object.assign(el, { etat: 0 }) : el))\r\n                    })\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.setState({\r\n                blockEleve: true\r\n            });\r\n        }\r\n    }\r\n\r\n    addEtat = (event, index) => {\r\n        if (event.target.checked == true) {\r\n            let etat = 1\r\n            this.setState({\r\n                listEleve: this.state.listEleve.map((el, id) => (id === index ? Object.assign(el, { etat: etat }) : el))\r\n            })\r\n        }\r\n        else {\r\n            this.setState({\r\n                listEleve: this.state.listEleve.map((el, id) => (id === index ? Object.assign(el, { etat: 0 }) : el))\r\n            })\r\n        }\r\n    }\r\n\r\n    addDateDebutSeance = d => {\r\n        this.setState({\r\n            heureDebut: d\r\n        });\r\n    }\r\n\r\n    addDateFinSeance = d => {\r\n        this.setState({\r\n            heureFin: d\r\n        });\r\n    }\r\n\r\n    toggle = () => {\r\n        this.setState({\r\n            listEleve: this.state.listEleve.map((el) => (Object.assign(el, { etat: !el.etat })))\r\n        })\r\n    }\r\n\r\n    ajout = () => {\r\n        var userPermissions = JSON.parse((localStorage.getItem('userPermissions')));\r\n        var anneeScolaire = userPermissions[0].anneeScolaire\r\n        var userId = userPermissions[0].idUser\r\n        // convert date seance\r\n        let dateSeance = this.state.dateSeance\r\n        let month = '' + (dateSeance.getMonth() + 1);\r\n        let day = '' + dateSeance.getDate();\r\n        let year = dateSeance.getFullYear();\r\n        if (month.length < 2)\r\n            month = '0' + month;\r\n        if (day.length < 2)\r\n            day = '0' + day;\r\n        var convertDateSeance = [year, month, day].join('-');\r\n        //**** Date debut *******/\r\n        // convert heure debut pour hd\r\n        var hd = this.state.heureDebut.toTimeString();\r\n        hd = hd.split(' ')[0];\r\n        // convert heure debut => ymd hms\r\n        let date_obOne = this.state.heureDebut;\r\n        let dateOne = (\"0\" + date_obOne.getDate()).slice(-2);\r\n        let monthOne = (\"0\" + (date_obOne.getMonth() + 1)).slice(-2);\r\n        let yearOne = date_obOne.getFullYear();\r\n        let hoursOne = date_obOne.getHours();\r\n        let minutesOne = date_obOne.getMinutes();\r\n        let secondsOne = date_obOne.getSeconds();\r\n        var dateDebut = yearOne + \"-\" + monthOne + \"-\" + dateOne + \" \" + hoursOne + \":\" + minutesOne + \":\" + secondsOne;\r\n        //**** Date fin *******/\r\n        // convert heure fin pour hf \r\n        var hf = this.state.heureFin.toTimeString();\r\n        hf = hf.split(' ')[0];\r\n        // convert heure fin => ymd hms\r\n        let date_obTwo = this.state.heureFin;\r\n        let dateTwo = (\"0\" + date_obTwo.getDate()).slice(-2);\r\n        let monthTwo = (\"0\" + (date_obTwo.getMonth() + 1)).slice(-2);\r\n        let yearTwo = date_obTwo.getFullYear();\r\n        let hoursTwo = date_obTwo.getHours();\r\n        let minutesTwo = date_obTwo.getMinutes();\r\n        let secondsTwo = date_obTwo.getSeconds();\r\n        var dateFin = yearTwo + \"-\" + monthTwo + \"-\" + dateTwo + \" \" + hoursTwo + \":\" + minutesTwo + \":\" + secondsTwo;\r\n        jQuery.ajax({\r\n            url: process.env.REACT_APP_API_URL + 'Back_mediatraining/AddAbsence.php',\r\n            type: 'POST',\r\n            data: {\r\n                date: convertDateSeance,\r\n                departSeance: hd,\r\n                dateDebut: dateDebut,\r\n                finSeance: hf,\r\n                dateFin: dateFin,\r\n                groupId: this.state.selectedGroupe.value,\r\n                matiereId: this.state.selectedMatiere.value,\r\n                ensId: this.state.selectedEnseignant.value,\r\n                eleve: this.state.listEleve,\r\n                anneeScolaire: anneeScolaire,\r\n                userId: userId\r\n            },\r\n            dataType: 'json',\r\n            success: (code_html, statut) => {\r\n                if (code_html.Result == \"OK\") {\r\n                    this.props.history.push('/Absence');\r\n                }\r\n                else if (code_html.Result == \"KO\") {\r\n                    alert(\"erreur,l'un de vos champs est vide!!\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"page-wrapper\" style={{ minHeight: '263px', marginLeft: '0px' }}>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row bg-title\">\r\n                        <div className=\"col-lg-12\">\r\n                            <h4 className=\"page-title\">Ajout séance</h4>\r\n                        </div>\r\n                        {/* /.col-lg-12 */}\r\n                    </div>\r\n                    {/* /.row */}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-12\">\r\n                            <div className=\"white-box\">\r\n                                <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginBottom: '10px', marginRight: '20px' }}>\r\n                                    <Link to=\"/Absence\" > <button style={{ background: '#DC143C', border: '1px solid #DC143C', borderRadius: '5px' }} type=\"button\" className=\"btn btn-info\"> <i style={{ paddingRight: '5px' }} className=\"fas fa-arrow-circle-left\"></i>Retour</button></Link>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Groupe</label>\r\n                                            <Select\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={this.choixGroupe}\r\n                                                options={this.state.listGroupe}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Matiére</label>\r\n                                            <Select\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={this.choixMatiere}\r\n                                                options={this.state.listMatiere}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Enseignant</label>\r\n                                            <Select\r\n                                                isClearable={true}\r\n                                                isSearchable={true}\r\n                                                onChange={this.choixEnseignant}\r\n                                                options={this.state.listEnseignant}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Date séance</label>\r\n                                            <DatePicker class=\"form-control ddate\" style={{ border: 'none' }}\r\n                                                selected={this.state.dateSeance}\r\n                                                onChange={this.addDateSeance}\r\n                                                dateFormat=\"dd/MM/yyy\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Depart séance</label>\r\n                                            <DatePicker class=\"form-control ddate\" style={{ border: 'none' }}\r\n                                                selected={this.state.heureDebut}\r\n                                                onChange={this.addDateDebutSeance}\r\n                                                showTimeSelect\r\n                                                showTimeSelectOnly\r\n                                                timeIntervals={15}\r\n                                                timeCaption=\"Time\"\r\n                                                dateFormat=\"h:mm aa\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-md-6\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Fin séance</label>\r\n                                            <DatePicker class=\"form-control ddate\" style={{ border: 'none' }}\r\n                                                selected={this.state.heureFin}\r\n                                                onChange={this.addDateFinSeance}\r\n                                                showTimeSelect\r\n                                                showTimeSelectOnly\r\n                                                timeIntervals={15}\r\n                                                timeCaption=\"Time\"\r\n                                                dateFormat=\"h:mm aa\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                {this.state.block == true ?\r\n                                    (\r\n                                        <Fragment>\r\n                                            {this.state.listEleve.length > 0 ?\r\n                                                (<Fragment>\r\n                                                    <div className=\"col-md-6\">\r\n                                                        <div className=\"form-group\">\r\n                                                            <label style={{ paddingRight: '10px' }}>Pas d'absence</label>\r\n                                                            <Checkbox\r\n                                                                onChange={(e) => this.addEtatTous(e)}\r\n                                                                disabled={this.state.disabled}\r\n                                                            />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"col-md-6\">\r\n                                                        <div className=\"form-group\">\r\n                                                            <button style={{ backgroundColor: '#337AB7', borderColor: '#337AB7', color: 'white' }} onClick={this.toggle}>Tous absents</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </Fragment>) : (null)}\r\n                                            {this.state.blockEleve == true ?\r\n                                                (<div className=\"row\">\r\n                                                    <table style={{ marginTop: '10px' }} className=\"table table-bordered\">\r\n                                                        <thead>\r\n                                                            <tr>\r\n                                                                <th style={{ textAlign: 'center' }} scope=\"col\">Prenom</th>\r\n                                                                <th style={{ textAlign: 'center' }} scope=\"col\">Nom</th>\r\n                                                                <th style={{ textAlign: 'center' }} scope=\"col\">Assiduité</th>\r\n                                                            </tr>\r\n                                                        </thead>\r\n                                                        {this.state.listEleve.map((el, index) =>\r\n                                                            <tbody>\r\n                                                                <tr>\r\n                                                                    <td style={{ textAlign: 'center' }}><p style={{ textAlign: 'center', borderRadius: '5px' }}>{el.prenom}</p></td>\r\n                                                                    <td style={{ textAlign: 'center' }}><p style={{ textAlign: 'center', borderRadius: '5px' }}>{el.nom}</p></td>\r\n                                                                    <td style={{ textAlign: 'center' }}> <label style={{ paddingRight: '10px' }}> Absent</label>\r\n                                                                        <Checkbox\r\n                                                                            onChange={(e) => this.addEtat(e, index)}\r\n                                                                            disabled={this.state.disabled}\r\n                                                                        />\r\n                                                                    </td>\r\n                                                                </tr>\r\n                                                            </tbody>\r\n                                                        )}\r\n                                                    </table>\r\n                                                </div>) : (null)}\r\n                                        </Fragment>) : (null)}\r\n                                <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px', marginTop: '10px' }}>\r\n                                    <button style={{ borderRadius: '5px' }} type=\"button\" className=\"btn btn-success\" onClick={this.ajout}>Confirmer</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(AjoutSeance);"]},"metadata":{},"sourceType":"module"}