"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function r(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function o(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var a=function(e,t){return e*t+"px"},s=function(e){return e&&"[object Function]"==={}.toString.call(e)},l={childrenKey:"children",classes:{},depthGap:20,displayedName:function(e){return e.data.name},filter:function(){return!0},gapMode:"margin",horizontalLineStyles:{stroke:"black",strokeWidth:1,strokeDasharray:"1 1"},idKey:"id",opened:[],verticalLineOffset:5,verticalLineStyles:{stroke:"black",strokeWidth:1,strokeDasharray:"1 1"},verticalLineTopOffset:0},d=function(e){return Object.keys(e).filter((function(t){return!!e[t]})).reduce((function(e,t){return e?e+(t?" "+t:""):""+t}),"")},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[0]&&"string"==typeof e[0]?e.join(" "):d(e[0])};function h(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var p="hyperNodeArrowIcon___3MZdV",u="opened___18SZM";h(".hyperNodeArrowIcon___3MZdV {\n  transition: transform 0.1s ease;\n  cursor: pointer;\n  margin-right: 4px; }\n  .hyperNodeArrowIcon___3MZdV.opened___18SZM {\n    transform: rotate(90deg); }\n");var f=function(t){var n,r=t.onClick,i=t.opened;return e.createElement("svg",{className:c((n={},n[p]=!0,n[u]=!!i,n)),xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",onClick:r},e.createElement("path",{d:"M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"}))},y="loadingSpinner___2oRi6";h(".loadingSpinner___2oRi6 {\n  transform: scale(0.3);\n  animation: loading-spinner___3WGvQ 1s linear infinite;\n  margin-right: 4px; }\n\n@keyframes loading-spinner___3WGvQ {\n  from {\n    transform: rotate(0deg); }\n  to {\n    transform: rotate(360deg); } }\n");var g=function(){return e.createElement("svg",{className:y,xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 48 48"},e.createElement("g",{fill:"none"},e.createElement("path",{id:"track",fill:"#C6CCD2",d:"M24,48 C10.745166,48 0,37.254834 0,24 C0,10.745166 10.745166,0 24,0\n        C37.254834,0 48,10.745166 48,24 C48,37.254834 37.254834,48 24,48 Z M24,44\n        C35.045695,44 44,35.045695 44,24 C44,12.954305 35.045695,4 24,4\n        C12.954305,4 4,12.954305 4,24 C4,35.045695 12.954305,44 24,44 Z"}),e.createElement("path",{id:"section",fill:"#3F4850",d:"M24,0 C37.254834,0 48,10.745166 48,24 L44,24 C44,12.954305 35.045695,4 24,4 L24,0 Z"})))},v="hyperNode___30r3w";h(".hyperNode___30r3w {\n  display: flex;\n  align-items: center; }\n");var _=function(t){var n=t.displayedName,r=void 0===n?l.displayedName:n,i=t.node,o=t.onSelect,a=t.onToggle;return e.createElement("div",{className:v,onClick:o},(i.hasChildren()||i.options.async)&&!i.isLoading()&&e.createElement(f,{onClick:a,opened:i.isOpened()&&!!i.hasChildren()}),i.isLoading()&&e.createElement(g,null),e.createElement("div",null,s(r)?r(i):i.data[r]))},C="verticalLine___GRYJn",m="verticalSvgLine___3xCb4";h(".verticalLine___GRYJn {\n  position: absolute;\n  top: 0;\n  transition: all 0.2s ease; }\n  .verticalLine___GRYJn .verticalSvgLine___3xCb4 {\n    transition: all 0.2s ease; }\n");var b=function(t){var n=t.depth,r=t.depthGap,i=t.count,o=t.nodeHeight,s=t.verticalLineOffset,d=void 0===s?l.verticalLineOffset:s,c=t.verticalLineStyles,h=void 0===c?l.verticalLineStyles:c,p=t.verticalLineTopOffset,u=void 0===p?l.verticalLineTopOffset:p;return e.createElement("div",{className:C,style:{left:d+"px",marginLeft:a(n,r),top:u+"px"}},e.createElement("svg",{style:{height:Math.floor(i*o-(o?o/2:0))-u+"px",width:h.strokeWidth+"px",position:"absolute",transition:"all 0.2s ease"}},e.createElement("line",{x1:"0%",y1:"0%",x2:"0%",y2:"100%",className:m,style:h})))},N="horizontalLine___1P2PA";h(".horizontalLine___1P2PA {\n  position: absolute;\n  top: 0;\n  display: flex;\n  align-items: center;\n  height: 100%; }\n");var L=function(t){var n=t.depth,r=t.depthGap,i=t.verticalLineOffset,o=void 0===i?l.verticalLineOffset:i,a=t.horizontalLineStyles,s=void 0===a?l.horizontalLineStyles:a,d=t.gapMode;return e.createElement("div",{className:N,style:{width:r-o+"px",left:"padding"===d?o-r+n*r+"px":o-r+"px"}},e.createElement("svg",{style:{height:s.strokeWidth+"px",width:"100%"}},e.createElement("line",{x1:"0%",y1:"0%",x2:"100%",y2:"0%",style:s})))},D="dragZone___1hRQ8",O="dragZoneVisible___xCdOl",E="dragZoneItem___hWu26",w="dragZoneItemSelected___NJUnL";h(".dragZone___1hRQ8 {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  visibility: hidden;\n  opacity: 0; }\n  .dragZone___1hRQ8.dragZoneVisible___xCdOl {\n    visibility: visible;\n    opacity: 1; }\n  .dragZone___1hRQ8 .dragZoneItem___hWu26 {\n    transition: background-color 0.2s ease;\n    background-color: transparent;\n    width: 100%;\n    height: 100%; }\n    .dragZone___1hRQ8 .dragZoneItem___hWu26.dragZoneItemSelected___NJUnL {\n      background-color: rgba(179, 255, 192, 0.5); }\n");var K=function(t){var n,r,i,o,s=t.depth,l=t.depthGap,d=t.isDragging,h=t.node,p=t.onDragEnterAfter,u=t.onDragEnterBefore,f=t.onDragEnterChildren,y=t.onDragLeave;return e.createElement("div",{className:c((n={},n[D]=!0,n[O]=!!d,n)),style:{marginLeft:a(s,l)},onDragLeave:y},e.createElement("div",{className:c((r={},r[E]=!0,r[w]="before"===h.getNodeDropContainer(),r)),onDragEnter:u}),e.createElement("div",{className:c((i={},i[E]=!0,i[w]="children"===h.getNodeDropContainer(),i)),onDragEnter:f}),e.createElement("div",{className:c((o={},o[E]=!0,o[w]="after"===h.getNodeDropContainer(),o)),onDragEnter:p}))},S={hyperTreeView:"hyperTreeView___32Aaq",hyperTreeNodeWrapper:"hyperTreeNodeWrapper___8UZOJ",hyperNodeWrapper:"hyperNodeWrapper___-4xPl",child:"child___2_fIN",collapsed:"collapsed___3-8dN"};h(".hyperTreeView___32Aaq .hyperTreeNodeWrapper___8UZOJ {\n  position: relative; }\n  .hyperTreeView___32Aaq .hyperTreeNodeWrapper___8UZOJ .hyperNodeWrapper___-4xPl {\n    position: relative;\n    opacity: 1; }\n  .hyperTreeView___32Aaq .hyperTreeNodeWrapper___8UZOJ .child___2_fIN {\n    position: relative;\n    transition: all 0.2s ease;\n    transform-origin: top;\n    transform-style: flat;\n    max-height: 99999px;\n    transform: scaleY(1);\n    opacity: 1;\n    visibility: visible; }\n    .hyperTreeView___32Aaq .hyperTreeNodeWrapper___8UZOJ .child___2_fIN.collapsed___3-8dN {\n      transition: all 0.2s cubic-bezier(0, 1, 0, 1);\n      transform: scaleY(0);\n      max-height: 0;\n      opacity: 0;\n      visibility: hidden;\n      overflow: hidden; }\n");var x=e.forwardRef((function(n,r){var i,o,s=n.classes,d=void 0===s?l.classes:s,h=n.depth,p=n.depthGap,u=void 0===p?l.depthGap:p,f=n.disableHorizontalLines,y=n.disableLines,g=n.displayedName,v=void 0===g?l.displayedName:g,C=n.draggable,m=n.draggableHandlers,b=n.gapMode,N=void 0===b?l.gapMode:b,D=n.horizontalLineStyles,O=n.isDragging,E=n.node,w=n.renderDragZone,x=n.renderNode,k=n.setOpen,P=n.setSelected,T=n.staticNodeHeight,I=n.verticalLineOffset,H=void 0===I?l.verticalLineOffset:I,Z=e.useCallback((function(e){e.stopPropagation(),k&&k(E)}),[E,k]),W=e.useCallback((function(){P&&P(E,!E.isSelected())}),[E,P]),B={};T&&(B.height=T+"px");var A="padding"===N?"paddingLeft":"marginLeft",G=e.useCallback((function(e){return m.handleDragEnter(E,e)}),[m,E]);return e.createElement("div",{draggable:C,onDragStart:C?m.handleDragStart:void 0,onDragEnd:C?m.handleDrop(E,E.getNodeDropContainer()):void 0,className:c((i={},i[S.hyperNodeWrapper]=!0,i[S.selected]=E.isSelected(),i[S.dropContainer]=!!E.getNodeDropContainer(),i[d.nodeWrapper||""]=!!d.nodeWrapper,i[d.selectedNodeWrapper||""]=!(!d.selectedNodeWrapper||!E.isSelected()),i)),style:t((o={},o[A]=a(h,u),o),B),ref:r},C&&w?w({depth:h,depthGap:u,isDragging:O,node:E,onDragEnterAfter:G("after"),onDragEnterBefore:G("before"),onDragEnterChildren:G("children"),onDragLeave:m.handleDragLeave(E)}):C&&e.createElement(K,{depth:h,depthGap:u,isDragging:O,node:E,onDragEnterAfter:G("after"),onDragEnterBefore:G("before"),onDragEnterChildren:G("children"),onDragLeave:m.handleDragLeave(E)}),x?x({depth:h,depthGap:u,displayedName:v,node:E,nodeRef:r,offsetProp:A,onSelect:W,onToggle:Z}):e.createElement(_,{displayedName:v,node:E,onSelect:W,onToggle:Z}),!E.options.root&&!(y||f)&&e.createElement(L,{depth:h,depthGap:u,gapMode:N,horizontalLineStyles:D,verticalLineOffset:H}))})),k=function(r){var i,o=r.classes,a=void 0===o?l.classes:o,s=r.depth,d=r.depthGap,h=void 0===d?l.depthGap:d,p=r.disableLines,u=r.disableTransitions,f=r.disableVerticalLines,y=r.node,g=r.nodeHeight,v=r.verticalLineOffset,_=r.verticalLineStyles,C=r.verticalLineTopOffset,m=n(r,["classes","depth","depthGap","disableLines","disableTransitions","disableVerticalLines","node","nodeHeight","verticalLineOffset","verticalLineStyles","verticalLineTopOffset"]);return y.hasChildren()?!y.isOpened()&&u?null:e.createElement("div",{className:c((i={},i[S.child]=!0,i[S.collapsed]=!y.isOpened(),i[a.children||""]=!!a.children,i[a.collapsedChildren||""]=!(!a.collapsedChildren||y.isOpened()),i))},e.createElement(P,t({classes:a,data:y.getChildren(),depth:s+1,depthGap:h,disableLines:p,disableVerticalLines:f,disableTransitions:u,nodeHeight:g,verticalLineOffset:v,verticalLineStyles:_,verticalLineTopOffset:C},m)),!(p||f)&&e.createElement(b,{count:y.options.currentChilrenCount,depth:s,depthGap:h,nodeHeight:g,verticalLineOffset:v,verticalLineStyles:_,verticalLineTopOffset:C})):null},P=e.forwardRef((function(r,i){var o=r.classes,a=void 0===o?l.classes:o,s=r.data,d=r.depth,h=void 0===d?0:d,p=n(r,["classes","data","depth"]);return e.createElement("div",{className:c(S.hyperTreeView,a.level)},s.map((function(n){return e.createElement("div",{key:n.getReactKey(),className:c(S.hyperTreeNodeWrapper,a.parentChildren)},e.createElement(x,t({classes:a,depth:h,node:n,ref:i},p)),e.createElement(k,t({classes:a,depth:h,node:n},p)))})))})),T=function(r){var i=r.classes,o=void 0===i?l.classes:i,a=r.staticNodeHeight,s=n(r,["classes","staticNodeHeight"]),d=e.useRef(null),c=e.useState(a||0),h=c[0],p=c[1];return e.useEffect((function(){!d.current||h||a||p(d.current.clientHeight)}),[h,a]),e.createElement("div",{className:o.treeWrapper},e.createElement(P,t({classes:o,depth:0,nodeHeight:h,ref:d,staticNodeHeight:a},s)))},I=function(){function e(e,t,n){this.data=e,this.id=e[t.idKey],this.options=t,this.children=n}return e.prototype.getData=function(){return this.data},e.prototype.setData=function(e){this.data=e},e.prototype.getChildren=function(){return this.children||[]},e.prototype.setNodeChildren=function(e,t,n){return!this.hasChildren()||n?(this.setChildren(this.setNodesParent(e,this)),this.getChildren()):"first"===t?(this.setChildren(this.setNodesParent(o(e,this.children||[]),this)),this.getChildren()):(this.setChildren(this.setNodesParent(o(this.children||[],e),this)),this.getChildren())},e.prototype.removeChild=function(e){this.setChildren(this.getChildren().filter((function(t){return t.id!==e.id})))},e.prototype.setChildren=function(e){this.children=this.setNodesParent(e,this)},e.prototype.hasChildren=function(){return this.children&&0!==this.children.length},e.prototype.getParent=function(){return this.options.parent},e.prototype.setParent=function(e){this.options.parent=e},e.prototype.setNodesParent=function(e,t){return e.map((function(e){return e.setParent(t),e}))},e.prototype.setChildrenCount=function(e){this.options.childrenCount=e},e.prototype.getFirstChild=function(){return this.getChildren()[0]||null},e.prototype.getLastChild=function(){return this.children&&0!==this.children.length?this.children[this.children.length-1]:null},e.prototype.setOpened=function(e){this.options.opened=e||!1},e.prototype.isOpened=function(){return this.options.opened},e.prototype.setLoading=function(e){this.options.loading=e||!1},e.prototype.isLoading=function(){return this.options.loading},e.prototype.setSelected=function(e){this.options.selected=e||!1},e.prototype.isSelected=function(){return this.options.selected},e.prototype.setPath=function(e){this.options.path=e+"/"+this.id},e.prototype.getPath=function(e){return e?this.options.path.split("/").filter((function(e){return!!e})):this.options.path},e.prototype.setNodeDropContainer=function(e){void 0===e&&(e=!1),this.options.dropContainer=e},e.prototype.getNodeDropContainer=function(){return this.options.dropContainer},e.prototype.getReactKey=function(){return this.options.reactKey},e}(),H=function(){function e(e,t,n){this.id=e,this.data=t,this.options=n,this.enhancedData=[],this.ids=[],n.enhance&&this.enhance()}return e.prototype.on=function(e){e()},e.prototype.sort=function(e){return e.sort(this.options.sort),e},e.prototype.staticEnhance=function(e,t){var n;return t instanceof I?n=t:t&&(n=this.getNodeById(t)),this._staticEnhance(e,n)},e.prototype.enhance=function(e){return this.enhancedData=this._enhance(e||this.data,this.options),this.enhancedData},e.prototype.enhanceNodes=function(e){var t=this;void 0===e&&(e=!1),e&&(this.enhancedData=this._staticShallowEnahance(this.enhancedData)),this.traverse((function(e){t._calculateChildrenCount(e)}),!1)},e.prototype.flat=function(e){var t=e?this.data:this.enhancedData;return this.flatData=this._flat(t),this.ids=this.flatData.map((function(e){return e.id})),this.flatData},e.prototype.unselectAll=function(){this.traverse((function(e){e.setSelected(!1)}))},e.prototype.getOpenedNodes=function(){var e=[];return this.traverse((function(t){t.isOpened()&&e.push(t)})),e},e.prototype.addChildren=function(e,t,n){void 0===n&&(n="first"),this._addChildren(this.data,e,t,n)},e.prototype.addSibling=function(e,t,n){void 0===n&&(n="after"),this._addSibling(this.data,e,t,n)},e.prototype.remove=function(e,t){this._remove(this.data,null,e,t)},e.prototype.traverseRaw=function(e,t){void 0===t&&(t=!0),t?this._traverseDeep(this.data,e):this._traverseBreadth(this.data,e)},e.prototype.traverse=function(e,t){void 0===t&&(t=!0),t?this._traverseDeep(this.enhancedData,e):this._traverseBreadth(this.enhancedData,e)},e.prototype.getNodeById=function(e){return this._getNodeById(e,this.enhancedData)},e.prototype._addChildren=function(e,t,n,r){for(var i=0;i<e.length;i+=1){if(e[i][this.options.idKey]===t)switch(r){case"first":return void(e[i][this.options.childrenKey]=o(n,e[i][this.options.childrenKey]||[]));case"last":return void(e[i][this.options.childrenKey]=o(e[i][this.options.childrenKey]||[],n));default:return}else if(e[i][this.options.childrenKey]&&0!==e[i][this.options.childrenKey].length)return void this._addChildren(e[i][this.options.childrenKey],t,n,r);return}},e.prototype._addSibling=function(e,t,n,r){for(var i=this,o=0;o<e.length;o+=1){if(e[o][this.options.childrenKey]&&0!==e[o][this.options.childrenKey].length){var a=e[o][this.options.childrenKey].findIndex((function(e){return e[i.options.idKey]===t}));if(a>-1)return void e[o][this.options.childrenKey].splice("before"===r?a:a+1,0,n);this._addSibling(e[o][this.options.childrenKey],t,n,r)}return}},e.prototype._flat=function(e){var t=this,r=[];return e.forEach((function(e){var i=e.children,o=n(e,["children"]);r.push(o),i&&0!==i.length&&r.push.apply(r,t._flat(i))})),r},e.prototype._enhance=function(e,t,n){var r=this,i=[];return this.sort(e).forEach((function(e,o){var a,s=e[r.options.childrenKey]&&0!==e[r.options.childrenKey].length?e[r.options.childrenKey]:[],l=!1;"boolean"==typeof t.defaultOpened&&(l=t.defaultOpened),Array.isArray(t.defaultOpened)&&(l=t.defaultOpened.includes(e[t.idKey]));var d=new I(e,{opened:l,selected:!1,root:!n,leaf:!s,hasChildren:0!==s.length,async:!!e.getChildren,parent:n,childrenCount:0,currentChilrenCount:0,loading:!1,idKey:r.options.idKey,childrenKey:r.options.childrenKey,path:"",dropContainer:!1,reactKey:""});d.setPath(n?n.options.path:""),d.options.reactKey=d[r.options.idKey]+"-"+d.getPath()+"-"+o;var c=[];if(0!==s.length&&(c=r._enhance(r.sort(s),t,d),t.filter&&0!==c.length&&0!==(c=c.filter((function(e){return!!e.getChildren().some((function(e){return e.isOpened()}))||t.filter&&t.filter(e)}))).length))for(var h=0;h<c.length;h+=1)c[h].setOpened(!0),c[h].options.parent&&(null===(a=c[h].options.parent)||void 0===a||a.setOpened(!0));d.options.leaf&&d.setOpened(!0),d.setChildren(c),r._calculateChildrenCount(d),(!t.filter||!d.options.leaf||t.filter&&t.filter(d))&&i.push(d)})),i},e.prototype._staticEnhance=function(e,t){var n=this,r=[];return e.forEach((function(e,i){var o=e[n.options.childrenKey]||[],a=new I(e,{opened:!1,selected:!1,root:!t,leaf:0===o.length,hasChildren:0!==o.length,async:!!e.getChildren,parent:t,childrenCount:0,currentChilrenCount:0,loading:!1,idKey:n.options.idKey,childrenKey:n.options.childrenKey,path:"",dropContainer:!1,reactKey:""});a.setPath(t?t.options.path:""),a.options.reactKey=a[n.options.idKey]+"-"+a.getPath()+"-"+i;var s=[];0!==o.length&&(s=n._staticEnhance(o,a)),a.setChildren(s),n._calculateChildrenCount(a),r.push(a)})),r},e.prototype._staticShallowEnahance=function(e,t){var n=this,r=[];return e.forEach((function(e){var i=e[n.options.childrenKey]||[];e.options.parent=t,e.setPath(t?t.options.path:"");var o=[];0!==i.length&&(o=n._staticShallowEnahance(i,e)),e.setChildren(o),n._calculateChildrenCount(e),r.push(e)})),r},e.prototype._calculateChildrenCount=function(e){var t=e.getChildren().reduce((function(e,t){return t.isOpened()?e+=t.options.childrenCount:e}),0);e.isOpened()?e.options.childrenCount=e.getChildren().length+t:e.options.childrenCount=e.getChildren().length;var n=e.getLastChild();if(n&&n.isOpened()){var r=e.options.childrenCount;e.options.currentChilrenCount=r-n.options.childrenCount}else e.options.currentChilrenCount=e.options.childrenCount},e.prototype._remove=function(e,t,n,r){for(var i=0;i<e.length;i+=1){if(e[i][this.options.idKey]===n){var a=e[i];return e.splice(i,1),void(t&&a[this.options.childrenKey]&&0!==a[this.options.childrenKey].length&&r&&(t[this.options.childrenKey]="start"===r?o(a[this.options.childrenKey],t[this.options.childrenKey]||[]):o(t[this.options.childrenKey]||[],a[this.options.childrenKey])))}e[i][this.options.childrenKey]&&0!==e[i][this.options.childrenKey].length&&this._remove(e[i][this.options.childrenKey],e[i],n,r)}},e.prototype._getNodeById=function(e,t){for(var n=0;n<t.length;n+=1){if((""+t[n][this.options.idKey]).toLowerCase()===(""+e).toLowerCase())return t[n];if(t[n][this.options.childrenKey]&&0!==t[n][this.options.childrenKey].length){var r=this._getNodeById(e,t[n][this.options.childrenKey]);if(r)return r}}return null},e.prototype._traverseDeep=function(e,t,n){var r=this;void 0===n&&(n=0),e.forEach((function(e,i){t(e,i,n),e.children&&0!==e.children.length&&r._traverseDeep(e.children,t,n+1)}))},e.prototype._traverseBreadth=function(e,t,n){var r=this;void 0===n&&(n=0),e.forEach((function(e,i){e.children&&0!==e.children.length&&r._traverseDeep(e.children,t,n+1),t(e,i,n)}))},e}(),Z=new(function(){function e(){this.trees={}}return e.prototype.getIds=function(){return Object.keys(this.trees)},e.prototype.safeUpdate=function(e,t){return this.trees[e]?(this.trees[e].instance=t,this.trees[e].handlers={}):this.trees[e]={instance:t,handlers:{}},this},e.prototype.remove=function(e){var t=this.trees,r=e,i=(t[r],n(t,["symbol"==typeof r?r:r+""]));return this.trees=i,this},e.prototype.safeUpdateHandler=function(e,n,r){var i;return this.trees[e]&&(this.trees[e].handlers=t(t({},this.trees[e].handlers),((i={})[n]=r,i))),this},e.prototype.removeHandler=function(e,t){if(this.trees[e]){var r=this.trees[e].handlers,i=t,o=(r[i],n(r,["symbol"==typeof i?i:i+""]));this.trees[e].handlers=o}return this},e.prototype.updateLoadedData=function(e,t){this.trees[e]&&(this.trees[e].loadedData=t)},e}()),W={sort:function(){return 0}};exports.Arrow=f,exports.DefaultNode=_,exports.DragZone=K,exports.HorizontalLine=L,exports.Loader=g,exports.Tree=T,exports.VerticalLine=b,exports.default=T,exports.treeHandlers=Z,exports.useTreeState=function(t){var n,a=t.id,d=t.data,c=t.filter,h=t.sort,p=t.defaultOpened,u=t.multipleSelect,f=t.idKey,y=void 0===f?l.idKey:f,g=t.childrenKey,v=void 0===g?l.childrenKey:g,_=(n=e.useState(Object.create(null))[1],e.useCallback((function(e){e&&e(),n(Object.create(null))}),[n])),C=e.useState(null),m=C[0],b=C[1],N=e.useState(!1),L=N[0],D=N[1],O=e.useState(!1),E=O[0],w=O[1],K=e.useMemo((function(){return new H(a,Array.isArray(d)?d:[d],{idKey:y,childrenKey:v,defaultOpened:p,filter:c,enhance:!0,sort:h||W.sort})}),[d,c,a,h,y,v]),S=e.useCallback((function(e,t){if(e instanceof I)e.setLoading(t),_();else{var n=K.getNodeById(e);n&&(n.setLoading(t),_())}}),[_,K]),x=e.useCallback((function(e,t){if(!u&&t&&K.unselectAll(),e instanceof I)e.setSelected(t),_();else{var n=K.getNodeById(e);n&&(n.setSelected(t),_())}}),[_,K,u]),k=e.useCallback((function(e,t){if(e instanceof I)e.setNodeDropContainer(t),_();else{var n=K.getNodeById(e);n&&(n.setNodeDropContainer(t),_())}}),[_,K]),P=e.useCallback((function(e,t,n,r){if(e instanceof I)e.setNodeChildren(t,n,r),K.enhanceNodes(),_();else{var i=K.getNodeById(e);i&&(i.setNodeChildren(t,n,r),K.enhanceNodes(),_())}}),[K,_]),T=e.useCallback((function(e,t,n){var r,i=null;if((i=e instanceof I?e:K.getNodeById(e))&&i.options.parent){var a,s=o(i.options.parent.getChildren());if(-1!==(a=s.findIndex((function(e){return i&&e.id===i.id})))){var l="before"===n?a:a+1;s.splice.apply(s,o([l,0],t)),i.options.parent.setNodeChildren(s,"first",!0),K.enhanceNodes(!0),_()}}if(i&&i.options.root&&-1!==(a=K.enhancedData.findIndex((function(e){return i&&i.id===e.id})))){l="before"===n?a:a+1;var d=t.map((function(e){return e.options.parent=void 0,e.options.root=!0,e.options.leaf=!1,e}));(r=K.enhancedData).splice.apply(r,o([l,0],d)),K.enhanceNodes(!0),_()}}),[K,_]),B=e.useCallback((function(e,t,n,r){P(e,K.staticEnhance(t,e),n,r)}),[P,K]),A=e.useCallback((function(e){return r(void 0,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:if(!(t=e instanceof I?e:K.getNodeById(e)))return[2];if(!t.data.getChildren||!s(t.data.getChildren)||t.isOpened())return[3,5];S(t,!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.data.getChildren({node:e})];case 2:return n=i.sent(),S(e,!1),t.setOpened(!0),B(e,n,"last",!0),[3,4];case 3:return r=i.sent(),console.error("react-hyper-tree: Error on getChildren",r),[3,4];case 4:return[3,6];case 5:t.setOpened(!t.isOpened()),K.enhanceNodes(),i.label=6;case 6:return _((function(){K.enhanceNodes()})),[2]}}))}))}),[_,K,S,B]),G=e.useCallback((function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,e.split("/").reduce((function(e,t){return r(void 0,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return n.sent(),[4,A(t)];case 2:return n.sent(),[2]}}))}))}),Promise.resolve())];case 1:return t.sent(),[2]}}))}))}),[A]),R=e.useCallback((function(e,t){return void 0===t&&(t=!1),r(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,G(e.split("/").slice(0,-1).join("/"))];case 1:return r.sent(),t?e.split("/").forEach((function(e){return e&&x(e,!0)})):(n=e.split("/").reverse()[0])&&x(n,!0),[2]}}))}))}),[x,G]),U=e.useCallback((function(e){e.stopPropagation(),D(!0)}),[]),M=e.useCallback((function(e,t){return function(n){n.stopPropagation(),n.preventDefault(),k(e,t),b(e.id),w(t)}}),[k]),V=e.useCallback((function(e){return function(t){t.stopPropagation(),t.preventDefault(),e.id!==m&&k(e,!1)}}),[k,m]),j=e.useCallback((function(e){return function(t){if(t.stopPropagation(),t.preventDefault(),D(!1),m&&k(m,!1),m&&m!==e.id){var n=K.getNodeById(m);e&&(e.options.parent?e.options.parent.removeChild(e):K.enhancedData=K.enhancedData.filter((function(t){return t.id!==e.id})),"children"===E?(e.options.parent=n,e.options.root=!1,e.options.leaf=!0,n.setNodeChildren([e],"last"),K.enhanceNodes(!0),_()):"after"!==E&&"before"!==E||T(n,[e],E),b(null))}}}),[m,_,K,k,T,E]);Z.safeUpdate(a,K).safeUpdateHandler(a,"rerender",_).safeUpdateHandler(a,"setOpen",A).safeUpdateHandler(a,"setOpenByPath",G).safeUpdateHandler(a,"setLoading",S).safeUpdateHandler(a,"setSelected",x).safeUpdateHandler(a,"setSelectedByPath",R).safeUpdateHandler(a,"setRawChildren",B).safeUpdateHandler(a,"setChildren",P).safeUpdateHandler(a,"setSiblings",T);var z=e.useMemo((function(){return{setChildren:P,setLoading:S,setOpen:A,setRawChildren:B,setSelected:x,setSiblings:T,draggableHandlers:{handleDragStart:U,handleDragEnter:M,handleDragLeave:V,handleDrop:j}}}),[M,V,U,j,P,S,A,B,x,T]);return{instance:K,handlers:z,required:{isDragging:L,data:K.enhancedData}}};
//# sourceMappingURL=index.js.map
