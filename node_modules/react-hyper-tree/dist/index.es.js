import{createElement as e,forwardRef as t,useCallback as n,useRef as i,useState as r,useEffect as o,useMemo as a}from"react";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function d(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function l(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))}function h(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}var c=function(e,t){return e*t+"px"},u=function(e){return e&&"[object Function]"==={}.toString.call(e)},f={childrenKey:"children",classes:{},depthGap:20,displayedName:function(e){return e.data.name},filter:function(){return!0},gapMode:"margin",horizontalLineStyles:{stroke:"black",strokeWidth:1,strokeDasharray:"1 1"},idKey:"id",opened:[],verticalLineOffset:5,verticalLineStyles:{stroke:"black",strokeWidth:1,strokeDasharray:"1 1"},verticalLineTopOffset:0},y=function(e){return Object.keys(e).filter((function(t){return!!e[t]})).reduce((function(e,t){return e?e+(t?" "+t:""):""+t}),"")},g=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[0]&&"string"==typeof e[0]?e.join(" "):y(e[0])};function v(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var _="hyperNodeArrowIcon___3MZdV",C="opened___18SZM";v(".hyperNodeArrowIcon___3MZdV {\n  transition: transform 0.1s ease;\n  cursor: pointer;\n  margin-right: 4px; }\n  .hyperNodeArrowIcon___3MZdV.opened___18SZM {\n    transform: rotate(90deg); }\n");var N=function(t){var n,i=t.onClick,r=t.opened;return e("svg",{className:g((n={},n[_]=!0,n[C]=!!r,n)),xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",onClick:i},e("path",{d:"M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"}))},b="loadingSpinner___2oRi6";v(".loadingSpinner___2oRi6 {\n  transform: scale(0.3);\n  animation: loading-spinner___3WGvQ 1s linear infinite;\n  margin-right: 4px; }\n\n@keyframes loading-spinner___3WGvQ {\n  from {\n    transform: rotate(0deg); }\n  to {\n    transform: rotate(360deg); } }\n");var m=function(){return e("svg",{className:b,xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 48 48"},e("g",{fill:"none"},e("path",{id:"track",fill:"#C6CCD2",d:"M24,48 C10.745166,48 0,37.254834 0,24 C0,10.745166 10.745166,0 24,0\n        C37.254834,0 48,10.745166 48,24 C48,37.254834 37.254834,48 24,48 Z M24,44\n        C35.045695,44 44,35.045695 44,24 C44,12.954305 35.045695,4 24,4\n        C12.954305,4 4,12.954305 4,24 C4,35.045695 12.954305,44 24,44 Z"}),e("path",{id:"section",fill:"#3F4850",d:"M24,0 C37.254834,0 48,10.745166 48,24 L44,24 C44,12.954305 35.045695,4 24,4 L24,0 Z"})))},D="hyperNode___30r3w";v(".hyperNode___30r3w {\n  display: flex;\n  align-items: center; }\n");var L=function(t){var n=t.displayedName,i=void 0===n?f.displayedName:n,r=t.node,o=t.onSelect,a=t.onToggle;return e("div",{className:D,onClick:o},(r.hasChildren()||r.options.async)&&!r.isLoading()&&e(N,{onClick:a,opened:r.isOpened()&&!!r.hasChildren()}),r.isLoading()&&e(m,null),e("div",null,u(i)?i(r):r.data[i]))},O="verticalLine___GRYJn",K="verticalSvgLine___3xCb4";v(".verticalLine___GRYJn {\n  position: absolute;\n  top: 0;\n  transition: all 0.2s ease; }\n  .verticalLine___GRYJn .verticalSvgLine___3xCb4 {\n    transition: all 0.2s ease; }\n");var w=function(t){var n=t.depth,i=t.depthGap,r=t.count,o=t.nodeHeight,a=t.verticalLineOffset,s=void 0===a?f.verticalLineOffset:a,d=t.verticalLineStyles,l=void 0===d?f.verticalLineStyles:d,h=t.verticalLineTopOffset,p=void 0===h?f.verticalLineTopOffset:h;return e("div",{className:O,style:{left:s+"px",marginLeft:c(n,i),top:p+"px"}},e("svg",{style:{height:Math.floor(r*o-(o?o/2:0))-p+"px",width:l.strokeWidth+"px",position:"absolute",transition:"all 0.2s ease"}},e("line",{x1:"0%",y1:"0%",x2:"0%",y2:"100%",className:K,style:l})))},S="horizontalLine___1P2PA";v(".horizontalLine___1P2PA {\n  position: absolute;\n  top: 0;\n  display: flex;\n  align-items: center;\n  height: 100%; }\n");var x=function(t){var n=t.depth,i=t.depthGap,r=t.verticalLineOffset,o=void 0===r?f.verticalLineOffset:r,a=t.horizontalLineStyles,s=void 0===a?f.horizontalLineStyles:a,d=t.gapMode;return e("div",{className:S,style:{width:i-o+"px",left:"padding"===d?o-i+n*i+"px":o-i+"px"}},e("svg",{style:{height:s.strokeWidth+"px",width:"100%"}},e("line",{x1:"0%",y1:"0%",x2:"100%",y2:"0%",style:s})))},E="dragZone___1hRQ8",P="dragZoneVisible___xCdOl",T="dragZoneItem___hWu26",I="dragZoneItemSelected___NJUnL";v(".dragZone___1hRQ8 {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  visibility: hidden;\n  opacity: 0; }\n  .dragZone___1hRQ8.dragZoneVisible___xCdOl {\n    visibility: visible;\n    opacity: 1; }\n  .dragZone___1hRQ8 .dragZoneItem___hWu26 {\n    transition: background-color 0.2s ease;\n    background-color: transparent;\n    width: 100%;\n    height: 100%; }\n    .dragZone___1hRQ8 .dragZoneItem___hWu26.dragZoneItemSelected___NJUnL {\n      background-color: rgba(179, 255, 192, 0.5); }\n");var k=function(t){var n,i,r,o,a=t.depth,s=t.depthGap,d=t.isDragging,l=t.node,h=t.onDragEnterAfter,p=t.onDragEnterBefore,u=t.onDragEnterChildren,f=t.onDragLeave;return e("div",{className:g((n={},n[E]=!0,n[P]=!!d,n)),style:{marginLeft:c(a,s)},onDragLeave:f},e("div",{className:g((i={},i[T]=!0,i[I]="before"===l.getNodeDropContainer(),i)),onDragEnter:p}),e("div",{className:g((r={},r[T]=!0,r[I]="children"===l.getNodeDropContainer(),r)),onDragEnter:u}),e("div",{className:g((o={},o[T]=!0,o[I]="after"===l.getNodeDropContainer(),o)),onDragEnter:h}))},Z={hyperTreeView:"hyperTreeView___32Aaq",hyperTreeNodeWrapper:"hyperTreeNodeWrapper___8UZOJ",hyperNodeWrapper:"hyperNodeWrapper___-4xPl",child:"child___2_fIN",collapsed:"collapsed___3-8dN"};v(".hyperTreeView___32Aaq .hyperTreeNodeWrapper___8UZOJ {\n  position: relative; }\n  .hyperTreeView___32Aaq .hyperTreeNodeWrapper___8UZOJ .hyperNodeWrapper___-4xPl {\n    position: relative;\n    opacity: 1; }\n  .hyperTreeView___32Aaq .hyperTreeNodeWrapper___8UZOJ .child___2_fIN {\n    position: relative;\n    transition: all 0.2s ease;\n    transform-origin: top;\n    transform-style: flat;\n    max-height: 99999px;\n    transform: scaleY(1);\n    opacity: 1;\n    visibility: visible; }\n    .hyperTreeView___32Aaq .hyperTreeNodeWrapper___8UZOJ .child___2_fIN.collapsed___3-8dN {\n      transition: all 0.2s cubic-bezier(0, 1, 0, 1);\n      transform: scaleY(0);\n      max-height: 0;\n      opacity: 0;\n      visibility: hidden;\n      overflow: hidden; }\n");var H=t((function(t,i){var r,o,a=t.classes,d=void 0===a?f.classes:a,l=t.depth,h=t.depthGap,p=void 0===h?f.depthGap:h,u=t.disableHorizontalLines,y=t.disableLines,v=t.displayedName,_=void 0===v?f.displayedName:v,C=t.draggable,N=t.draggableHandlers,b=t.gapMode,m=void 0===b?f.gapMode:b,D=t.horizontalLineStyles,O=t.isDragging,K=t.node,w=t.renderDragZone,S=t.renderNode,E=t.setOpen,P=t.setSelected,T=t.staticNodeHeight,I=t.verticalLineOffset,H=void 0===I?f.verticalLineOffset:I,W=n((function(e){e.stopPropagation(),E&&E(K)}),[K,E]),B=n((function(){P&&P(K,!K.isSelected())}),[K,P]),A={};T&&(A.height=T+"px");var G="padding"===m?"paddingLeft":"marginLeft",U=n((function(e){return N.handleDragEnter(K,e)}),[N,K]);return e("div",{draggable:C,onDragStart:C?N.handleDragStart:void 0,onDragEnd:C?N.handleDrop(K,K.getNodeDropContainer()):void 0,className:g((r={},r[Z.hyperNodeWrapper]=!0,r[Z.selected]=K.isSelected(),r[Z.dropContainer]=!!K.getNodeDropContainer(),r[d.nodeWrapper||""]=!!d.nodeWrapper,r[d.selectedNodeWrapper||""]=!(!d.selectedNodeWrapper||!K.isSelected()),r)),style:s((o={},o[G]=c(l,p),o),A),ref:i},C&&w?w({depth:l,depthGap:p,isDragging:O,node:K,onDragEnterAfter:U("after"),onDragEnterBefore:U("before"),onDragEnterChildren:U("children"),onDragLeave:N.handleDragLeave(K)}):C&&e(k,{depth:l,depthGap:p,isDragging:O,node:K,onDragEnterAfter:U("after"),onDragEnterBefore:U("before"),onDragEnterChildren:U("children"),onDragLeave:N.handleDragLeave(K)}),S?S({depth:l,depthGap:p,displayedName:_,node:K,nodeRef:i,offsetProp:G,onSelect:B,onToggle:W}):e(L,{displayedName:_,node:K,onSelect:B,onToggle:W}),!K.options.root&&!(y||u)&&e(x,{depth:l,depthGap:p,gapMode:m,horizontalLineStyles:D,verticalLineOffset:H}))})),W=function(t){var n,i=t.classes,r=void 0===i?f.classes:i,o=t.depth,a=t.depthGap,l=void 0===a?f.depthGap:a,h=t.disableLines,p=t.disableTransitions,c=t.disableVerticalLines,u=t.node,y=t.nodeHeight,v=t.verticalLineOffset,_=t.verticalLineStyles,C=t.verticalLineTopOffset,N=d(t,["classes","depth","depthGap","disableLines","disableTransitions","disableVerticalLines","node","nodeHeight","verticalLineOffset","verticalLineStyles","verticalLineTopOffset"]);return u.hasChildren()?!u.isOpened()&&p?null:e("div",{className:g((n={},n[Z.child]=!0,n[Z.collapsed]=!u.isOpened(),n[r.children||""]=!!r.children,n[r.collapsedChildren||""]=!(!r.collapsedChildren||u.isOpened()),n))},e(B,s({classes:r,data:u.getChildren(),depth:o+1,depthGap:l,disableLines:h,disableVerticalLines:c,disableTransitions:p,nodeHeight:y,verticalLineOffset:v,verticalLineStyles:_,verticalLineTopOffset:C},N)),!(h||c)&&e(w,{count:u.options.currentChilrenCount,depth:o,depthGap:l,nodeHeight:y,verticalLineOffset:v,verticalLineStyles:_,verticalLineTopOffset:C})):null},B=t((function(t,n){var i=t.classes,r=void 0===i?f.classes:i,o=t.data,a=t.depth,l=void 0===a?0:a,h=d(t,["classes","data","depth"]);return e("div",{className:g(Z.hyperTreeView,r.level)},o.map((function(t){return e("div",{key:t.getReactKey(),className:g(Z.hyperTreeNodeWrapper,r.parentChildren)},e(H,s({classes:r,depth:l,node:t,ref:n},h)),e(W,s({classes:r,depth:l,node:t},h)))})))})),A=function(t){var n=t.classes,a=void 0===n?f.classes:n,l=t.staticNodeHeight,h=d(t,["classes","staticNodeHeight"]),p=i(null),c=r(l||0),u=c[0],y=c[1];return o((function(){!p.current||u||l||y(p.current.clientHeight)}),[u,l]),e("div",{className:a.treeWrapper},e(B,s({classes:a,depth:0,nodeHeight:u,ref:p,staticNodeHeight:l},h)))},G=function(){function e(e,t,n){this.data=e,this.id=e[t.idKey],this.options=t,this.children=n}return e.prototype.getData=function(){return this.data},e.prototype.setData=function(e){this.data=e},e.prototype.getChildren=function(){return this.children||[]},e.prototype.setNodeChildren=function(e,t,n){return!this.hasChildren()||n?(this.setChildren(this.setNodesParent(e,this)),this.getChildren()):"first"===t?(this.setChildren(this.setNodesParent(p(e,this.children||[]),this)),this.getChildren()):(this.setChildren(this.setNodesParent(p(this.children||[],e),this)),this.getChildren())},e.prototype.removeChild=function(e){this.setChildren(this.getChildren().filter((function(t){return t.id!==e.id})))},e.prototype.setChildren=function(e){this.children=this.setNodesParent(e,this)},e.prototype.hasChildren=function(){return this.children&&0!==this.children.length},e.prototype.getParent=function(){return this.options.parent},e.prototype.setParent=function(e){this.options.parent=e},e.prototype.setNodesParent=function(e,t){return e.map((function(e){return e.setParent(t),e}))},e.prototype.setChildrenCount=function(e){this.options.childrenCount=e},e.prototype.getFirstChild=function(){return this.getChildren()[0]||null},e.prototype.getLastChild=function(){return this.children&&0!==this.children.length?this.children[this.children.length-1]:null},e.prototype.setOpened=function(e){this.options.opened=e||!1},e.prototype.isOpened=function(){return this.options.opened},e.prototype.setLoading=function(e){this.options.loading=e||!1},e.prototype.isLoading=function(){return this.options.loading},e.prototype.setSelected=function(e){this.options.selected=e||!1},e.prototype.isSelected=function(){return this.options.selected},e.prototype.setPath=function(e){this.options.path=e+"/"+this.id},e.prototype.getPath=function(e){return e?this.options.path.split("/").filter((function(e){return!!e})):this.options.path},e.prototype.setNodeDropContainer=function(e){void 0===e&&(e=!1),this.options.dropContainer=e},e.prototype.getNodeDropContainer=function(){return this.options.dropContainer},e.prototype.getReactKey=function(){return this.options.reactKey},e}(),U=function(){function e(e,t,n){this.id=e,this.data=t,this.options=n,this.enhancedData=[],this.ids=[],n.enhance&&this.enhance()}return e.prototype.on=function(e){e()},e.prototype.sort=function(e){return e.sort(this.options.sort),e},e.prototype.staticEnhance=function(e,t){var n;return t instanceof G?n=t:t&&(n=this.getNodeById(t)),this._staticEnhance(e,n)},e.prototype.enhance=function(e){return this.enhancedData=this._enhance(e||this.data,this.options),this.enhancedData},e.prototype.enhanceNodes=function(e){var t=this;void 0===e&&(e=!1),e&&(this.enhancedData=this._staticShallowEnahance(this.enhancedData)),this.traverse((function(e){t._calculateChildrenCount(e)}),!1)},e.prototype.flat=function(e){var t=e?this.data:this.enhancedData;return this.flatData=this._flat(t),this.ids=this.flatData.map((function(e){return e.id})),this.flatData},e.prototype.unselectAll=function(){this.traverse((function(e){e.setSelected(!1)}))},e.prototype.getOpenedNodes=function(){var e=[];return this.traverse((function(t){t.isOpened()&&e.push(t)})),e},e.prototype.addChildren=function(e,t,n){void 0===n&&(n="first"),this._addChildren(this.data,e,t,n)},e.prototype.addSibling=function(e,t,n){void 0===n&&(n="after"),this._addSibling(this.data,e,t,n)},e.prototype.remove=function(e,t){this._remove(this.data,null,e,t)},e.prototype.traverseRaw=function(e,t){void 0===t&&(t=!0),t?this._traverseDeep(this.data,e):this._traverseBreadth(this.data,e)},e.prototype.traverse=function(e,t){void 0===t&&(t=!0),t?this._traverseDeep(this.enhancedData,e):this._traverseBreadth(this.enhancedData,e)},e.prototype.getNodeById=function(e){return this._getNodeById(e,this.enhancedData)},e.prototype._addChildren=function(e,t,n,i){for(var r=0;r<e.length;r+=1){if(e[r][this.options.idKey]===t)switch(i){case"first":return void(e[r][this.options.childrenKey]=p(n,e[r][this.options.childrenKey]||[]));case"last":return void(e[r][this.options.childrenKey]=p(e[r][this.options.childrenKey]||[],n));default:return}else if(e[r][this.options.childrenKey]&&0!==e[r][this.options.childrenKey].length)return void this._addChildren(e[r][this.options.childrenKey],t,n,i);return}},e.prototype._addSibling=function(e,t,n,i){for(var r=this,o=0;o<e.length;o+=1){if(e[o][this.options.childrenKey]&&0!==e[o][this.options.childrenKey].length){var a=e[o][this.options.childrenKey].findIndex((function(e){return e[r.options.idKey]===t}));if(a>-1)return void e[o][this.options.childrenKey].splice("before"===i?a:a+1,0,n);this._addSibling(e[o][this.options.childrenKey],t,n,i)}return}},e.prototype._flat=function(e){var t=this,n=[];return e.forEach((function(e){var i=e.children,r=d(e,["children"]);n.push(r),i&&0!==i.length&&n.push.apply(n,t._flat(i))})),n},e.prototype._enhance=function(e,t,n){var i=this,r=[];return this.sort(e).forEach((function(e,o){var a,s=e[i.options.childrenKey]&&0!==e[i.options.childrenKey].length?e[i.options.childrenKey]:[],d=!1;"boolean"==typeof t.defaultOpened&&(d=t.defaultOpened),Array.isArray(t.defaultOpened)&&(d=t.defaultOpened.includes(e[t.idKey]));var l=new G(e,{opened:d,selected:!1,root:!n,leaf:!s,hasChildren:0!==s.length,async:!!e.getChildren,parent:n,childrenCount:0,currentChilrenCount:0,loading:!1,idKey:i.options.idKey,childrenKey:i.options.childrenKey,path:"",dropContainer:!1,reactKey:""});l.setPath(n?n.options.path:""),l.options.reactKey=l[i.options.idKey]+"-"+l.getPath()+"-"+o;var h=[];if(0!==s.length&&(h=i._enhance(i.sort(s),t,l),t.filter&&0!==h.length&&0!==(h=h.filter((function(e){return!!e.getChildren().some((function(e){return e.isOpened()}))||t.filter&&t.filter(e)}))).length))for(var p=0;p<h.length;p+=1)h[p].setOpened(!0),h[p].options.parent&&(null===(a=h[p].options.parent)||void 0===a||a.setOpened(!0));l.options.leaf&&l.setOpened(!0),l.setChildren(h),i._calculateChildrenCount(l),(!t.filter||!l.options.leaf||t.filter&&t.filter(l))&&r.push(l)})),r},e.prototype._staticEnhance=function(e,t){var n=this,i=[];return e.forEach((function(e,r){var o=e[n.options.childrenKey]||[],a=new G(e,{opened:!1,selected:!1,root:!t,leaf:0===o.length,hasChildren:0!==o.length,async:!!e.getChildren,parent:t,childrenCount:0,currentChilrenCount:0,loading:!1,idKey:n.options.idKey,childrenKey:n.options.childrenKey,path:"",dropContainer:!1,reactKey:""});a.setPath(t?t.options.path:""),a.options.reactKey=a[n.options.idKey]+"-"+a.getPath()+"-"+r;var s=[];0!==o.length&&(s=n._staticEnhance(o,a)),a.setChildren(s),n._calculateChildrenCount(a),i.push(a)})),i},e.prototype._staticShallowEnahance=function(e,t){var n=this,i=[];return e.forEach((function(e){var r=e[n.options.childrenKey]||[];e.options.parent=t,e.setPath(t?t.options.path:"");var o=[];0!==r.length&&(o=n._staticShallowEnahance(r,e)),e.setChildren(o),n._calculateChildrenCount(e),i.push(e)})),i},e.prototype._calculateChildrenCount=function(e){var t=e.getChildren().reduce((function(e,t){return t.isOpened()?e+=t.options.childrenCount:e}),0);e.isOpened()?e.options.childrenCount=e.getChildren().length+t:e.options.childrenCount=e.getChildren().length;var n=e.getLastChild();if(n&&n.isOpened()){var i=e.options.childrenCount;e.options.currentChilrenCount=i-n.options.childrenCount}else e.options.currentChilrenCount=e.options.childrenCount},e.prototype._remove=function(e,t,n,i){for(var r=0;r<e.length;r+=1){if(e[r][this.options.idKey]===n){var o=e[r];return e.splice(r,1),void(t&&o[this.options.childrenKey]&&0!==o[this.options.childrenKey].length&&i&&(t[this.options.childrenKey]="start"===i?p(o[this.options.childrenKey],t[this.options.childrenKey]||[]):p(t[this.options.childrenKey]||[],o[this.options.childrenKey])))}e[r][this.options.childrenKey]&&0!==e[r][this.options.childrenKey].length&&this._remove(e[r][this.options.childrenKey],e[r],n,i)}},e.prototype._getNodeById=function(e,t){for(var n=0;n<t.length;n+=1){if((""+t[n][this.options.idKey]).toLowerCase()===(""+e).toLowerCase())return t[n];if(t[n][this.options.childrenKey]&&0!==t[n][this.options.childrenKey].length){var i=this._getNodeById(e,t[n][this.options.childrenKey]);if(i)return i}}return null},e.prototype._traverseDeep=function(e,t,n){var i=this;void 0===n&&(n=0),e.forEach((function(e,r){t(e,r,n),e.children&&0!==e.children.length&&i._traverseDeep(e.children,t,n+1)}))},e.prototype._traverseBreadth=function(e,t,n){var i=this;void 0===n&&(n=0),e.forEach((function(e,r){e.children&&0!==e.children.length&&i._traverseDeep(e.children,t,n+1),t(e,r,n)}))},e}(),R=new(function(){function e(){this.trees={}}return e.prototype.getIds=function(){return Object.keys(this.trees)},e.prototype.safeUpdate=function(e,t){return this.trees[e]?(this.trees[e].instance=t,this.trees[e].handlers={}):this.trees[e]={instance:t,handlers:{}},this},e.prototype.remove=function(e){var t=this.trees,n=e,i=(t[n],d(t,["symbol"==typeof n?n:n+""]));return this.trees=i,this},e.prototype.safeUpdateHandler=function(e,t,n){var i;return this.trees[e]&&(this.trees[e].handlers=s(s({},this.trees[e].handlers),((i={})[t]=n,i))),this},e.prototype.removeHandler=function(e,t){if(this.trees[e]){var n=this.trees[e].handlers,i=t,r=(n[i],d(n,["symbol"==typeof i?i:i+""]));this.trees[e].handlers=r}return this},e.prototype.updateLoadedData=function(e,t){this.trees[e]&&(this.trees[e].loadedData=t)},e}()),M={sort:function(){return 0}},V=function(e){var t,i=e.id,o=e.data,s=e.filter,d=e.sort,c=e.defaultOpened,y=e.multipleSelect,g=e.idKey,v=void 0===g?f.idKey:g,_=e.childrenKey,C=void 0===_?f.childrenKey:_,N=(t=r(Object.create(null))[1],n((function(e){e&&e(),t(Object.create(null))}),[t])),b=r(null),m=b[0],D=b[1],L=r(!1),O=L[0],K=L[1],w=r(!1),S=w[0],x=w[1],E=a((function(){return new U(i,Array.isArray(o)?o:[o],{idKey:v,childrenKey:C,defaultOpened:c,filter:s,enhance:!0,sort:d||M.sort})}),[o,s,i,d,v,C]),P=n((function(e,t){if(e instanceof G)e.setLoading(t),N();else{var n=E.getNodeById(e);n&&(n.setLoading(t),N())}}),[N,E]),T=n((function(e,t){if(!y&&t&&E.unselectAll(),e instanceof G)e.setSelected(t),N();else{var n=E.getNodeById(e);n&&(n.setSelected(t),N())}}),[N,E,y]),I=n((function(e,t){if(e instanceof G)e.setNodeDropContainer(t),N();else{var n=E.getNodeById(e);n&&(n.setNodeDropContainer(t),N())}}),[N,E]),k=n((function(e,t,n,i){if(e instanceof G)e.setNodeChildren(t,n,i),E.enhanceNodes(),N();else{var r=E.getNodeById(e);r&&(r.setNodeChildren(t,n,i),E.enhanceNodes(),N())}}),[E,N]),Z=n((function(e,t,n){var i,r=null;if((r=e instanceof G?e:E.getNodeById(e))&&r.options.parent){var o,a=p(r.options.parent.getChildren());if(-1!==(o=a.findIndex((function(e){return r&&e.id===r.id})))){var s="before"===n?o:o+1;a.splice.apply(a,p([s,0],t)),r.options.parent.setNodeChildren(a,"first",!0),E.enhanceNodes(!0),N()}}if(r&&r.options.root&&-1!==(o=E.enhancedData.findIndex((function(e){return r&&r.id===e.id})))){s="before"===n?o:o+1;var d=t.map((function(e){return e.options.parent=void 0,e.options.root=!0,e.options.leaf=!1,e}));(i=E.enhancedData).splice.apply(i,p([s,0],d)),E.enhanceNodes(!0),N()}}),[E,N]),H=n((function(e,t,n,i){k(e,E.staticEnhance(t,e),n,i)}),[k,E]),W=n((function(e){return l(void 0,void 0,void 0,(function(){var t,n,i;return h(this,(function(r){switch(r.label){case 0:if(!(t=e instanceof G?e:E.getNodeById(e)))return[2];if(!t.data.getChildren||!u(t.data.getChildren)||t.isOpened())return[3,5];P(t,!0),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.data.getChildren({node:e})];case 2:return n=r.sent(),P(e,!1),t.setOpened(!0),H(e,n,"last",!0),[3,4];case 3:return i=r.sent(),console.error("react-hyper-tree: Error on getChildren",i),[3,4];case 4:return[3,6];case 5:t.setOpened(!t.isOpened()),E.enhanceNodes(),r.label=6;case 6:return N((function(){E.enhanceNodes()})),[2]}}))}))}),[N,E,P,H]),B=n((function(e){return l(void 0,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,e.split("/").reduce((function(e,t){return l(void 0,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return n.sent(),[4,W(t)];case 2:return n.sent(),[2]}}))}))}),Promise.resolve())];case 1:return t.sent(),[2]}}))}))}),[W]),A=n((function(e,t){return void 0===t&&(t=!1),l(void 0,void 0,void 0,(function(){var n;return h(this,(function(i){switch(i.label){case 0:return[4,B(e.split("/").slice(0,-1).join("/"))];case 1:return i.sent(),t?e.split("/").forEach((function(e){return e&&T(e,!0)})):(n=e.split("/").reverse()[0])&&T(n,!0),[2]}}))}))}),[T,B]),V=n((function(e){e.stopPropagation(),K(!0)}),[]),j=n((function(e,t){return function(n){n.stopPropagation(),n.preventDefault(),I(e,t),D(e.id),x(t)}}),[I]),z=n((function(e){return function(t){t.stopPropagation(),t.preventDefault(),e.id!==m&&I(e,!1)}}),[I,m]),J=n((function(e){return function(t){if(t.stopPropagation(),t.preventDefault(),K(!1),m&&I(m,!1),m&&m!==e.id){var n=E.getNodeById(m);e&&(e.options.parent?e.options.parent.removeChild(e):E.enhancedData=E.enhancedData.filter((function(t){return t.id!==e.id})),"children"===S?(e.options.parent=n,e.options.root=!1,e.options.leaf=!0,n.setNodeChildren([e],"last"),E.enhanceNodes(!0),N()):"after"!==S&&"before"!==S||Z(n,[e],S),D(null))}}}),[m,N,E,I,Z,S]);R.safeUpdate(i,E).safeUpdateHandler(i,"rerender",N).safeUpdateHandler(i,"setOpen",W).safeUpdateHandler(i,"setOpenByPath",B).safeUpdateHandler(i,"setLoading",P).safeUpdateHandler(i,"setSelected",T).safeUpdateHandler(i,"setSelectedByPath",A).safeUpdateHandler(i,"setRawChildren",H).safeUpdateHandler(i,"setChildren",k).safeUpdateHandler(i,"setSiblings",Z);var Q=a((function(){return{setChildren:k,setLoading:P,setOpen:W,setRawChildren:H,setSelected:T,setSiblings:Z,draggableHandlers:{handleDragStart:V,handleDragEnter:j,handleDragLeave:z,handleDrop:J}}}),[j,z,V,J,k,P,W,H,T,Z]);return{instance:E,handlers:Q,required:{isDragging:O,data:E.enhancedData}}};export default A;export{N as Arrow,L as DefaultNode,k as DragZone,x as HorizontalLine,m as Loader,A as Tree,w as VerticalLine,R as treeHandlers,V as useTreeState};
//# sourceMappingURL=index.es.js.map
